/*!
	* build-version - v20240909164321
*/
!function(t,e){"use strict";function i(t){var e=Object.create(null);return t&&Object.keys(t).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,n.get?n:{enumerable:!0,get:function(){return t[i]}})}})),e.default=t,Object.freeze(e)}var n=i(t),a=i(e),o=function(t){function e(e){t.call(this);var i=this.addChild(new PIXI.Text("",{fill:16777215,fontSize:20,fontWeight:"bold",stroke:0,strokeThickness:5})),n=60,a=60;this.task.on("fpsUpDate",(function(t){if(a>=60){var o=60/Math.max(n,.001)*60;i.text=o.toFixed(2)+"fps",a=n=0,i.x=0,i.y=e.height-i.height}n+=t.delta,a++}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),r=function(){this._tipDate=[],this.x=0,this.y=0,this._tipStruct=function(){return function(){this.rotation=0,this.isXTrun=!1,this.isYTrun=!1,this.localpos={x:-1,y:-1,z:-1},this.texture=null,this.collusionSize={width:48,height:48}}}()};r.prototype.add=function(t){var e=new this._tipStruct;for(var i in e)void 0!==t[i]&&(e[i]=t[i]);this._tipDate.push(e)},r.prototype.get=function(){};var s=function(){var t=new r;this._chipDate=t,t.add({texture:"p1",localpos:{x:0,y:0,z:0},rotation:0});for(var e=[{x:32,y:25},{x:320,y:25},{x:146,y:216},{x:32,y:190},{x:330,y:540},{x:32,y:540}],i=0;i<e.length;i++){for(var n=0;n<6;n++){var a=e[i].x+28*Math.random(),o=e[i].y+28*Math.random();t.add({texture:"p2",localpos:{x:a,y:o,z:1}}),t.add({texture:"p3",localpos:{x:a,y:o,z:1.9}})}for(var s=0;s<6;s++)t.add({texture:"p4",localpos:{x:e[i].x+12*Math.random(),y:e[i].y+12*Math.random(),z:3}})}t.add({texture:"p11",localpos:{x:220,y:70,z:0},rotation:Math.PI/2}),t.add({texture:"p13",localpos:{x:220,y:70,z:2},rotation:Math.PI/2}),t.add({texture:"p16",localpos:{x:236,y:235,z:0},rotation:Math.PI/2}),t.add({texture:"p19",localpos:{x:236,y:430,z:2},rotation:Math.PI/2,isXTrun:!0}),t.add({texture:"p20",localpos:{x:236,y:430,z:3},rotation:Math.PI/2,isXTrun:!0}),t.add({texture:"p23",localpos:{x:90,y:420,z:0},rotation:0}),t.add({texture:"p29",localpos:{x:90,y:420,z:2},rotation:0}),t.add({texture:"p35",localpos:{x:404,y:88,z:0},isXTrun:!0}),t.add({texture:"p23",localpos:{x:425,y:80,z:0},rotation:Math.PI/2}),t.add({texture:"p26",localpos:{x:425,y:80,z:2},rotation:Math.PI/2}),t.add({texture:"p23",localpos:{x:425,y:190,z:0},rotation:Math.PI/2}),t.add({texture:"p28",localpos:{x:429,y:190,z:2},rotation:Math.PI/2}),t.add({texture:"p27",localpos:{x:433,y:190,z:3},rotation:Math.PI/2}),t.add({texture:"p23",localpos:{x:425,y:302,z:0},rotation:Math.PI/2}),t.add({texture:"p25",localpos:{x:425,y:302,z:2},rotation:Math.PI/2}),t.add({texture:"p24",localpos:{x:410,y:460,z:0},rotation:Math.PI/2}),t.add({texture:"p30",localpos:{x:410,y:460,z:2},rotation:Math.PI/2}),t.add({texture:null,collusionSize:{width:60,height:54},localpos:{x:48,y:48,z:0}}),t.add({texture:null,collusionSize:{width:60,height:54},localpos:{x:48,y:210,z:0}}),t.add({texture:null,collusionSize:{width:60,height:54},localpos:{x:48,y:560,z:0}}),t.add({texture:null,collusionSize:{width:44,height:154},localpos:{x:138,y:90,z:0}}),t.add({texture:null,collusionSize:{width:68,height:132},localpos:{x:120,y:275,z:0}}),t.add({texture:null,collusionSize:{width:68,height:114},localpos:{x:124,y:455,z:0}}),t.add({texture:null,collusionSize:{width:110,height:304},localpos:{x:280,y:106,z:0}}),t.add({texture:null,collusionSize:{width:110,height:80},localpos:{x:264,y:490,z:0}}),t.add({texture:null,collusionSize:{width:48,height:48},localpos:{x:350,y:48,z:0}}),t.add({texture:null,collusionSize:{width:48,height:48},localpos:{x:350,y:560,z:0}})};s.prototype.getChipDate=function(){return this._chipDate};var h=function(){var t=new r;this._chipDate=t,t.add({texture:"p48",localpos:{x:0,y:0,z:0},rotation:0});for(var e=[{x:32,y:25},{x:320,y:25},{x:380,y:120}],i=0;i<e.length;i++){for(var n=0;n<6;n++){var a=e[i].x+28*Math.random(),o=e[i].y+28*Math.random();t.add({texture:"p2",localpos:{x:a,y:o,z:1}}),t.add({texture:"p3",localpos:{x:a,y:o,z:1.9}})}for(var s=0;s<6;s++)t.add({texture:"p4",localpos:{x:e[i].x+12*Math.random(),y:e[i].y+12*Math.random(),z:3}})}t.add({texture:"p49",localpos:{x:136,y:130,z:0},rotation:Math.PI/2-.2}),t.add({texture:"p15",localpos:{x:50,y:110,z:0},rotation:-.2}),t.add({texture:"p19",localpos:{x:50,y:110,z:1.5},rotation:-.2}),t.add({texture:"p20",localpos:{x:50,y:110,z:1.7},rotation:-.2}),t.add({texture:"p49",localpos:{x:330,y:90,z:0},rotation:Math.PI/2-.2}),t.add({texture:"p15",localpos:{x:206,y:80,z:0},rotation:-.2}),t.add({texture:"p29",localpos:{x:380,y:60,z:1.5},rotation:Math.PI/2-.2}),t.add({texture:"p49",localpos:{x:550,y:60,z:0},rotation:Math.PI/2-.2}),t.add({texture:"p50",localpos:{x:440,y:70,z:0},rotation:Math.PI/2-.2}),t.add({texture:"p12",localpos:{x:380,y:60,z:0},rotation:-.2}),t.add({texture:"p13",localpos:{x:380,y:60,z:1.5},rotation:-.2}),t.add({texture:null,collusionSize:{width:110,height:70},localpos:{x:100,y:135,z:0}}),t.add({texture:null,collusionSize:{width:110,height:70},localpos:{x:250,y:110,z:0}}),t.add({texture:null,collusionSize:{width:100,height:56},localpos:{x:420,y:80,z:0}}),t.add({texture:null,collusionSize:{width:60,height:56},localpos:{x:500,y:64,z:0}}),t.add({texture:null,collusionSize:{width:32,height:32},localpos:{x:58,y:58,z:0}}),t.add({texture:null,collusionSize:{width:32,height:32},localpos:{x:350,y:52,z:0}}),t.add({texture:null,collusionSize:{width:32,height:32},localpos:{x:350,y:52,z:0}}),t.add({texture:null,collusionSize:{width:32,height:32},localpos:{x:410,y:160,z:0}})};h.prototype.getChipDate=function(){return this._chipDate};var c=function(t){function e(e,i,n,a,o){var r=this;t.call(this);var s=e.resources.spritesheets.skin;this._collusionLength={width:38,height:35},this._lostRange=18,this._invincibleRange=0,this._firePower=1;var h=this,c=this.addChild(new Pixim.Container),d=e.resources.spritesheets.car,y=c.addChild(new Pixim.Container),C=y.addChild(new Pixim.Container),g=y.addChild(new u(e,a.roller/2));g.y=-70,this._hitCollusionList=[{width:30,height:25,distance:31,isCollusion:!0},{width:g.rollSize.width/2*.58,height:.82*g.rollSize.height,distance:68,isCollusion:!1}];var _=y.addChild(new m(e));_.y=-40;var I=y.addChild(new Pixim.Container),P=y.addChild(new Pixim.Container),b=y.addChild(new Pixim.Container),k=y.addChild(new f(e));k.y=-40,k.on("shoot",(function(){h.emit("machinShoot",{x:k.x,y:k.y})})),k.taskEnabled=!1;var M=!1,S=!1,X=function(t,e){var n=t,a=0;h.task.clear(n),h.task.on(n,(function(n){a>=e?(S&&i.play({name:t}),a=0):a+=n.delta}))},D=function(t){h.task.clear(t),i.stop({name:t})},j=n.timer.addChild(new l(e));j.x=e.width/2,j.y=e.height/2+150;var O=[{obj:g,isPlay:!1,begin:function(){g.emit("start"),r._hitCollusionList[1].isCollusion=!0,X("se_deathroller",10)},end:function(){g.emit("end"),r._hitCollusionList[1].isCollusion=!1,D("se_deathroller")}},{obj:k,isPlay:!1,begin:function(){k.emit("start",60/Math.max(1,a.machin))},end:function(){k.emit("end")}},{obj:null,isPlay:!1,begin:function(){r.emit("addTime",5)},end:function(){}},{obj:_,isPlay:!1,begin:function(){_.emit("start"),r._invincibleRange=52,X("se_protect",10)},end:function(){_.emit("end"),r._invincibleRange=0,D("se_protect")}}];this._skillNowTime=0,this.on("circleEffect",(function(){var t=r.addChild(new x(e,6));t.y=10,t.once("destroy",(function(){t.parent.removeChild(t),t=null}))})),this.once("allSkillPlay",(function(){M=!0})),this.once("headLight",(function(){var t=y.addChild(new PIXI.Sprite(e.resources.spritesheets.bonusstage.night_002));t.anchor.set(.5,1),t.scale.set(2),t.blendMode=PIXI.BLEND_MODES.ADD})),this.once("canEnable",(function(){k.taskEnabled=!0,S=!0})),this.on("playSkill",(function(t){var i=O[t],o="skillTask"+t,s=2===t,c=r.addChild(new x(e,6));if(c.y=10,c.once("destroy",(function(){c.parent.removeChild(c),c=null})),s){var d=n.timer.addChild(new v(e,t,!1));return d.x=r.x,d.y=r.y+30,O[t].begin(),void d.once("finishTimerAnimation",(function(){h.emit("timeAddEffect"),d.task.clear(),n.timer.removeChild(d)}))}n.normal.removeChildren();var l=n.normal.addChild(new v(e,t,!0));l.x=r.x,l.y=r.y+30,l.once("destroy",(function(){l.task.clear(),n.normal.removeChild(l)})),l.visible=!1,i.isPlay&&(r.task.clear(o),i.end()),i.isPlay=!0;var p=480;3===t&&(p=60*a.cutter),i.begin();var u=0;i.obj.alpha=1,r.task.on(o,(function(t){if(M||(p-=t.delta),p<=120&&(i.obj.alpha=parseInt(u)%2==0?0:1,u+=.24*t.delta),p<=0)return r.task.clear(o),i.end(),void(i.isPlay=!1)}))})),this.on("callPenaltyEffect",(function(){var t=Math.random()<.5?0:1,i=(0===t?I:P).addChild(new w(e,t));i.scale.set(.74),i.alpha=.6,i.once("destroy",(function(){i.task.clear(),i.parent.removeChild(i),i=null}))})),this.once("dustEffect",(function(){var t=0;r.task.on("dustEffectMain",(function(i){if(t>=1){for(var n=0;n<2;n++){var a=C.addChild(new p(e));a.x=68*Math.random()-34,a.y=50+16*Math.random()}t=0}else t+=i.delta}))})),this.emit("dustEffect");for(var A={skinAnim0:{bodyParts:[{tex:"skin0_1",distWid:20,distSclX:.02,distSclY:0,distShake:0},{tex:"skin0_2",distWid:32,distSclX:.03,distSclY:0,distShake:0},{tex:"skin0_3",distWid:36,distSclX:.04,distSclY:1,distShake:1.2},{tex:"skin0_4",distWid:38,distSclX:.05,distSclY:1,distShake:1.2}],cataParts:{tex:"taiya0",x:34,y:14},initter:function(){}},skinAnim1:{bodyParts:[{tex:"skin1_1",distWid:20,distSclX:.02,distSclY:0,distShake:0},{tex:"skin1_2",distWid:32,distSclX:.03,distSclY:0,distShake:0},{tex:"skin1_3",distWid:36,distSclX:.04,distSclY:1,distShake:1.2},{tex:"skin1_4",distWid:38,distSclX:.05,distSclY:1,distShake:1.2}],cataParts:{tex:"taiya0",x:34,y:14},initter:function(){}},skinAnim2:{bodyParts:[{tex:"skin2_1",distWid:20,distSclX:.02,distSclY:0,distShake:0},{tex:"skin2_2",distWid:32,distSclX:.03,distSclY:0,distShake:0},{tex:"skin2_3",distWid:36,distSclX:.04,distSclY:1,distShake:1.2},{tex:"skin2_4",distWid:38,distSclX:.05,distSclY:1,distShake:1.2}],cataParts:{tex:"taiya0",x:34,y:14},initter:function(){}},skinAnim3:{bodyParts:[{tex:"skin3_1",distWid:20,distSclX:.02,distSclY:0,distShake:0},{tex:"skin3_2",distWid:32,distSclX:.03,distSclY:0,distShake:0},{tex:"skin3_3",distWid:36,distSclX:.04,distSclY:1,distShake:1.2},{tex:"skin3_4",distWid:38,distSclX:.05,distSclY:1,distShake:1.2}],cataParts:{tex:"taiya0",x:34,y:14},initter:function(){}},skinAnim4:{bodyParts:[{tex:"skin4_1",distWid:20,distSclX:.02,distSclY:0,distShake:0},{tex:"skin4_2",distWid:32,distSclX:.03,distSclY:0,distShake:0},{tex:"skin4_3",distWid:36,distSclX:.04,distSclY:1,distShake:1.2},{tex:"skin4_4",distWid:38,distSclX:.05,distSclY:1,distShake:1.2}],cataParts:{tex:"taiya0",x:34,y:14},initter:function(){}},skinAnim5:{bodyParts:[{tex:"skin5_1",distWid:20,distSclX:.02,distSclY:0,distShake:0},{tex:"skin5_2",distWid:32,distSclX:.03,distSclY:0,distShake:0},{tex:"skin5_3",distWid:36,distSclX:.04,distSclY:1,distShake:1.2},{tex:"skin5_4",distWid:38,distSclX:.05,distSclY:1,distShake:1.2}],cataParts:{tex:"taiya0",x:34,y:14},initter:function(){}},skinAnim6:{bodyParts:[{tex:"skin6_1",distWid:20,distSclX:.02,distSclY:0,distShake:0},{tex:"skin6_2",distWid:32,distSclX:.03,distSclY:0,distShake:0},{tex:"skin6_3",distWid:36,distSclX:.04,distSclY:1,distShake:1.2},{tex:"skin6_4",distWid:38,distSclX:.05,distSclY:1,distShake:1.2}],cataParts:{tex:"taiya0",x:34,y:14},initter:function(){}},skinAnim7:{bodyParts:[{tex:"skin7_1",distWid:20,distSclX:.02,distSclY:0,distShake:0},{tex:"skin7_2",distWid:32,distSclX:.03,distSclY:0,distShake:0},{tex:"skin7_3",distWid:36,distSclX:.04,distSclY:1,distShake:1.2},{tex:"skin7_4",distWid:38,distSclX:.05,distSclY:1,distShake:1.2}],cataParts:{tex:"taiya0",x:34,y:14},initter:function(){}},skinAnim8:{bodyParts:[{tex:"skin8_1",distWid:20,distSclX:.02,distSclY:0,distShake:0},{tex:"skin8_2",distWid:32,distSclX:.03,distSclY:0,distShake:0},{tex:"skin8_3",distWid:36,distSclX:.04,distSclY:1,distShake:1.2},{tex:"skin8_4",distWid:38,distSclX:.05,distSclY:1,distShake:1.2}],cataParts:{tex:"taiya0",x:34,y:14},initter:function(){}},skinAnim9:{bodyParts:[{tex:"skin9_1",distWid:20,distSclX:.02,distSclY:0,distShake:0},{tex:"skin9_2",distWid:32,distSclX:.03,distSclY:0,distShake:0},{tex:"skin9_3",distWid:36,distSclX:.04,distSclY:1,distShake:1.2},{tex:"skin9_4",distWid:38,distSclX:.05,distSclY:1,distShake:1.2}],cataParts:{tex:"taiya0",x:34,y:14},initter:function(){}},skinAnim10:{bodyParts:[{tex:"skin10_1",distWid:20,distSclX:.02,distSclY:0,distShake:0},{tex:"skin10_2",distWid:32,distSclX:.03,distSclY:0,distShake:0},{tex:"skin10_3",distWid:36,distSclX:.04,distSclY:1,distShake:1.2},{tex:"skin10_4",distWid:38,distSclX:.05,distSclY:1,distShake:1.2}],cataParts:{tex:"taiya0",x:34,y:14},initter:function(){}},skinAnim11:{bodyParts:[{tex:"skin11_1",distWid:20,distSclX:.02,distSclY:0,distShake:0},{tex:"skin11_2",distWid:32,distSclX:.03,distSclY:0,distShake:0},{tex:"skin11_3",distWid:36,distSclX:.04,distSclY:1,distShake:1.2},{tex:"skin11_4",distWid:38,distSclX:.05,distSclY:1,distShake:1.2}],cataParts:{tex:"taiya0",x:34,y:14},initter:function(){}},skinAnim12:{bodyParts:[{tex:"skin12_1",distWid:20,distSclX:.02,distSclY:0,distShake:0},{tex:"skin12_2",distWid:32,distSclX:.03,distSclY:0,distShake:0},{tex:"skin12_3",distWid:36,distSclX:.04,distSclY:1,distShake:1.2},{tex:"skin12_4",distWid:38,distSclX:.05,distSclY:1,distShake:1.2}],cataParts:{tex:"taiya0",x:34,y:14},initter:function(){}},skinAnim13:{bodyParts:[{tex:"skin13_1",distWid:20,distSclX:.02,distSclY:0,distShake:0},{tex:"skin13_2",distWid:32,distSclX:.03,distSclY:0,distShake:0},{tex:"skin13_3",distWid:36,distSclX:.04,distSclY:1,distShake:1.2},{tex:"skin13_4",distWid:38,distSclX:.05,distSclY:1,distShake:1.2}],cataParts:{tex:"taiya0",x:34,y:14},initter:function(){}}}[void 0===o?"skinAnim0":"skinAnim"+o],T=b.addChild(new Pixim.Container),z=0;z<A.bodyParts.length;z++){var E=A.bodyParts[z];E.sprite=b.addChild(new PIXI.Sprite(d[E.tex])),E.sprite.anchor.set(.5)}var F=T.addChild(new PIXI.Sprite(d[A.cataParts.tex])),R=T.addChild(new PIXI.Sprite(d[A.cataParts.tex]));F.anchor.set(.5),R.anchor.set(.5),F.x=A.cataParts.x,R.x=-A.cataParts.x,F.y=R.y=A.cataParts.y,this.on("playStepon",(function(){var t,e=0,i=Math.random()<.5?1:-1;r.task.clear("stepon"),r.task.on("stepon",(function(n){t=1-(1+Math.cos(4*Math.PI*e))/2,W.x=i*(12.5*(1-e))*Math.cos(6*Math.PI*e),W.y=40.5*(1-e)*t,W.scy=-.05*(1-e)*t,W.fx=t,e<1?e=Math.min(1,e+.034482758620689655*n.delta):r.task.clear("stepon")}))})),this.on("playRotation",(function(t){y.rotation=t.rotation,B=t.isRight}));var L,B=!0,W={x:0,y:0,scy:0,fx:0},Y=0,G=0,H=y.rotation,N=0,U=B?-1:1;this.task.on("main",(function(t){N+=(Math.min(1,30*Math.abs(y.rotation-H))-N)*(.07*t.delta),H=y.rotation,U+=((B?-1:1)-U)*(.03*t.delta),L=Y+G;for(var e=A.bodyParts,i=0;i<e.length;i++){var n=e[i];n.sprite.x=n.distShake*Math.cos(L)+W.x/5+U*n.distWid*N,n.sprite.y=n.distShake*Math.sin(L)+W.y/5,n.sprite.scale.x=1-n.distSclX*N,n.sprite.scale.y=1+W.scy*n.distSclY}T.x=30*U*N,T.y=-52,T.scale.x=1-.022*N,T.scale.y=1,F.rotation=R.rotation=.5*-U*N,C.x=20*U*N-W.x/3,g.x=21*U*N+W.x/4,_.x=2*U*N+W.x/4,k.x=48*U*N+W.x/4,g.y=W.y/4-70,_.y=W.y/4-40,k.y=14+W.y/4,Y+=.5*t.delta,G+=.3*t.delta}));var V=c.addChild(new PIXI.Sprite(s.carselect_secret));V.scale.set(1.5),V.x=parseInt(-V.width/2),V.y=parseInt(-V.height/2),V.visible=!1,this.on("unlockAnime",(function(){for(var t=A.bodyParts,e=0;e<t.length;e++)t[e].sprite.tint=0;V.visible=!0}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCollusionData=function(){return this._hitCollusionList},e.prototype.getCollusionLength=function(){return this._collusionLength},e.prototype.getLostRange=function(){return this._lostRange},e.prototype.getInvincibleRange=function(){return this._invincibleRange},e.prototype.getFirePower=function(){return this._firePower},e}(Pixim.Container),d=function(t){function e(e,i,n){var a=this;t.call(this);var o=e.resources.spritesheets.effects,r=this,s=50*Math.cos(i),h=50*Math.sin(i),c=Math.pow(38,2),d=this.addChild(new PIXI.Sprite(o.et7));d.anchor.set(.5,1),d.scale.set(.03,.6),d.rotation=i+Math.PI/2,d.tint=16777147,this.on("upDate",(function(t){a.dx+=s*t.delta,a.dy+=h*t.delta;var e=!1;n.forObjectList("enemys",(function(t){if(!e)return Math.pow(t.dx-r.dx,2)+Math.pow(t.dy-r.dy,2)<=c?(r.emit("destroy"),t.emit("hitMachingun",i),void(e=!0)):void 0}))})),this.once("changedVisible",(function(t){a.emit("destroy")})),this.once("objectHit",(function(){a.emit("destroy")}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),l=function(t){function e(e){t.call(this),this.gcont=this.addChild(new Pixim.Container)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._upDateGauge=function(){for(var t=this.gcont,e=t.children.length-1,i=e;i>=0;i--)t.children[i].y=12*(e-i)},e.prototype.getLatestID=function(){var t=this.gcont;return t.children.length<=0?-1:t.children[t.children.length-1].gaugeID},e.prototype.deleteGauge=function(t){for(var e=this.gcont,i=0;i<e.children.length;i++)e.children[i].gaugeID===t&&e.children[i].emit("destroy")},e.prototype.addGauge=function(t){var e=this,i=this.gcont,n=new PIXI.Container;return n.gaugeID=t.gaugeID,i.addChild(n),this._upDateGauge(),n.once("destroy",(function(){i.removeChild(n),n=null,e._upDateGauge()})),n},e}(Pixim.Container),p=function(t){function e(e){var i=this;t.call(this);var n=e.resources.spritesheets.effects,a=this.addChild(new PIXI.Sprite(n.et7));a.tint=13882295,a.anchor.set(.5),a.rotation=2*Math.PI*Math.random();var o,r=0,s=.07*(3+3*Math.random()),h=50+50*Math.random();this.task.on("upDate",(function(t){o=1-Math.pow(1-r,2),a.alpha=1-r,a.scale.set(s-.4*s*o),a.y=h*o,r<1?r=Math.min(1,r+.08333333333333333*t.delta):(i.task.clear(),i.parent.removeChild(i))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),u=function(t){function e(e,i){var n=this;t.call(this);var a=e.resources.spritesheets.items,o=this,r=this.addChild(new PIXI.Container),s=r.addChild(new Pixim.Container),h=r.addChild(new PIXI.Container),c=[];this.visible=!1;var d=h.addChild(new PIXI.Container),l=d.addChild(new PIXI.Sprite(a.et0_4_0));l.visible=!1;for(var u=0,m=0;m<3;m++){var f=d.addChild(new PIXI.Sprite(a.et0_0));f.x=u,u+=f.width+8,c.push(f)}l.x=d.width/2-l.width/2,l.y=d.height/2-16,l.visible=!0,d.scale.set(i*(130/d.width)),d.x=-d.width/2,d.y=-d.height;var y=h.height;this.rollSize={width:d.width,height:d.height};for(var v=0;v<2;v++){var x=h.addChild(new PIXI.Sprite(a.et0_4_1));x.anchor.set(.5,0),x.x=14*(v%2==0?1:-1),x.y=-4}h.y=-(h.height-y);this.on("start",(function(){var t,i;n.visible=!0,n.task.clear(),i=0,o.task.on("startAnim",(function(e){t=(1-i)*(5.8*i*(1-i)+i*i)+i*(.01*(1-i)+i),r.scale.set(t),i<1?i=Math.min(1,i+.0625*e.delta):o.task.clear("startAnim")})),function(){var t=0,e=0;o.task.on("rollAnime",(function(i){if(t>=3){for(var n=0;n<c.length;n++)c[n].texture=a["et0_"+(3-e)];++e>=3&&(e=0),t=0}else t+=i.delta}))}(),function(){var t=0;o.task.on("dustEffectMain",(function(i){if(t>=1){for(var n=o.rollSize.width,a=0;a<5;a++){var r=s.addChild(new p(e));r.x=-n/2+n*Math.random(),r.y=10*Math.random()-32,r.tint=0}t=0}else t+=i.delta}))}()})),this.on("end",(function(){var t,e;e=1,o.task.clear("dustEffectMain"),o.task.clear("startAnim"),o.task.on("startAnim",(function(i){t=3.2*e*(1-e)+e*e,r.scale.set(t),e>0?e=Math.max(0,e-.0625*i.delta):(o.visible=!1,o.task.clear())}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),m=function(t){function e(e){var i=this;t.call(this);for(var n,a=e.resources.spritesheets.items,o=this.addChild(new Pixim.Container),r=o.addChild(new Pixim.Container),s=[],h=0;h<2;h++){var c=r.addChild(new Pixim.Container);(n=c.addChild(new PIXI.Sprite(a.et3_2))).y=-2,n.x=-8,(n=c.addChild(new PIXI.Sprite(a.et3_3))).anchor.set(.5),n.scale.set(.55),(n=c.addChild(new PIXI.Sprite(a.et3_3))).anchor.set(.5),n.y=48,n.x=-16,(n=c.addChild(new PIXI.Sprite(a.et3_3))).anchor.set(.5),n.scale.set(.55),n.y=97,s.push(c)}s[0].x=-44,s[1].x=44,s[1].scale.x=-1;var d=o.addChild(new PIXI.Sprite(a.et3_0));d.x=-64;var l=o.addChild(new PIXI.Sprite(a.et3_1));l.x=-l.width/2,this.visible=!1,this.on("main",(function(){i.task.on("main",(function(t){for(var e=0;e<s.length;e++)for(var i=1;i<s[e].children.length;i++)s[e].children[i].rotation+=t.delta}))})),this.on("open",(function(){var t,e=0;i.task.on("open",(function(n){t=3*e*(1-e)+e*e,r.scale.set(t),d.y=-68*t,l.y=104*t,e<1?e=Math.min(1,e+.1*n.delta):i.task.clear("open")}))})),this.on("close",(function(){var t,e=1;i.task.clear("open"),i.task.on("close",(function(n){t=3*e*(1-e)+e*e,r.scale.set(t),d.y=-68*t,l.y=104*t,e>0?e=Math.max(0,e-.1*n.delta):(i.visible=!1,i.task.clear())}))})),this.on("start",(function(){i.visible=!0,i.task.clear(),i.emit("main"),i.emit("open")})),this.on("end",(function(){i.emit("close")}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),f=function(t){function e(e){t.call(this);var i=e.resources.spritesheets.items,n=this.addChild(new Pixim.Container),a=this.addChild(new Pixim.Container),o=this,r=a.addChild(new PIXI.Sprite(i.et1_0_0)),s=a.addChild(new PIXI.Sprite(i.et1_1_0)),h=a.addChild(new PIXI.Sprite(i.et1_2_0));r.anchor.set(.5),s.anchor.set(.5),h.anchor.set(.5,1),h.scale.set(.6),h.y=-44,h.visible=!1,this.visible=!1;var c=function(t,e){var n=0,a="animA",s=[i.et1_0_1,i.et1_0_2,i.et1_0_3,i.et1_0_2];o.task.clear(a),o.task.on(a,(function(h){r.texture=s[parseInt(4*n)],(n=Math.min(1,n+.1*h.delta))>=1&&(r.texture=i.et1_0_0,o.task.clear(a),(t||e<1)&&c(t,++e))}))},d=function(t,e){var n=0,a="animB";o.task.clear(a),o.task.on(a,(function(r){s.texture=i["et1_1_"+parseInt(2*n)],(n=Math.min(1,n+.1*r.delta))>=1&&(s.texture=i.et1_1_0,o.task.clear(a),(t||e<1)&&d(t,++e))}))},l=function(t,a){var r=0,s="animC";o.task.clear(s),h.visible=!0;var c=n.addChild(new y(e,16777215,.7));c.y=-60,c.once("destroy",(function(){c.parent.removeChild(c),c=null})),o.task.on(s,(function(e){h.texture=i["et1_2_"+parseInt(3*r)],(r=Math.min(1,r+.1*e.delta))>=1&&(h.texture=i.et1_2_0,o.task.clear(s),t?l(t):h.visible=!1)}))},p=function(t){var e,n=0,a="beginAnim";r.texture=i.et1_0_0,s.texture=i.et1_1_0,h.texture=i.et1_2_0,o.visible=!0,o.task.clear(),o.task.on(a,(function(i){e=4*n*(1-n)+n*n,o.scale.set(1.4-.4*e),n<1?n=Math.min(1,n+.25*i.delta):(o.task.clear(a),function(t){var e=t<10;e&&(c(!0,0),d(!0,0),l(!0));var i=t;o.task.on("animMain",(function(n){i>=t?(o.emit("shoot"),e||(c(!1,0),d(!1,0),l(!1)),i=0):i+=n.delta}))}(t))}))};this.on("start",(function(t){p(t)})),this.on("end",(function(){var t,e;e=1,o.task.clear("beginAnim"),o.task.on("endAnim",(function(i){t=4*e*(1-e)+e*e,o.scale.set(1-1*(1-t)),e>0?e=Math.max(0,e-.25*i.delta):(o.task.clear(),o.visible=!1)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),y=function(t){function e(e,i,n){var a=this;t.call(this);for(var o=0;o<3;o++){var r=this.addChild(new PIXI.Sprite(e.resources.spritesheets.gra.g_circle));r.anchor.set(.5),r.scale.set((64+10*o)/r.width),r.tint=16777215}var s,h=0;this.alpha=0,this.task.on("main_s",(function(t){s=1-Math.pow(1-h,2),a.scale.set((.8+.2*s)*n),a.alpha=.4*(1-h),h<1?h=Math.min(1,h+.125*t.delta):(a.task.clear(),a.emit("destroy"))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),v=function(t){function e(e,i,n){var a=this;t.call(this);var o=e.resources.spritesheets.items,r=this,s=this.addChild(new Pixim.Container),h=s.addChild(new PIXI.Sprite(o["name"+i]));h.anchor.x=.5;var c=s.addChild(new Pixim.Container);c.visible=!1;var d=1;this.on("changeName",(function(t){h.texture=o["name"+t]})),this.on("setGaugeRatio",(function(t){d=t}));this.once("enter",(function(t){var e,i=1/(1===t?10:300),n=0;a.task.on("enter",(function(o){e=1-Math.pow(1-n,2),s.scale.set(e),s.y=68*e,n<1?n=Math.min(1,n+i*o.delta):(a.task.clear("enter"),1===t&&function(t,e,i){var n=0;r.task.clear(t),r.task.on(t,(function(a){n>=e&&(r.task.clear(t),i()),n+=a.delta}))}("waitForupMotion",20,(function(){a.emit("exit")})))}))})),this.once("exit",(function(){var t,e=0;a.task.on("exit",(function(i){t=(1-e)*Math.pow(e,2)+e*(1-Math.pow(1-e,2)),s.scale.set(1+.7*t),s.y=68-500*t,e<1?e=Math.min(1,e+.0625*i.delta):(a.task.clear("exit"),a.emit("finishTimerAnimation"))}))})),this.once("main",(function(){var t=0;a.task.on("main",(function(e){if(c.scale.x+=(d-c.scale.x)*(.1*e.delta),parseInt(.5*t)%2==0){var i=2*Math.PI*Math.random();h.x=1.2*Math.cos(i),h.y=1.2*Math.sin(i)}parseInt(.3*t)%2==0?h.tint=14548957:h.tint=16777215,t+=e.delta,n&&t>=80&&(a.task.clear(),a.emit("destroy"))}))})),this.emit("main"),this.emit("enter",n?0:1)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),x=function(t){function e(e,i){var n=this;t.call(this);var a=e.resources.spritesheets.effects,o=this.addChild(new Pixim.Container).addChild(new PIXI.Sprite(a.et2));o.anchor.set(.5),o.alpha=0;var r,s=0;this.task.on("begin",(function(t){r=1-Math.pow(1-s,2),o.scale.set(.3*(2+i*r)),o.alpha=1-s,s<1?s=Math.min(1,s+.05555555555555555*t.delta):(n.task.clear(),n.emit("destroy"))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),w=function(t){function e(e,i){var n=this;t.call(this);var a=e.resources.spritesheets.effects,o=.005*(3.2+2.1*Math.random()),r=this.addChild(new PIXI.Sprite(a.et7));r.tint=1===i?0:16746496,r.anchor.set(.5),r.rotation=2*Math.PI*Math.random(),r.scale.set(o),r.alpha=0;var s,h=0,c=2*Math.PI*Math.random(),d=20+62*Math.random(),l=Math.cos(c),p=Math.sin(c),u=Math.random()<.5?1:-1;this.task.on("main",(function(t){s=1-Math.pow(1-h,2),r.x=10+d*s*l,r.y=10+d*s*p,r.alpha=1-h,r.scale.set(o+1.1*s),r.rotation+=.01*t.delta*u,h<1?h=Math.min(1,h+.041666666666666664*t.delta):(n.task.clear(),n.emit("destroy"))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container);Pixim.Container;var C=function(t,e){for(var i=0,n=0;n<t.length;n++)i+=t[n][e];for(var a=Math.random(),o=0,r=0;r<t.length;r++){var s=t[r][e]/i;if(o<a&&o+s>=a)return r;o+=s}return 0},g=function(t,e,i){return(1-i)*t+i*e},_=function(t,e,i){var n;for(n=0;n<4;n++)if(1==b(t[n],e,i))return 1;var a=k(t[0],t[1],e),o=k(t[2],t[3],e);if(0<=a&&a<=Math.PI/2&&0<=o&&o<=Math.PI/2)return 1;for(n=0;n<4;n++)if(P(e.x,e.y,t[n].x,t[n].y,t[(n+1)%4].x,t[(n+1)%4].y)<i)return 1;return 0},I=function(t,e){return{x:e.x-t.x,y:e.y-t.y}},P=function(t,e,i,n,a,o){var r,s,h,c,d;return(h=-((r=a-i)*(i-t)+(s=o-n)*(n-e))/(r*r+s*s))<0&&(h=0),h>1&&(h=1),(t-(c=i+r*h))*(t-c)+(e-(d=n+s*h))*(e-d)},b=function(t,e,i){var n=t.x-e.x,a=t.y-e.y;return n*n+a*a<i?1:0},k=function(t,e,i){var n,a,o,r,s,h,c={x:0,y:0},d={x:0,y:0},l={x:0,y:0};return c.x=t.x,c.y=t.y,d.x=e.x,d.y=e.y,l.x=i.x,l.y=i.y,n=I(d,c),a=I(l,c),h=a,o=(s=n).x*h.y-s.y*h.x,r=function(t,e){return t.x*e.x+t.y*e.y}(n,a),Math.atan2(o,r)},M=function(t,e){this._objects={},this._targetContainer=t,this._clip=e};M.prototype.forObjectList=function(t,e){for(var i=this._objects[t].list.length-1;i>=0;i--){var n=this._objects[t].list[i].container;n.visible&&e(n)}},M.prototype.addNewTypeObjectList=function(t,e){var i=this._targetContainer.addChild(new Pixim.Container);i.z=e,i.isNest=!0,this._objects[t]={target:i,list:[]}},M.prototype.addObject=function(t,e,i){if(this._objects[t]){var n=this._objects[t].list.length;e.dx=e.dy=0,e._fpos={x:0,y:0},e._counter=0,e._isCollusionToPlayer=!1,e._isClipping=void 0!==i&&i,e._isCollusionToArea=!0,e._fvisible=!0,e._isInvisibleTaskStop=!0,e._collusionRange=5,e._collusionData=[],e._collusionData.push({range:8,x:0,y:0}),e.x=e.y=9999,e.emit("defineMembers"),this._objects[t].target.addChild(e),this._objects[t].list.push({container:e,isDelete:!1});var a=this._objects[t].list[n];return e.once("spliceObject",(function(){a.isDelete=!0})),e}},M.prototype.upDateObjects=function(t){var e={tcos:Math.cos(t.rotate+Math.PI/2),tsin:Math.sin(t.rotate+Math.PI/2),scos:Math.cos(t.rotate),ssin:Math.sin(t.rotate)};for(var i in this._objects)for(var n=this._objects[i].list.length-1;n>=0;n--){var a=this._objects[i].list[n];this._upDateObjects(a.container,t,e),a.isDelete&&(a.container.task.clear(),this._objects[i].target.removeChild(a.container),this._objects[i].list.splice(n,1))}},M.prototype._upDateObjects=function(t,e,i){t._fvisible!=t.visible&&t.emit("changedVisible",t.visible),!t._fvisible&&t.visible&&t.emit("inSide",t.visible),t._fvisible=t.visible,t._isInvisibleTaskStop&&(t.visible?t.taskEnabledChildren||(t.taskEnabledChildren=t.taskEnabled=!0):t.taskEnabledChildren&&(t.taskEnabledChildren=t.taskEnabled=!1));var n=t.dx,a=t.dy;if(t.x=t.dx-e.moveX,t.y=t.dy-e.moveY,t._counter<=0&&(t._fpos.x=t.x,t._fpos.y=t.y),(t.visible||!t._isInvisibleTaskStop)&&(t.emit("upDate",{delta:e.delta,move:{x:e.moveX,y:e.moveY},playerPos:{x:e.viewCenterX,y:e.viewCenterY},playerRotation:e.rotate,playerData:e.player}),t._isCollusionToPlayer)){for(var o=!1,r=e.player.getCollusionData(),s=0,h=0;h<r.length;h++){var c=r[h];if(c.isCollusion){s++;for(var d={x:e.player.x+c.distance*i.scos,y:e.player.y+c.distance*i.ssin},l={x:e.player.x+c.height*i.scos,y:e.player.y+c.height*i.ssin},p=[{x:d.x-c.width*i.tcos,y:d.y-c.width*i.tsin},{x:d.x+c.width*i.tcos,y:d.y+c.width*i.tsin},{x:l.x+c.width*i.tcos,y:l.y+c.width*i.tsin},{x:l.x-c.width*i.tcos,y:l.y-c.width*i.tsin}],u=0;u<t._collusionData.length;u++){var m=t._collusionData[u];if(_(p,{x:t.x+m.x,y:t.y+m.y},Math.pow(m.range,2))){o=!0;break}}if(o)break}}if(o){var f=Math.pow(t.x-e.player.x,2)+Math.pow(t.y-e.player.y,2);t.emit("collusionToPlayer",{type:1===s?0:2,len:Math.sqrt(f),rot:Math.atan2(t.y-e.player.y,t.x-e.player.x),prot:e.rotate})}else for(var y=0;y<t._collusionData.length;y++){var v=t._collusionData[y],x=Math.pow(t.x+v.x-e.player.x,2)+Math.pow(t.y+v.y-e.player.y,2),w=e.player.getInvincibleRange()>1,C=w?e.player.getInvincibleRange():e.player.getLostRange();if(x<=Math.pow(C+v.range,2)){t.emit("collusionToPlayer",{type:w?2:1,len:Math.sqrt(x),rot:Math.atan2(t.y-e.player.y,t.x-e.player.x),prot:e.rotate});break}}}if(t._fpos.x=t.x,t._fpos.y=t.y,t.visible&&t._isCollusionToArea){(t.dx<this._clip.min.x||t.dx>this._clip.max.x)&&(t.dx=n,t.emit("objectHit",{delta:e.delta}),t.x=t.dx-e.moveX),(t.dy<this._clip.min.x||t.dy>this._clip.max.y)&&(t.dy=a,t.emit("objectHit",{delta:e.delta}),t.y=t.dy-e.moveY);for(var g=0;g<e.fieldMapping.length;g++){var I=e.fieldMapping[g],P=32;I.x-P<=t.dx&&t.dx<=I.x+P+I.size.width&&I.y-P<=t.dy&&t.dy<=I.y+P+I.size.height&&(I.y-P<=a&&a<=I.y+P+I.size.height?t.dx=n:t.dy=a,t.emit("objectHit",{delta:e.delta}),t.x=t.dx-e.moveX,t.y=t.dy-e.moveY)}t._counter++}};var S=function(t){function e(e){var i=this;t.call(this);var n=this,a=e.resources.spritesheets.gameui,o=this.addChild(new Pixim.Container);o.visible=!1;var r=o.addChild(new PIXI.Sprite(a.lrb)),s=o.addChild(new PIXI.Sprite(a.lrb));s.scale.x=-1,s.x=s.width,r.x=e.width-r.width,s.alpha=r.alpha=0;var h=o.addChild(new PIXI.Sprite(a.left)),c=o.addChild(new PIXI.Sprite(a.right));h.alpha=c.alpha=.3,h.x=16,c.x=e.width-c.width-16,h.y=c.y=280;var d=o.addChild(new PIXI.Sprite(a.yubi));d.anchor.set(1,0),d.x=120,d.y=490,d.rotation=.7,d.alpha=0;var l=o.addChild(new PIXI.Sprite(a.yubi));l.anchor.set(1,0),l.x=e.width-120,l.y=d.y,l.rotation=-.7,l.scale.x=-1,l.alpha=0;var p=this.addChild(new O(e));p.x=e.width/2,p.y=500;var u=function(t){var e,i,a=0,o=t?[r,c]:[s,h];n.task.on("main",(function(r){e=1-Math.pow(1-a,2),o[0].alpha=.5*e,o[1].alpha=.3+.7*e,i=3-2*e,t?(l.alpha=a,l.scale.x=-i,l.scale.y=i):(d.alpha=a,d.scale.set(i)),a<1?a=Math.min(1,a+.05*r.delta):(n.task.clear("main"),m(t))}))},m=function(t){var e,i=0,a=t?r:s;n.task.on("main",(function(o){e=(Math.cos(2*Math.PI*i)+1)/2,a.alpha=.5*(.8+.2*e),i<1?i=Math.min(1,i+.03333333333333333*o.delta):(n.task.clear("main"),f(t))}))},f=function(t){var e,i,a,o=0,p=t?[r,c]:[s,h];n.task.on("main",(function(r){i=Math.min(1,1.5*o),e=(1-i)*Math.pow(i,2)+i*(1-Math.pow(1-i,2)),p[0].alpha=1*(1-e)*.5,p[1].alpha=1-.7*e,a=3-2*(1-e),t?(l.alpha=1-o,l.scale.x=-a,l.scale.y=a):(d.alpha=1-o,d.scale.set(a)),o<1?o=Math.min(1,o+.03333333333333333*r.delta):(n.task.clear("main"),t&&u(!1))}))},y=0;this.task.on("begin",(function(t){o.alpha=y,y<1?y=Math.min(y+.1*t.delta,1):(u(!0),i.task.clear("begin"))})),this.once("end",(function(){var t=0;i.task.on("begin",(function(e){o.alpha=1-t,t<1?t=Math.min(t+.1*e.delta,1):(i.emit("destroy"),i.task.clear())}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),X=function(t){function e(e){var i=this;t.call(this);var n=e.resources.spritesheets.gameui,a=this.addChild(new Pixim.Container),o=a.addChild(new Pixim.Container),r=o.addChild(new Pixim.Container),s=a.addChild(new Pixim.Container),h=s.addChild(new PIXI.Sprite(n.left)),c=s.addChild(new PIXI.Sprite(n.right)),d=s.addChild(new Pixim.Container),l=d.addChild(new PIXI.Sprite(n.breakfree)),p=a.addChild(new D(e));p.x=e.width/2,p.y=210,p.visible=!1,s.visible=!1,h.visible=c.visible=!1;var u=r.addChild(new PIXI.Sprite(n.lrb)),m=r.addChild(new PIXI.Sprite(n.lrb)),f=r.addChild(new PIXI.Sprite(n.lrb)),y=r.addChild(new PIXI.Sprite(n.lrb));f.rotation=Math.PI/2,f.x=f.height/2,f.y=e.height-f.width,y.rotation=-Math.PI/2,y.x=-y.height/2,y.y=y.width,m.scale.x=-1,o.x=e.width/2,o.y=e.height/2,u.tint=m.tint=f.tint=y.tint=16711680,r.y=-r.height/2,h.x=16,c.x=e.width-c.width-16,d.x=e.width/2-d.width/2,h.y=c.y=-h.height/2+200,d.y=-d.height/2+100;var v=0,x=0;this.on("holdWarning",(function(t){v=t>0?.2+.7*Math.min(1,t/10):0,s.visible?t<1&&(s.visible=p.visible=!1):t>=1&&(s.visible=p.visible=!0),i.visible?t<=0&&(i.visible=!1):t>0&&(i.visible=!0)}));var w,C=0,g=0,_=0;this.task.on("main",(function(t){if(w=(Math.cos(g)+1)/2,o.scale.set(1+.2*w),o.alpha=(1-.6*w)*x,g+=.065*t.delta,x+=(v-x)*(.06*t.delta),C>=3){var e=Math.random();l.x=1.2*Math.cos(2*Math.PI*e),l.y=1.2*Math.sin(2*Math.PI*e)}C+=t.delta,l.tint=parseInt(_)%2==0?11184810:16777215,_+=.34*t.delta,h.alpha=.2+.4*w,c.alpha=.2+.4*(1-w),.2*t.delta}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),D=function(t){function e(e){t.call(this);var i=this,n=e.resources.spritesheets.gameui,a=this.addChild(new Pixim.Container);a.alpha=.8,a.addChild(new PIXI.Sprite(n.freeicon00)).anchor.set(.5);for(var o=[],r=0;r<3;r++){var s=Math.PI*(r/2),h=Math.cos(s),c=Math.sin(s),d=a.addChild(new PIXI.Sprite(n.freeicon01));d.anchor.set(.5),d.x=18*h,d.y=8+24*c,d.rotation=s-Math.PI/2+.4*h,o.push({obj:d,ix:d.x,iy:d.y,cos:h,sin:c,rot:d.rotation})}var l=function(){var t,e,n=0,r=0;i.task.on("main",(function(s){if(t=Math.cos(2*Math.PI*n),a.rotation=.6*t,n>=.6){r=(n-.6)/.4,e=1-Math.pow(1-r,2);for(var h=0;h<o.length;h++){var c=o[h];c.obj.x=c.ix+32*c.cos*e,c.obj.y=c.iy+32*c.sin*e,c.obj.rotation=c.rot+4*Math.PI*e}}if(n<1)n=Math.min(1,n+.011111111111111112*s.delta);else{for(var d=0;d<o.length;d++){var p=o[d];p.obj.x=p.ix,p.obj.y=p.iy,p.obj.rotation=p.rot}i.task.clear(),l()}}))};l()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container);Pixim.Container;var j=function(t){function e(e){t.call(this);var i=e.resources.spritesheets.gameui,n=this.addChild(new PIXI.Sprite(i.touch_002));n.anchor.set(.5);var a=this.addChild(new PIXI.Sprite(i.touch_001)),o=n.width/2;a.anchor.set(.5),a.scale.set(1),this.on("setrotate",(function(t){a.x=o*t.cos,a.y=o*t.sin}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),O=function(t){function e(e){var i=this;t.call(this);var n=e.resources.spritesheets.gameui,a=this.addChild(new PIXI.Container),o=this.addChild(new PIXI.Container);a.addChild(new PIXI.Sprite(n.oo)).anchor.set(.5);var r=o.addChild(new PIXI.Sprite(n.yubi2));r.anchor.set(6/r.width,0),r.rotation=-.46,o.alpha=0;var s,h=function(){var t=0,n=0;i.task.on("main",(function(i){r.x=70*Math.cos(Math.PI*t),r.y=30*Math.sin(2*Math.PI*t);var s=a.addChild(new A(e));s.x=r.x,s.y=r.y,s.once("delete",(function(){a.removeChild(s),s=null})),o.alpha=n,n<1&&(n=Math.min(1,n+.04*i.delta)),t+=.02*i.delta}))};s=0,i.task.on("main",(function(t){(s+=t.delta)>=20&&(i.task.clear("main"),h())}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),A=function(t){function e(e){var i=this;t.call(this);var n=this.addChild(new PIXI.Sprite(e.resources.spritesheets.gra.g_circle));n.anchor.set(.5),n.scale.set(20/n.width),n.tint=16777215,n.alpha=1;var a;a=.24,i.task.on("main",(function(t){i.alpha=a,a>0?a=Math.max(0,a-.014*t.delta):(i.task.clear("main"),i.emit("delete"))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),T=function(t){function e(e,i,n){var a=this;t.call(this);var o=e.resources.spritesheets.effects,r=[[o.et0,o.et2],[o.et1,o.et3]],s=this,h=this.addChild(new PIXI.Sprite(r[n][0]));h.anchor.set(.5),h.scale.set(.8);var c=this.addChild(new PIXI.Sprite(r[n][1]));c.anchor.set(.5),c.scale.set(.54),this.once("changedVisible",(function(t){a.emit("destroy")})),this.alpha=.5;var d,l=0,p=0;this.task.on("task1",(function(t){if(d=1-Math.pow(1-p,2),a.scale.set(d*i),p<1)p=Math.min(1,p+.125*t.delta);else{var o=a.addChild(new F(e,n));o.x=0,o.y=0,o.once("destroy",(function(){s.removeChild(o)}));for(var r=function(t){var i=74*Math.random(),o=a.addChild(new E(e,{x:0,y:0,angle:2*Math.PI*(t/64),distance:i,t:1/(2+4*Math.random()),scale:.26*(3+7*(1-i/60)),type:n}));o.once("destroy",(function(){s.removeChild(o)}))},u=0;u<60;u++)r(u);h.visible=c.visible=!1,a.task.clear("task1"),a.task.on("counter",(function(t){if(l>=64)return a.task.clear(),a.removeChildren(),void a.emit("destroy");l+=t.delta}))}}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),z=function(t){function e(e){var i=this;t.call(this);var n=e.resources.spritesheets.effects,a=this,o=this.addChild(new PIXI.Sprite(n.et9));o.anchor.set(.5),o.alpha=0;var r=this.addChild(new PIXI.Sprite(n.et8));r.anchor.set(.5),r.alpha=0,this.once("changedVisible",(function(t){i.emit("destroy")})),this.alpha=.5;for(var s=function(t){var n=56*Math.random(),o=i.addChild(new E(e,{x:0,y:0,angle:2*Math.PI*(t/24),distance:n,t:1/(2+2.8*Math.random()),scale:.09*(3+7*(1-n/60)),type:2}));o.once("destroy",(function(){a.removeChild(o)}))},h=0;h<24;h++)s(h);var c,d,l=function(){var t=0;a.task.on("mainTask",(function(e){if((t+=e.delta)>=20)return a.task.clear(),a.removeChildren(),void a.emit("destroy")}))};d=0,a.task.on("mainTask",(function(t){c=1-Math.pow(1-d,2),o.alpha=r.alpha=1-d,o.scale.set(.8*c),r.scale.set(c),d<1?d=Math.min(1,d+.1*t.delta):l()}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),E=function(t){function e(e,i){var n=this;t.call(this);var a=e.resources.spritesheets.effects,o=this.addChild(new PIXI.Sprite(a.et7));o.anchor.set(.5);var r,s=0;o.tint=[[16704326,13882295],[13230080,8298787],[16777215,16777215]][i.type][Math.random()<=.5?0:1],this.alpha=0,this.task.on("main",(function(t){if(n.alpha=1,s+=(1-s)*i.t*t.delta,r=0+i.distance*s,n.x=i.x+r*Math.cos(i.angle),n.y=i.y+r*Math.sin(i.angle),o.rotation=.06*(n.x+n.y),n.scale.set(.5*(.02+i.scale*(1-s))),s>=.99)return n.task.clear(),n.removeChildren(),void n.emit("destroy")}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),F=function(t){function e(e,i){var n=this;t.call(this);var a=e.resources.spritesheets.effects,o=[[a.et0,a.et2],[a.et1,a.et3],[a.et1,a.et3]],r=this.addChild(new PIXI.Sprite(o[i][0]));r.anchor.set(.5),r.scale.set(1.8);var s=this.addChild(new PIXI.Sprite(a.et4));s.anchor.set(.5);var h,c=0;this.alpha=0,this.task.on("task1",(function(t){if(n.alpha=1,h=1-Math.pow(1-c,2),s.scale.set(.4+.4*h),r.scale.set(1.2-.3*h),n.alpha=1-c,!(c<1))return n.task.clear(),n.removeChildren(),void n.emit("destroy");c=Math.min(1,c+.03571428571428571*t.delta)}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),R=function(t){function e(e,i,n,a){t.call(this);var o=this,r=Math.PI/2,s=0,h=0,c=0,d=0==a?0:15,l={normal:L,blackman:B,debu:W,phoenix:Y,speed:G,shooter:H,enep:N,sp0:U},p=[{norma:1,enm:[{enm:"normal",pro:.9},{enm:"speed",pro:.1},{enm:"blackman",pro:0},{enm:"debu",pro:0},{enm:"enep",pro:0},{enm:"shooter",pro:0},{enm:"phoenix",pro:0},{enm:"sp0",pro:0}]},{norma:50,enm:[{enm:"normal",pro:.86},{enm:"speed",pro:.09},{enm:"blackman",pro:.01},{enm:"debu",pro:.01},{enm:"enep",pro:.01},{enm:"shooter",pro:.01},{enm:"phoenix",pro:.01},{enm:"sp0",pro:0}]},{norma:100,enm:[{enm:"normal",pro:.73},{enm:"speed",pro:.15},{enm:"blackman",pro:.08},{enm:"debu",pro:.01},{enm:"enep",pro:.01},{enm:"shooter",pro:.01},{enm:"phoenix",pro:.01},{enm:"sp0",pro:0}]},{norma:150,enm:[{enm:"normal",pro:.58},{enm:"speed",pro:.19},{enm:"blackman",pro:.13},{enm:"debu",pro:.07},{enm:"enep",pro:.01},{enm:"shooter",pro:.01},{enm:"phoenix",pro:.01},{enm:"sp0",pro:0}]},{norma:200,enm:[{enm:"normal",pro:.48},{enm:"speed",pro:.2},{enm:"blackman",pro:.15},{enm:"debu",pro:.1},{enm:"enep",pro:.05},{enm:"shooter",pro:.01},{enm:"phoenix",pro:.01},{enm:"sp0",pro:0}]},{norma:250,enm:[{enm:"normal",pro:.39},{enm:"speed",pro:.2},{enm:"blackman",pro:.16},{enm:"debu",pro:.12},{enm:"enep",pro:.08},{enm:"shooter",pro:.04},{enm:"phoenix",pro:.01},{enm:"sp0",pro:0}]},{norma:300,enm:[{enm:"normal",pro:.29},{enm:"speed",pro:.2},{enm:"blackman",pro:.17},{enm:"debu",pro:.13},{enm:"enep",pro:.1},{enm:"shooter",pro:.07},{enm:"phoenix",pro:.04},{enm:"sp0",pro:0}]},{norma:350,enm:[{enm:"normal",pro:.24},{enm:"speed",pro:.19},{enm:"blackman",pro:.17},{enm:"debu",pro:.14},{enm:"enep",pro:.11},{enm:"shooter",pro:.09},{enm:"phoenix",pro:.06},{enm:"sp0",pro:0}]},{norma:400,enm:[{enm:"normal",pro:.21},{enm:"speed",pro:.19},{enm:"blackman",pro:.17},{enm:"debu",pro:.14},{enm:"enep",pro:.12},{enm:"shooter",pro:.1},{enm:"phoenix",pro:.07},{enm:"sp0",pro:0}]},{norma:450,enm:[{enm:"normal",pro:.16},{enm:"speed",pro:.19},{enm:"blackman",pro:.17},{enm:"debu",pro:.15},{enm:"enep",pro:.13},{enm:"shooter",pro:.11},{enm:"phoenix",pro:.09},{enm:"sp0",pro:0}]},{norma:500,enm:[{enm:"normal",pro:.15},{enm:"speed",pro:.19},{enm:"blackman",pro:.17},{enm:"debu",pro:.15},{enm:"enep",pro:.13},{enm:"shooter",pro:.11},{enm:"phoenix",pro:.1},{enm:"sp0",pro:.01}]},{norma:550,enm:[{enm:"normal",pro:.15},{enm:"speed",pro:.17},{enm:"blackman",pro:.17},{enm:"debu",pro:.15},{enm:"enep",pro:.14},{enm:"shooter",pro:.12},{enm:"phoenix",pro:.1},{enm:"sp0",pro:.01}]},{norma:600,enm:[{enm:"normal",pro:.13},{enm:"speed",pro:.16},{enm:"blackman",pro:.16},{enm:"debu",pro:.16},{enm:"enep",pro:.15},{enm:"shooter",pro:.13},{enm:"phoenix",pro:.11},{enm:"sp0",pro:.01}]},{norma:650,enm:[{enm:"normal",pro:.14},{enm:"speed",pro:.15},{enm:"blackman",pro:.15},{enm:"debu",pro:.15},{enm:"enep",pro:.15},{enm:"shooter",pro:.14},{enm:"phoenix",pro:.12},{enm:"sp0",pro:.01}]},{norma:700,enm:[{enm:"normal",pro:.11},{enm:"speed",pro:.15},{enm:"blackman",pro:.15},{enm:"debu",pro:.15},{enm:"enep",pro:.15},{enm:"shooter",pro:.15},{enm:"phoenix",pro:.14},{enm:"sp0",pro:.01}]},{norma:750,enm:[{enm:"normal",pro:.1},{enm:"speed",pro:.15},{enm:"blackman",pro:.15},{enm:"debu",pro:.15},{enm:"enep",pro:.15},{enm:"shooter",pro:.15},{enm:"phoenix",pro:.15},{enm:"sp0",pro:.01}]},{norma:800,enm:[{enm:"normal",pro:.08},{enm:"speed",pro:.13},{enm:"blackman",pro:.15},{enm:"debu",pro:.16},{enm:"enep",pro:.16},{enm:"shooter",pro:.16},{enm:"phoenix",pro:.16},{enm:"sp0",pro:.01}]},{norma:850,enm:[{enm:"normal",pro:.06},{enm:"speed",pro:.12},{enm:"blackman",pro:.14},{enm:"debu",pro:.17},{enm:"enep",pro:.17},{enm:"shooter",pro:.17},{enm:"phoenix",pro:.17},{enm:"sp0",pro:.01}]},{norma:900,enm:[{enm:"normal",pro:.04},{enm:"speed",pro:.11},{enm:"blackman",pro:.13},{enm:"debu",pro:.18},{enm:"enep",pro:.18},{enm:"shooter",pro:.18},{enm:"phoenix",pro:.18},{enm:"sp0",pro:.01}]},{norma:950,enm:[{enm:"normal",pro:.03},{enm:"speed",pro:.1},{enm:"blackman",pro:.11},{enm:"debu",pro:.19},{enm:"enep",pro:.19},{enm:"shooter",pro:.19},{enm:"phoenix",pro:.19},{enm:"sp0",pro:.01}]},{norma:1e3,enm:[{enm:"normal",pro:.02},{enm:"speed",pro:.08},{enm:"blackman",pro:.1},{enm:"debu",pro:.2},{enm:"enep",pro:.2},{enm:"shooter",pro:.2},{enm:"phoenix",pro:.2},{enm:"sp0",pro:.01}]},{norma:1050,enm:[{enm:"normal",pro:.02},{enm:"speed",pro:.05},{enm:"blackman",pro:.05},{enm:"debu",pro:.22},{enm:"enep",pro:.22},{enm:"shooter",pro:.22},{enm:"phoenix",pro:.22},{enm:"sp0",pro:.01}]}];this.on("vanishEnemy",(function(t){i.forObjectList("enemys",(function(e){Math.pow(e.dx-t.x,2)+Math.pow(e.dy-t.y,2)<=t.range&&e.emit("enemyDestroy",{isMachingunHit:!0})}))})),this.on("createEnemy",(function(t){for(var e=0;e<t.count;e++)u(t.coordFunc,t.isInit,t.isSetLoop,t.enmType)}));var u=function(t,a,m,f){s>p[d].norma&&(d=Math.min(p.length-1,d+1));var y=C(p[d].enm,"pro"),v=new l[null===f?p[d].enm[y].enm:f](e),x=t(0,a);v._getScore=10,v._endureCount=0,v._bombEndureCount=1,v._endureSpeedSubLate=.5,v._hormingRange=Math.pow(250,2),v._holdRange=Math.pow(42,2),v._isEnableRub=!1,v._isMachingunHit=!0,v._getCoinType=0,v._getCoinCount=1,i.addObject("enemys",v),v._isCollusionToPlayer=!0,v.dx=x.x,v.dy=x.y;var w=Math.PI,g=!1,_=!1,I={len:0,rot:0,prot:0},P=0,b=0,k=0,M=0,S={x:0,y:0,cos:0,sin:0,xt:0},X=0,D=[function(t){var e=Math.pow(t.playerPos.x-v.x,2)+Math.pow(t.playerPos.y-v.y,2);v.moveUpdate({distance:e,isHorming:e<=v._hormingRange,delta:t.delta,playerPos:t.playerPos})},function(t){var e=t.playerRotation-I.prot,i=I.rot+e;v.dx=t.move.x+t.playerPos.x+I.len*Math.cos(i),v.dy=t.move.y+t.playerPos.y+I.len*Math.sin(i),v._Enemyanm.rotation=i-r,g?(k+=Math.abs(t.playerRotation-M),M=t.playerRotation,k>=w&&(h=Math.max(0,h-1),o.emit("enemyHoldcountUpdate",h),S.cos=Math.cos(i),S.sin=Math.sin(i),S.x=t.move.x+t.playerPos.x+I.len*S.cos,S.y=t.move.y+t.playerPos.y+I.len*S.sin,S.xt=0,X=v._Enemyanm.rotation,P=2,v._isEnableRub=!1)):(b+=t.delta)>=v._endureCount&&(o.emit("stepOn"),v.emit("enemyDestroy",{isMachingunHit:!1}))},function(t){var e=1-Math.pow(1-S.xt,2),i=70*e;v.dx=S.x+i*S.cos,v.dy=S.y+i*S.sin,v._Enemyanm.rotation=X+2*Math.PI*e,S.xt<1?S.xt=Math.min(1,S.xt+.02*t.delta):(v.moveInit(),v._Enemyanm.emit("motionA"),P=0,g=!1)}];v.on("upDate",(function(t){D[P](t)})),v.on("penaltySlow",(function(t){o.emit("penaltySlow",t)})),v.on("hitMachingun",(function(t){if(!g&&!_){var n=i.addObject("shoots",new Q(e));n.dx=v.dx,n.dy=v.dy,n.rotation=t-r,n.scale.set(.5),n.once("destroy",(function(){n.emit("spliceObject")})),v._isMachingunHit&&v.emit("enemyDestroy",{isMachingunHit:!0})}})),v.once("enemyDestroyEffectA",(function(){var t=i.addObject("vanisheffects",new V(e,!1));t.dx=v.dx,t.dy=v.dy,t.once("destroy",(function(){t.emit("spliceObject")}));var n=i.addObject("vanisheffects",new $(e));n.dx=v.dx,n.dy=v.dy,n.once("destroy",(function(){n.emit("spliceObject")}))})),v.once("enemyDestroyEffectB",(function(){var t=i.addObject("traceeffects",new tt(e));t.scale.set(1.5),t.dx=v.dx,t.dy=v.dy,t.once("destroy",(function(){t.emit("spliceObject")}));var a=i.addObject("vanisheffects",new V(e,!0));a.dx=v.dx,a.dy=v.dy,a.once("destroy",(function(){a.emit("spliceObject")}));var r=i.addObject("shoots",new T(e,1,1));r.dx=v.dx,r.dy=v.dy,r.once("destroy",(function(){r.emit("spliceObject")})),o.emit("stepOn"),n.play({name:"se_enemyenep"})})),v.once("enemyDestroyEffectC",(function(t){var n=i.addObject("vanisheffects",new V(e,!1));n.dx=v.dx,n.dy=v.dy,n.scale.set(1*t),n.once("destroy",(function(){n.emit("spliceObject")}));var a=i.addObject("vanisheffects",new $(e));a.dx=v.dx,a.dy=v.dy,a.scale.set(1*t),a.once("destroy",(function(){a.emit("spliceObject")}));var o=i.addObject("shoots",new z(e));o.dx=v.dx,o.dy=v.dy,o.scale.set(1.4*t),o.once("destroy",(function(){o.emit("spliceObject")}))})),v.once("enemyDestroy",(function(e){v.emit("finalize",e),n.play({name:"se_enep"}),g&&(h=Math.max(0,h-1),o.emit("enemyHoldcountUpdate",h)),_&&(c=Math.max(0,c-1),o.emit("enemyEndulecountUpdate",c<=0?1:Math.pow(.3,c))),s+=v._getScore,o.emit("upDateEnemyCount",{add:v._getScore,kill:s}),o.emit("getCoin",{count:v._getCoinCount,score:v._getScore,x:v.dx,y:v.dy,type:v._getCoinType}),v.emit("spliceObject"),m&&u(t,!1,m,f)})),v.on("enemyHold",(function(t){g||_||(g=!0,I.len=t.len,I.rot=t.rot,I.prot=t.prot,M=t.prot,k=0,v._isEnableRub=!0,v._Enemyanm.emit("motionB"),n.play({name:"se_hold",volume:.7}),h++,o.emit("enemyHoldcountUpdate",h),P=1)})),v.on("enemyRunover",(function(t){g||_||(v._endureCount<=0?(o.emit("stepOn"),v.emit("enemyDestroy",{isMachingunHit:!1})):(_=!0,I.len=t.len,I.rot=t.rot,I.prot=t.prot,v._Enemyanm.emit("motionB"),c++,o.emit("enemyEndulecountUpdate",c<=0?1:Math.pow(.3,c)),P=1))})),v.on("buzzShoot",(function(t){n.play({name:"se_hold",volume:.7});var a=i.addObject("effects",new J(e,t));a.scale.set(.12),a.dx=v.dx+4*Math.cos(t),a.dy=v.dy+4*Math.sin(t),a.once("destroy",(function(){a.emit("spliceObject")}));for(var s=function(a){var s=t+2*Math.PI*(a/1),h=i.addObject("effects",new Z(e,s));h.scale.set(.5),h.dx=v.dx+4*Math.cos(t),h.dy=v.dy+4*Math.sin(t),h.rotation=s+r,h.once("destroy",(function(t){if(t.isEffect){n.play({name:"se_enemyenep",volume:.7});var a=i.addObject("shoots",new T(e,1,1));a.dx=h.dx,a.dy=h.dy,a.once("destroy",(function(){a.emit("spliceObject")})),t.isPlayerHit&&(o.emit("stepOn"),o.emit("penaltySlow",120))}h.emit("spliceObject")}))},h=0;h<1;h++)s(h)}))}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),L=function(t){function e(e){var i=this;t.call(this);var n=this;this.once("defineMembers",(function(){i._getScore=1,i._getCoinCount=1,i._getCoinType=2})),this._Enemyanm=this.addChild(new K(e,1+parseInt(3*Math.random()))),this._Enemyanm.scale.set(.5);var a=[.4,1.82],o=Math.PI/2,r=2*Math.PI*Math.random(),s=0,h=2*Math.PI*Math.random(),c=1/90,d={x:n.dx,y:n.dy},l=0,p=Math.PI*Math.random(),u=.05+1.5*Math.random(),m=1+2*Math.random();this.moveInit=function(){l=0,d.x=n.dx,d.y=n.dy},this.moveUpdate=function(t){d.x=n.dx,d.y=n.dy,t.isHorming?s<1&&(s=Math.min(1,s+c*t.delta)):s>0&&(s=Math.max(0,s-c*t.delta)),s>0&&(p=u*Math.cos(s*m),h=Math.atan2(t.playerPos.y-n.y,t.playerPos.x-n.x)+p);var e=a[0]*t.delta*l,i=a[1]*t.delta*l;n.dx+=g(e*Math.cos(r),i*Math.cos(h),s),n.dy+=g(e*Math.sin(r),i*Math.sin(h),s),l<1&&(l=Math.min(1,l+.02*t.delta)),n._Enemyanm.rotation=Math.atan2(n.dy-d.y,n.dx-d.x)+o,n._Enemyanm.setSpeed(Math.max(1,g(1,3.5,s)*t.delta*l))},this.on("collusionToPlayer",(function(t){1===t.type?i.emit("enemyHold",t):i.emit("enemyRunover",t)})),this.on("objectHit",(function(t){i._isEnableRub?i.emit("enemyDestroy",{isMachingunHit:!1}):r+=.08*t.delta})),this.on("finalize",(function(t){i.emit("enemyDestroyEffectA"),i._Enemyanm.parent.removeChild(i._Enemyanm)}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),B=function(t){function e(e){var i=this;t.call(this);var n=this;this.once("defineMembers",(function(){i._getScore=1,i._getCoinCount=8,i._getCoinType=2,i._endureCount=70})),this._Enemyanm=this.addChild(new K(e,4)),this._Enemyanm.scale.set(.5);var a=[.46,1.4],o=Math.PI/2,r=2*Math.PI*Math.random(),s=0,h=2*Math.PI*Math.random(),c=1/90,d={x:n.dx,y:n.dy},l=0;this.moveInit=function(){l=0,d.x=n.dx,d.y=n.dy},this.moveUpdate=function(t){d.x=n.dx,d.y=n.dy,t.isHorming?s<1&&(s=Math.min(1,s+c*t.delta)):s>0&&(s=Math.max(0,s-c*t.delta)),s>0&&(h=Math.atan2(t.playerPos.y-n.y,t.playerPos.x-n.x));var e=a[0]*t.delta*l,i=a[1]*t.delta*l;n.dx+=g(e*Math.cos(r),i*Math.cos(h),s),n.dy+=g(e*Math.sin(r),i*Math.sin(h),s),l<1&&(l=Math.min(1,l+.02*t.delta)),n._Enemyanm.rotation=Math.atan2(n.dy-d.y,n.dx-d.x)+o,n._Enemyanm.setSpeed(Math.max(1,g(1,3.5,s)*t.delta*l))},this.on("collusionToPlayer",(function(t){1===t.type?i.emit("enemyHold",t):0===t.type?i.emit("enemyRunover",t):i.emit("enemyDestroy")})),this.on("objectHit",(function(t){i._isEnableRub?i.emit("enemyDestroy",{isMachingunHit:!1}):r+=.08*t.delta})),this.on("finalize",(function(t){i.emit("enemyDestroyEffectC",1)}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),W=function(t){function e(e){var i=this;t.call(this);var n=this;this.once("defineMembers",(function(){i._getScore=1,i._getCoinCount=10,i._getCoinType=2,i._endureCount=110})),this._Enemyanm=this.addChild(new K(e,7)),this._Enemyanm.scale.set(.5);var a=[.24,1],o=Math.PI/2,r=2*Math.PI*Math.random(),s=0,h=2*Math.PI*Math.random(),c=1/90,d={x:n.dx,y:n.dy},l=0;this.moveInit=function(){l=0,d.x=n.dx,d.y=n.dy},this.moveUpdate=function(t){d.x=n.dx,d.y=n.dy,t.isHorming?s<1&&(s=Math.min(1,s+c*t.delta)):s>0&&(s=Math.max(0,s-c*t.delta)),s>0&&(h=Math.atan2(t.playerPos.y-n.y,t.playerPos.x-n.x));var e=a[0]*t.delta*l,i=a[1]*t.delta*l;n.dx+=g(e*Math.cos(r),i*Math.cos(h),s),n.dy+=g(e*Math.sin(r),i*Math.sin(h),s),l<1&&(l=Math.min(1,l+.02*t.delta)),n._Enemyanm.rotation=Math.atan2(n.dy-d.y,n.dx-d.x)+o,n._Enemyanm.setSpeed(Math.max(1,g(1,3.5,s)*t.delta*l))},this.on("collusionToPlayer",(function(t){1===t.type?i.emit("enemyHold",t):0===t.type?i.emit("enemyRunover",t):i.emit("enemyDestroy")})),this.on("objectHit",(function(t){i._isEnableRub?i.emit("enemyDestroy",{isMachingunHit:!1}):r+=.08*t.delta})),this.on("finalize",(function(t){i.emit("enemyDestroyEffectC",1)}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Y=function(t){function e(e){var i=this;t.call(this);var n=this;this.once("defineMembers",(function(){i._getScore=1,i._getCoinCount=3,i._getCoinType=2})),this._Enemyanm=this.addChild(new K(e,9)),this._Enemyanm.scale.set(.5);var a=[.7,1.85],o=Math.PI/2,r=2*Math.PI*Math.random(),s=0,h=2*Math.PI*Math.random(),c=1/90,d={x:n.dx,y:n.dy},l=0;this.moveInit=function(){l=0,d.x=n.dx,d.y=n.dy},this.moveUpdate=function(t){d.x=n.dx,d.y=n.dy,t.isHorming?s<1&&(s=Math.min(1,s+c*t.delta)):s>0&&(s=Math.max(0,s-c*t.delta)),s>0&&(h=Math.atan2(t.playerPos.y-n.y,t.playerPos.x-n.x));var e=a[0]*t.delta*l,i=a[1]*t.delta*l;n.dx+=g(e*Math.cos(r),i*Math.cos(h),s),n.dy+=g(e*Math.sin(r),i*Math.sin(h),s),l<1&&(l=Math.min(1,l+.02*t.delta)),n._Enemyanm.rotation=Math.atan2(n.dy-d.y,n.dx-d.x)+o,n._Enemyanm.setSpeed(Math.max(1,g(1,3.5,s)*t.delta*l))},this.on("collusionToPlayer",(function(t){2===t.type?i.emit("enemyRunover",t):i.emit("enemyHold",t)})),this.on("objectHit",(function(t){i._isEnableRub?i.emit("enemyDestroy",{isMachingunHit:!1}):r+=.08*t.delta})),this.on("finalize",(function(t){i.emit("enemyDestroyEffectC",1)}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),G=function(t){function e(e){var i=this;t.call(this);var n=this;this.once("defineMembers",(function(){i._getScore=1,i._getCoinCount=2,i._getCoinType=2})),this._Enemyanm=this.addChild(new K(e,8)),this._Enemyanm.scale.set(.5);var a=[.65*(1+.23*Math.random()),2.48*(1+.23*Math.random())],o=Math.PI/2,r=2*Math.PI*Math.random(),s=0,h=2*Math.PI*Math.random(),c={x:n.dx,y:n.dy},d=0,l=Math.PI,p=0,u=1/140;this.moveInit=function(){d=0,c.x=n.dx,c.y=n.dy},this.moveUpdate=function(t){c.x=n.dx,c.y=n.dy,t.isHorming?(s<1&&(s=Math.min(1,s+.025*t.delta)),p<1&&(p=Math.min(1,p+u*t.delta))):(s>0&&(s=Math.max(0,s-.025*t.delta)),p>0&&(p=Math.max(0,p-u*t.delta))),s>0&&(h=Math.atan2(t.playerPos.y-n.y,t.playerPos.x-n.x)+l*(1-p));var e=a[0]*t.delta*d,i=a[1]*t.delta*d;n.dx+=g(e*Math.cos(r),i*Math.cos(h),s),n.dy+=g(e*Math.sin(r),i*Math.sin(h),s),d<1&&(d=Math.min(1,d+.02*t.delta)),n._Enemyanm.rotation=Math.atan2(n.dy-c.y,n.dx-c.x)+o,n._Enemyanm.setSpeed(Math.max(1,g(1,3.5,s)*t.delta*d))},this.on("collusionToPlayer",(function(t){1===t.type?i.emit("enemyHold",t):i.emit("enemyRunover",t)})),this.on("objectHit",(function(t){i._isEnableRub?i.emit("enemyDestroy",{isMachingunHit:!1}):r+=.08*t.delta})),this.on("finalize",(function(t){i.emit("enemyDestroyEffectA")}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),H=function(t){function e(e){var i=this;t.call(this);var n=this;this.once("defineMembers",(function(){i._getScore=1,i._getCoinCount=5,i._getCoinType=2})),this._Enemyanm=this.addChild(new K(e,6)),this._Enemyanm.scale.set(.5),this._Enemyanm.on("shoot",(function(){n.emit("buzzShoot",n._Enemyanm.rotation-o)}));var a=[.5,1.88],o=Math.PI/2,r=2*Math.PI*Math.random(),s=0,h=2*Math.PI*Math.random(),c=1/90,d={x:n.dx,y:n.dy},l=0,p=Math.pow(190,2),u=1,m=!1,f=0;this.moveInit=function(){l=0,d.x=n.dx,d.y=n.dy},this.moveUpdate=function(t){d.x=n.dx,d.y=n.dy,m?(u=Math.max(0,u-.08*t.delta),f<700?f+=t.delta:t.distance<=p?f=0:(i._Enemyanm.emit("motionA"),f=0,m=!1)):(t.distance<=p&&(i._Enemyanm.emit("motionC"),m=!0),u=Math.min(1,u+.08*t.delta)),t.isHorming?s<1&&(s=Math.min(1,s+c*t.delta)):s>0&&(s=Math.max(0,s-c*t.delta)),s>0&&(h=Math.atan2(t.playerPos.y-n.y,t.playerPos.x-n.x));var e=a[0]*t.delta*l*u,y=a[1]*t.delta*l*u;n.dx+=g(e*Math.cos(r),y*Math.cos(h),s),n.dy+=g(e*Math.sin(r),y*Math.sin(h),s),l<1&&(l=Math.min(1,l+.02*t.delta)),u>0?n._Enemyanm.rotation=Math.atan2(n.dy-d.y,n.dx-d.x)+o:f<40&&(n._Enemyanm.rotation=h+o),n._Enemyanm.setSpeed(Math.max(1,g(1,3.5,s)*t.delta*l*u))},this.on("collusionToPlayer",(function(t){i.emit("enemyDestroy")})),this.on("objectHit",(function(t){i._isEnableRub?i.emit("enemyDestroy",{isMachingunHit:!1}):r+=.08*t.delta})),this.on("finalize",(function(t){i.emit("enemyDestroyEffectC",1)}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),N=function(t){function e(e){var i=this;t.call(this);var n=this;this.once("defineMembers",(function(){i._getScore=1,i._getCoinCount=2,i._getCoinType=2,i._collusionData[0]={range:60,x:0,y:0}}));var a=!0;this._Enemyanm=this.addChild(new K(e,5)),this._Enemyanm.scale.set(.5),this._Enemyanm.once("enep",(function(){i.emit("enemyDestroy",{isMachingunHit:!1})}));var o=[.3,1.4],r=Math.PI/2,s=2*Math.PI*Math.random(),h=0,c=2*Math.PI*Math.random(),d=1/90,l={x:n.dx,y:n.dy},p=0;this.moveInit=function(){p=0,l.x=n.dx,l.y=n.dy},this.moveUpdate=function(t){if(a){l.x=n.dx,l.y=n.dy,t.isHorming?h<1&&(h=Math.min(1,h+d*t.delta)):h>0&&(h=Math.max(0,h-d*t.delta)),h>0&&(c=Math.atan2(t.playerPos.y-n.y,t.playerPos.x-n.x));var e=o[0]*t.delta*p,i=o[1]*t.delta*p;n.dx+=g(e*Math.cos(s),i*Math.cos(c),h),n.dy+=g(e*Math.sin(s),i*Math.sin(c),h),p<1&&(p=Math.min(1,p+.02*t.delta)),n._Enemyanm.rotation=Math.atan2(n.dy-l.y,n.dx-l.x)+r,n._Enemyanm.setSpeed(Math.max(1,g(1,3.5,h)*t.delta*p))}},this.once("collusionToPlayer",(function(t){2===t.type?i.emit("enemyDestroy",{isMachingunHit:!0}):i._Enemyanm.emit("motionD"),a=!1})),this.on("objectHit",(function(t){s+=.08*t.delta})),this.on("finalize",(function(t){if(t.isMachingunHit)i.emit("enemyDestroyEffectC",1);else{i.emit("enemyDestroyEffectB");var n=Math.pow(56,2);Math.pow(i.x-e.width/2,2)+Math.pow(i.y-e.height/2,2)<=n&&i.emit("penaltySlow",60)}}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),U=function(t){function e(e){var i=this;t.call(this);var n=this;this.once("defineMembers",(function(){i._getScore=1,i._getCoinCount=100,i._getCoinType=2,i._endureCount=110,i._holdRange=Math.pow(52,2)})),this._Enemyanm=this.addChild(new K(e,7)),this._Enemyanm.scale.set(1.2);var a=[.44,1.24],o=Math.PI/2,r=2*Math.PI*Math.random(),s=0,h=2*Math.PI*Math.random(),c=1/90,d={x:n.dx,y:n.dy},l=0;this.moveInit=function(){l=0,d.x=n.dx,d.y=n.dy},this.moveUpdate=function(t){d.x=n.dx,d.y=n.dy,t.isHorming?s<1&&(s=Math.min(1,s+c*t.delta)):s>0&&(s=Math.max(0,s-c*t.delta)),s>0&&(h=Math.atan2(t.playerPos.y-n.y,t.playerPos.x-n.x));var e=a[0]*t.delta*l,i=a[1]*t.delta*l;n.dx+=g(e*Math.cos(r),i*Math.cos(h),s),n.dy+=g(e*Math.sin(r),i*Math.sin(h),s),l<1&&(l=Math.min(1,l+.02*t.delta)),n._Enemyanm.rotation=Math.atan2(n.dy-d.y,n.dx-d.x)+o,n._Enemyanm.setSpeed(Math.max(1,g(1,3.5,s)*t.delta*l))},this.on("collusionToPlayer",(function(t){1===t.type?i.emit("enemyHold",t):0===t.type?i.emit("enemyRunover",t):i.emit("enemyDestroy")})),this.on("objectHit",(function(t){i._isEnableRub?i.emit("enemyDestroy",{isMachingunHit:!1}):r+=.08*t.delta})),this.on("finalize",(function(t){i.emit("enemyDestroyEffectC",2)}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),V=function(t){function e(e,i){var n=this;t.call(this);var a=e.resources.spritesheets.effects,o=this.addChild(new Pixim.Container).addChild(new PIXI.Sprite(a.et6));o.anchor.set(.5),o.rotation=2*Math.PI*Math.random(),o.tint=i?11184810:16777215,this.visible=!1;var r,s,h=function(){var t=0;n.task.on("main2",(function(e){t<1?t=Math.min(1,t+.014285714285714285*e.delta):(n.task.clear("main2"),c())}))},c=function(){var t=0;n.task.on("main2",(function(e){n.alpha=1-t,t<1?t=Math.min(1,t+.03333333333333333*e.delta):(n.task.clear(),n.emit("destroy"))}))};s=0,n.task.on("main1",(function(t){r=1-Math.pow(1-s,2),o.scale.set(.5*r),s<1?s=Math.min(1,s+.07142857142857142*t.delta):(n.task.clear("main1"),h())}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),$=function(t){function e(e){var i=this;t.call(this);var n=0;this.task.on("main",(function(t){(n+=t.delta)>=32&&(i.task.clear(),i.emit("destroy"))}));for(var a=function(t){var n=void 0,a=i.addChild(new Pixim.Container);(n=a.addChild(new PIXI.Sprite(e.resources.spritesheets.gra.g_circle))).anchor.set(.5),n.scale.set(8/n.width),n.tint=7840768;var o=.2*Math.random()*2*4,r=2*Math.PI*Math.random(),s=14+60*Math.random(),h=0,c=void 0;a.task.on("anm",(function(t){c=1-Math.pow(1-h,2),a.x=s*c*Math.cos(r),a.y=s*c*Math.sin(r),a.scale.set((1-c)*o),h<1?h=Math.min(1,h+.03571428571428571*t.delta):(a.task.clear(),a.parent.removeChild(a))}))},o=0;o<32;o++)a()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),K=function(t){function e(e,i){var n=this;t.call(this),this._speed=1;var a=e.resources.spritesheets.zombiex,o="Z"+i+"_",r=this,s=this.addChild(new Pixim.Container);s.y=-10;var h=s.addChild(new PIXI.Sprite(a[o+"0_0"])),c=void 0===a[o+"HEAD"]?null:s.addChild(new PIXI.Sprite(a[o+"HEAD"]));h.anchor.set(.5),null!==c&&c.anchor.set(.5);var d=function(){h.scale.x=1,h.texture=a[o+"0_0"],null!==c&&(c.visible=!0,c.y=0,c.rotation=0)},l="motionA",p=o+"0_",u=[function(){h.texture=a[p+0]},function(){h.texture=a[p+1]},function(){h.texture=a[p+2]},function(){h.texture=a[p+3]},function(){h.texture=a[p+2]},function(){h.texture=a[p+1]}];this.on(l,(function(){var t=0;h.scale.x=1,null!==c&&(c.visible=!0),h.texture=a[p+0],n.task.clear();var e=t,i=u.length-1;n.task.on(l,(function(a){(t+=.12*a.delta*n._speed)>=i&&(t=0);var o=parseInt(t);e!=o&&(0===o&&(h.scale.x*=-1),u[o]()),e=o,null!==c&&(c.x=2*Math.sin(Math.PI*(o/i)))}))}));var m=function(){var t=0;r.task.on("anim",(function(e){var i=1-Math.pow(1-t,2);c.y=4*i-4,t<1?t=Math.min(1,t+.05555555555555555*e.delta):(r.task.clear("anim"),f())}))},f=function(){var t=0;r.task.on("anim",(function(e){t<1?t=Math.min(1,t+.05555555555555555*e.delta):(r.task.clear("anim"),y())}))},y=function(){var t=0;r.task.on("anim",(function(i){var n=1-Math.pow(1-t,2);c.y=-4*n,t<1?t=Math.min(1,t+.08333333333333333*i.delta):(r.task.clear("anim"),e())}));var e=function(){var t=0;r.task.on("anim",(function(e){var n=1-Math.pow(1-t,2);c.y=8*n-4,t<1?t=Math.min(1,t+.08333333333333333*e.delta):(r.task.clear("anim"),i())}))},i=function(){var t=0;r.task.on("anim",(function(e){var i=1-Math.pow(1-t,2);c.y=4-8*i,t<1?t=Math.min(1,t+.125*e.delta):(r.task.clear("anim"),n())}))},n=function(){var t=0;r.task.on("anim",(function(e){var i=Math.sin(4*Math.PI*t);c.rotation=.25*i,t<1?t=Math.min(1,t+.03571428571428571*e.delta):(r.task.clear("anim"),a())}))},a=function(){var t=0;r.task.on("anim",(function(e){var i=1-Math.pow(1-t,2);c.y=0*i-4,t<1?t=Math.min(1,t+.08333333333333333*e.delta):(r.task.clear("anim"),m())}))}};this.on("motionB",(function(){n.task.clear(),d(),m()}));var v="motionC",x=o+"1_",w=1,C=[function(){h.texture=a[x+0],w=1},function(){h.texture=a[x+1],w=.08},function(){h.texture=a[x+2],w=1},function(){h.texture=a[x+3],w=1,r.emit("shoot")},function(){h.texture=a[x+2],w=1},function(){h.texture=a[x+1],w=.001},function(){h.texture=a[x+0],w=.1}];this.on(v,(function(){var t=0;d(),null!==c&&(c.visible=!1),C[0](),n.task.clear();var e=t,i=C.length-1;n.task.on(v,(function(a){(t+=.12*a.delta*n._speed*w)>=i&&(t=0);var o=parseInt(t);e!=o&&C[o](),e=o}))}));var g="motionD",_=0,I=o+"1_",P=[function(){h.texture=a[o+"0_0"]},function(){h.texture=a[I+0]},function(){h.texture=a[I+1]},function(){h.texture=a[I+2]}];this.on(g,(function(){d(),P[0](),n.task.clear();var t=_,e=P.length-1;n.task.on(g,(function(i){_+=.2*i.delta;var a=parseInt(_);if(a>=e)return n.task.clear(),void n.emit("enep");t!=a&&P[a](),t=a}))})),this.emit("motionA")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setSpeed=function(t){this._speed=t},e}(Pixim.Container),J=function(t){function e(e,i){var n=this;t.call(this);for(var a=e.resources.spritesheets.effects,o=this.addChild(new Pixim.Container),r=this.addChild(new Pixim.Container),s=this.addChild(new Pixim.Container),h=function(t){var n=r.addChild(new q(e,t/8,i,!0));n.once("destroy",(function(){r.removeChild(n)}))},c=0;c<8;c++)h(c);for(var d=function(t){var n=s.addChild(new q(e,t/3,i,!1));n.once("destroy",(function(){s.removeChild(n)}))},l=0;l<3;l++)d(l);var p=o.addChild(new PIXI.Sprite(a.et3));p.anchor.set(.5);var u,m=0;this.task.on("main",(function(t){u=1-Math.pow(1-m,2),p.scale.set(.8*(1.8+1.1*u)),p.alpha=.65*(1-m),m<1?m=Math.min(1,m+.1*t.delta):(n.task.clear(),n.emit("destroy"))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),q=function(t){function e(e,i,n,a){var o=this;t.call(this);var r=e.resources.spritesheets.effects,s=this.addChild(new PIXI.Sprite(r.et7));s.anchor.set(.5),s.tint=a?12320512:16777215;var h,c,d=.1,l=1/(a?8:2),p=48+(1-i)*(a?280:120),u=1+i*(a?1.8:2),m=n+.6*(-Math.PI/2+Math.PI*Math.random()),f=Math.cos(m),y=Math.sin(m),v=a?.8:.3;s.scale.set(u),this.task.on("main",(function(t){h=1-Math.pow(1-d,2),c=p*h,s.x=c*f,s.y=c*y,s.scale.set((1-h*v)*u),d<1?d=Math.min(1,d+l*t.delta):(o.task.clear(),o.emit("destroy"))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Z=function(t){function e(e,i){var n=this;t.call(this);var a=e.resources.spritesheets.effects,o=this.addChild(new Pixim.Container),r=o.addChild(new Pixim.Container),s=o.addChild(new Pixim.Container),h=0,c=Math.pow(64,2),d=6*Math.cos(i),l=6*Math.sin(i);this.on("upDate",(function(t){Math.pow(n.x-e.width/2,2)+Math.pow(n.y-e.height/2,2)<=c?n.emit("destroy",{isPlayerHit:!0,isEffect:!0}):(n.dx+=d*t.delta,n.dy+=l*t.delta)})),this.once("changedVisible",(function(t){n.emit("destroy",{isPlayerHit:!1,isEffect:!1})})),this.once("objectHit",(function(){n.emit("destroy",{isPlayerHit:!1,isEffect:!0})}));var p=r.addChild(new PIXI.Sprite(a.et1));p.anchor.set(.5),p.scale.set(.2),p.alpha=.75;var u=r.addChild(new PIXI.Sprite(a.et7));u.anchor.set(.5),u.scale.set(.16),u.tint=15138560,this.task.on("main",(function(t){if(u.rotation+=2*t.delta,h>=1){for(var e=function(t){var e=s.addChild(new Pixim.Container),i=e.addChild(new PIXI.Sprite(a.et7));i.tint=15138560,i.anchor.set(.5),i.rotation=Math.random()*Math.PI*2,e.x=12*Math.random()-6;var n=0,r=void 0,h=20+44*Math.random(),c=.18*(1-.5*Math.random());e.task.on("main",(function(t){r=1-Math.pow(1-n,2),e.y=h*r,e.scale.set(c*(1-r)),n<1?n=Math.min(1,n+.1*t.delta):(e.task.clear(),o.removeChild(e))}))},i=0;i<3;i++)e();h=0}else h+=t.delta}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Q=function(t){function e(e){var i=this;t.call(this);var n=e.resources.spritesheets.items,a=this.addChild(new PIXI.Sprite(n.et1_2_2)),o=this.addChild(new PIXI.Sprite(e.resources.spritesheets.gra.g_circle));o.anchor.set(.5),o.scale.set(94/o.width),o.tint=16777215,o.alpha=0,a.anchor.set(.5,1);var r=0;this.task.on("main",(function(t){a.texture=n["et1_2_"+parseInt(2-2*r)],r<1?r=Math.min(1,r+.1*t.delta):(i.task.clear(),i.emit("destroy"))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),tt=function(t){function e(e){var i=this;t.call(this);var n=e.resources.spritesheets.effects,a=this.addChild(new Pixim.Container).addChild(new PIXI.Sprite(n.et5));a.anchor.set(.5),a.rotation=2*Math.PI*Math.random(),this.visible=!1;var o,r,s=function(){var t=0;i.task.on("main2",(function(e){t<1?t=Math.min(1,t+.014285714285714285*e.delta):(i.task.clear("main2"),h())}))},h=function(){var t=0;i.task.on("main2",(function(e){i.alpha=1-t,t<1?t=Math.min(1,t+.03333333333333333*e.delta):(i.task.clear(),i.emit("destroy"))}))};r=0,i.task.on("main1",(function(t){o=1-Math.pow(1-r,2),a.scale.set(.5*o),r<1?r=Math.min(1,r+.07142857142857142*t.delta):(i.task.clear("main1"),s())}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),et=function(t){function e(e,i,n){t.call(this);var a=this;this.on("setCoinItem",(function(t){for(var o=function(o){var r=i.addObject("coinitems",new it(e,t.x,t.y,t.type));r.scale.set(.76),r.dx=t.x,r.dy=t.y,r._isCollusionToPlayer=!1,r._isInvisibleTaskStop=!1,r._isCollusionToArea=!1,r.once("destroy",(function(){0===t.count&&a.emit("coinAnimFinish"),n.play({name:"se_coinget",volume:.5}),r.emit("spliceObject"),r=null}))},r=0;r<t.count;r++)o()})),this.on("setBoxItem",(function(t){for(var o=function(o){var r=t.itemID,s=t.coordFunc(t.coordObj),h=i.addObject("boxitems",new nt(e,r));h.dx=s.pos.x,h.dy=s.pos.y,h._isCollusionToPlayer=!0,h._collusionData[0]={range:16,x:0,y:0},h.once("destroy",(function(){n.play({name:"se_item"}),a.emit("stepOn"),a.emit("callItem",r),h.emit("spliceObject"),h=null,a.emit("setBoxItem",{count:1,coordFunc:t.coordFunc,itemID:r,coordObj:s.obj})}))},r=0;r<t.count;r++)o()})),this.on("setKeyItem",(function(t){for(var o=function(o){var r=t.coordFunc(t.coordObj),s=i.addObject("boxitems",new at(e));s.dx=r.pos.x,s.dy=r.pos.y,s._isCollusionToPlayer=!0,s._collusionData[0]={range:16,x:0,y:0},s.once("destroy",(function(){n.play({name:"se_item"}),a.emit("stepOn"),a.emit("getKeyItem",{x:s.x,y:s.y}),s.emit("spliceObject"),s=null}))},r=0;r<t.count;r++)o()})),this.on("setSmallCarItem",(function(t){for(var o=function(o){var r=parseInt(4*Math.random()),s=t.coordFunc(t.coordObj),h=i.addObject("boxitems",new ot(e,r));h.dx=s.pos.x,h.dy=s.pos.y,h._isCollusionToPlayer=!0,h.once("destroy",(function(){var o=i.addObject("traceeffects",new lt(e,240));o.dx=h.dx,o.dy=h.dy,o.scale.set(2.5),o.once("destroy",(function(){o.emit("spliceObject"),o=null}));var r=i.addObject("cardebris",new dt(e,!0,h.carRotation,240));r.dx=h.dx,r.dy=h.dy,r.once("destroy",(function(){r.emit("spliceObject"),r=null}));var c=i.addObject("shoots",new ht(e,0,40));c.dx=h.dx,c.dy=h.dy,c.scale.set(.6),c.once("destroy",(function(){c.emit("spliceObject"),c=null}));var d=i.addObject("shoots",new T(e,1.3,0));d.dx=h.dx,d.dy=h.dy,d.once("destroy",(function(){d.emit("spliceObject")})),n.play({name:"se_carenep"}),a.emit("stepOn"),a.emit("vanishEnemy",{x:h.dx,y:h.dy,range:Math.pow(80,2)}),h.emit("spliceObject"),h=null,a.emit("setSmallCarItem",{count:1,coordFunc:t.coordFunc,coordObj:s.obj})}))},r=0;r<t.count;r++)o()})),this.on("setBigCarItem",(function(t){for(var o=function(o){var r=t.coordFunc(t.coordObj),s=i.addObject("boxitems",new rt(e,0));s.dx=r.pos.x,s.dy=r.pos.y,s._isCollusionToPlayer=!0,s.once("destroy",(function(){var o=i.addObject("traceeffects",new lt(e,340));o.dx=s.dx,o.dy=s.dy,o.scale.set(4.2),o.once("destroy",(function(){o.emit("spliceObject"),o=null}));var h=i.addObject("cardebris",new dt(e,!1,s.carRotation,340));h.dx=s.dx,h.dy=s.dy,h.once("destroy",(function(){h.emit("spliceObject"),h=null}));for(var c=function(t){var n=70*Math.random(),o=2*Math.PI*Math.random(),r={x:s.dx+n*Math.cos(o),y:s.dy+n*Math.sin(o)},h=1+1*Math.random(),c=i.addObject("shoots",new ht(e,18*t,20));c.dx=r.x,c.dy=r.y,c.scale.set(.52*h),c.once("destroy",(function(){c.emit("spliceObject"),c=null})),c.once("expcall",(function(){var t=i.addObject("shoots",new T(e,.9*h,0));t.dx=r.x,t.dy=r.y,t.once("destroy",(function(){t.emit("spliceObject")})),a.emit("vanishEnemy",{x:t.dx,y:t.dy,range:Math.pow(100*h,2)})}))},d=0;d<7;d++)c(d);var l=i.addObject("shoots",new T(e,1.8,0));l.dx=s.dx,l.dy=s.dy,l.once("destroy",(function(){l.emit("spliceObject")})),n.play({name:"se_carenep"}),a.emit("stepOn"),a.emit("vanishEnemy",{x:s.dx,y:s.dy,range:Math.pow(128,2)}),s.emit("spliceObject"),s=null,a.emit("setBigCarItem",{count:1,coordFunc:t.coordFunc,coordObj:r.obj})}))},r=0;r<t.count;r++)o()}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),it=function(t){function e(e,i,n,a){t.call(this);var o=this,r=this.addChild(new Pixim.Container),s=e.resources.spritesheets.items;r.addChild(new PIXI.Sprite(s["coin"+a])).anchor.set(.5);var h,c,d,l,p=0,u=0,m=[{init:function(){u=h=0,c=1/40;var t=Math.random()*Math.PI*2,e=16+42*Math.random();d=i+e*Math.cos(t),l=n+e*Math.sin(t)},func:function(t){h=1-Math.pow(1-u,2),o.dx=(1-h)*i+h*d,o.dy=(1-h)*n+h*l,u<1?u=Math.min(1,u+c*t.delta):f(1)}},{init:function(){u=h=0,c=1/6},func:function(t){u<1?u=Math.min(1,u+c*t.delta):f(2)}},{init:function(){u=h=0,c=1/40},func:function(t){h=Math.pow(u,2),o.dx=(1-h)*d+h*(t.move.x+t.playerPos.x),o.dy=(1-h)*l+h*(t.move.y+t.playerPos.y),u<1?u=Math.min(1,u+c*t.delta):(o.task.clear(),o.emit("destroy"))}}],f=function(t){m[p=t].init()};f(0),this.on("upDate",(function(t){m[p].func(t)}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),nt=function(t){function e(e,i){var n=this;t.call(this);var a=this,o=e.resources.spritesheets.items,r=this.addChild(new Pixim.Container),s=this.addChild(new Pixim.Container),h=[15138560,15138560,49919,15138560,16762274];this.scale.set(.6),this.on("collusionToPlayer",(function(t){n.emit("destroy")}));var c=s.addChild(new PIXI.Sprite(o["box"+i]));c.anchor.set(.5);var d,l=1,p=3,u=!1;this.task.on("main",(function(t){if(d=Math.abs(Math.sin(Math.PI*(2+l*l*1)*l))*(1-l*l),c.scale.set(1+.2*d),l>.4&&!u){var n=r.addChild(new st(e,h[i],.82));n.once("destroy",(function(){a.removeChild(n),n=null})),u=!0}l<1&&(l=Math.min(1,l+.03*t.delta)),p>=64?(p=l=0,u=!1):p+=t.delta})),this.on("upDate",(function(t){}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),at=function(t){function e(e){var i=this;t.call(this);var n=this,a=e.resources.spritesheets.bonusstage,o=this.addChild(new Pixim.Container),r=this.addChild(new Pixim.Container),s=[15138560,15138560,49919,15138560,16762274];this.on("collusionToPlayer",(function(t){i.emit("destroy")}));var h,c,d=r.addChild(((h=new PIXI.Sprite(a.key)).anchor.set(.5),h)),l=1,p=3,u=!1;this.task.on("main",(function(t){if(c=Math.abs(Math.sin(Math.PI*(2+l*l*1)*l))*(1-l*l),d.scale.set(.7+.2*c),l>.4&&!u){var i=o.addChild(new st(e,s[0],.52));i.scale.set(.6),i.once("destroy",(function(){n.removeChild(i),i=null})),u=!0}l<1&&(l=Math.min(1,l+.03*t.delta)),p>=64?(p=l=0,u=!1):p+=t.delta})),this.on("upDate",(function(t){}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),ot=function(t){function e(e,i){var n=this;t.call(this);var a=e.resources.spritesheets.items,o=this.addChild(new PIXI.Sprite(a["car"+i]));o.anchor.set(.5),o.rotation=Math.PI*Math.random(),this.carRotation=o.rotation,this.once("defineMembers",(function(){var t=o.rotation+Math.PI/2,e=Math.cos(t),i=Math.sin(t);n._collusionData[0]={range:8,x:0,y:0};for(var a=1;a<2;a++)n._collusionData.push({range:8,x:8*a*e,y:8*a*i}),n._collusionData.push({range:8,x:-8*a*e,y:-8*a*i})})),this.once("collusionToPlayer",(function(){n.emit("destroy")})),this.on("upDate",(function(t){}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),rt=function(t){function e(e,i){var n=this;t.call(this);var a=e.resources.spritesheets.items,o=this.addChild(new PIXI.Sprite(a["bigcar"+i]));o.anchor.set(.5),o.rotation=Math.PI*Math.random(),this.carRotation=o.rotation,this.once("defineMembers",(function(){var t=12,e=o.rotation+Math.PI/2,i=Math.cos(e),a=Math.sin(e);n._collusionData[0]={range:t,x:0,y:0};for(var r=1;r<5;r++)n._collusionData.push({range:t,x:t*r*i,y:t*r*a}),n._collusionData.push({range:t,x:-12*r*i,y:-12*r*a})})),this.once("collusionToPlayer",(function(){n.emit("destroy")})),this.on("upDate",(function(t){}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),st=function(t){function e(e,i,n){var a=this;t.call(this),this.once("defineMembers",(function(){a._isInvisibleTaskStop=!1,a._isCollusionToArea=!1}));for(var o=0;o<3;o++){var r=this.addChild(new PIXI.Sprite(e.resources.spritesheets.gra.g_circle));r.anchor.set(.5),r.scale.set((64+10*o)/r.width),r.tint=i,r.alpha=.4}var s,h=0;this.task.on("main",(function(t){s=1-Math.pow(1-h,2),a.scale.set((.4+.6*s)*n),a.alpha=.85*(1-h),h<1?h=Math.min(1,h+.03333333333333333*t.delta):(a.task.clear(),a.emit("destroy"))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),ht=function(t){function e(e,i,n){var a=this;t.call(this),e.resources.spritesheets.effects,this.addChild(new Pixim.Container);var o=this,r=[o.addChild(new Pixim.Container),o.addChild(new Pixim.Container)];this.once("defineMembers",(function(){a._isInvisibleTaskStop=!1,a._isCollusionToArea=!1}));var s=0;this.task.on("begin",(function(t){if((s+=t.delta)>=i)return a.task.clear("begin"),void h()}));var h=function(){o.emit("expcall");var t=0,i=0,a=0;o.task.on("main",(function(s){if(t>=2){for(var h=function(t){i++;var n=r[t].addChild(new ct(e,t));n.once("destroy",(function(){n.parent.removeChild(n),n=null,--i<=0&&o.emit("destroy")}))},c=0;c<r.length;c++)h(c);a++>n&&o.task.clear(),t=0}t+=s.delta}))}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),ct=function(t){function e(e,i){var n=this;t.call(this);var a=e.resources.spritesheets.effects,o=.005*(3.2+2.1*Math.random()),r=this.addChild(new PIXI.Sprite(a.et7));r.tint=1===i?0:16746496,r.anchor.set(.5),r.rotation=2*Math.PI*Math.random(),r.scale.set(o),r.alpha=0;var s,h=0,c=2*Math.PI*Math.random(),d=20+62*Math.random(),l=Math.cos(c),p=Math.sin(c),u=Math.random()<.5?1:-1;this.task.on("main",(function(t){s=1-Math.pow(1-h,2),r.x=10+d*s*l,r.y=10+d*s*p,r.alpha=1-h,r.scale.set(o+1.1*s),r.rotation+=.01*t.delta*u,h<1?h=Math.min(1,h+.041666666666666664*t.delta):(n.task.clear(),n.emit("destroy"))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),dt=function(t){function e(e,i,n,a){var o=this;t.call(this);var r=e.resources.spritesheets.items,s=this;this.once("defineMembers",(function(){o._isInvisibleTaskStop=!1,o._isCollusionToArea=!1}));var h=this.addChild(new PIXI.Sprite(r[i?"carvanish":"bigcarvanish"]));h.anchor.set(.5),h.rotation=n,h.alpha=1;var c,d=function(){var t=0;s.task.on("begin",(function(e){h.alpha=1-t,t<1?t=Math.min(1,t+.016666666666666666*e.delta):(s.task.clear(),s.emit("destroy"))}))};c=0,s.task.on("begin",(function(t){if((c+=t.delta)>=a)return s.task.clear("begin"),void d()}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),lt=function(t){function e(e,i){var n=this;t.call(this);var a=e.resources.spritesheets.effects,o=this,r=this.addChild(new Pixim.Container);this.once("defineMembers",(function(){n._isInvisibleTaskStop=!1,n._isCollusionToArea=!1}));var s=r.addChild(new PIXI.Sprite(a.et5));s.anchor.set(.5),s.rotation=2*Math.PI*Math.random(),s.alpha=0;var h,c,d=function(){var t=0,e=1/i;o.task.on("main2",(function(i){if(!(t<1))return o.task.clear("main2"),void l();t=Math.min(1,t+e*i.delta)}))},l=function(){var t=0;o.task.on("main2",(function(e){if(s.alpha=1-t,!(t<1))return o.task.clear(),void o.emit("destroy");t=Math.min(1,t+.03333333333333333*e.delta)}))};c=0,o.task.on("main1",(function(t){if(s.alpha=1,h=1-Math.pow(1-c,2),s.scale.set(.5*h),!(c<1))return o.task.clear("main1"),void d();c=Math.min(1,c+.07142857142857142*t.delta)}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container);Pixim.Container;var pt=function(t){function e(e,i){t.call(this);var n=this.addChild(new PIXI.Container).addChild(new PIXI.Container),a={sheet:null,prefix:"typeA",anchor:0,align:0,vertical:!1,interval:.8,color:16777215};this.on("style",(function(t){if(void 0!==t)for(var e in t)void 0!==a[e]&&(a[e]=t[e])})),this.on("text",(function(t){if(void 0!==t&&null!==a.sheet){t+="";var e,i=0;if(n.removeChildren(),!(t.length<=0)){for(var o=0;o<t.length;o++)(e=n.addChild(new PIXI.Sprite(a.sheet[a.prefix+t[o]]))).tint=a.color,e.x=a.vertical?-e.width*a.align:i,e.y=a.vertical?i:-e.height*a.align,i+=(a.vertical?e.height:e.width)*a.interval;a.vertical?n.y=-n.height*a.anchor:n.x=-n.width*a.anchor}}})),this.style(i),this.text(e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.text=function(t){this.emit("text",t)},e.prototype.style=function(t){this.emit("style",t)},e}(Pixim.Container),ut=function(t){function e(e,i){t.call(this);for(var n=e.resources.spritesheets.topresult,a=this,o=this.addChild(new Pixim.Container),r=this.addChild(new Pixim.Container),s=[],h=0;h<2;h++){var c=r.addChild(new PIXI.Container),d=c.addChild(new PIXI.Container),l=d.addChild(new pt(i,{sheet:e.resources.spritesheets.nm,prefix:"n",anchor:0})),p=d.addChild(new PIXI.Sprite(n.res_kills));p.scale.set(1.7),p.x=l.width+2,p.y=l.height-p.height-6,d.x=-d.width/2,d.y=-d.height/2,c.rotation=0,s.push(c)}s[1].visible=!1,s[0].alpha=1;var u=o.addChild(new ft(e));u.once("destroy",(function(){u.task.clear(),o.removeChild(u)})),u.visible=!1;var m,f,y,v=function(){var t,e=0,i=s[1];i.visible=!0,x(),a.task.on("main2",(function(n){if(t=1-Math.pow(1-e,2),i.scale.set(1+.36*t),i.alpha=1*(1-e),!(e<1))return i.visible=!1,void a.task.clear("main2");e=Math.min(1,e+.08333333333333333*n.delta)}))},x=function(){var t=0,e=0,i=0,n=s[0];n.alpha=.7,a.task.on("main3",(function(o){if(parseInt(e)%2==0){var r=2*Math.PI*Math.random();n.x=1.2*Math.cos(r),n.y=1.2*Math.sin(r)}if(e+=.88*o.delta,parseInt(i)%2==0?n.alpha=1:n.alpha=.9,i+=.28*o.delta,!(t<120))return a.emit("fanm"),a.task.clear("main3"),void w();t+=o.delta}))},w=function(){var t,e=0,i=s[0],n=s[1];i.alpha=n.alpha=1,n.visible=!0,i.x=i.y=0,n.scale.set(1),u.emit("end"),a.task.on("main2",(function(o){if(t=1-Math.pow(1-e,2),i.y=-160*t,n.y=160*t,i.alpha=n.alpha=1*(1-e),!(e<1))return a.task.clear(),void a.emit("destroy");e=Math.min(1,e+.25*o.delta)}))};f=0,y=!0,r.alpha=0,a.task.on("main1",(function(t){m=2.4*f*(1-f)+f*f,r.scale.set(4-3*m),r.alpha=f,y&&m>=1&&(v(),u.visible=!0,u.emit("begin"),y=!1),f<1?f=Math.min(1,f+.08333333333333333*t.delta):a.task.clear("main1")}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),mt=function(t){function e(e,i,n,a,o,r){var s=this;t.call(this);var h=this,c=this.addChild(new PIXI.Container),d=c.addChild(new PIXI.Sprite(e.resources.spritesheets.nm.np)),l=c.addChild(new pt(i,{sheet:e.resources.spritesheets.nm,prefix:"n",anchor:0})),p=c.addChild(new PIXI.Sprite(e.resources.spritesheets.topresult.top_sec));d.y=-d.height/2,l.scale.set(.6),l.x=d.width-4,l.y=-l.height/2,p.x=l.x+l.width+4,p.y=-1,c.x=-c.width/2,c.alpha=0,this.x=n.x,this.y=n.y,this.scale.set(a);var u,m,f,y,v=function(){var t,e=0,i=s.y,n=o;s.task.on("finishTask",(function(o){if(t=(1-e)*Math.pow(e,2)+e*(1-Math.pow(1-e,2)),s.y=(1-t)*i+t*n,s.scale.set(a+.6*t),!(e<1))return s.task.clear(),void s.emit("destroy");e=Math.min(1,e+.0625*o.delta)}))};r?function(){var t,e=0;s.task.on("beginTaskB",(function(i){if(t=1-Math.pow(1-e,2),c.alpha=1-e,s.scale.set(a+1*t),!(e<1))return s.task.clear(),void s.emit("destroy");e=Math.min(1,e+.1*i.delta)}))}():(m=0,f=0,y="beginTask",n.y,s.task.on(y,(function(t){if(u=1-Math.pow(1-m,2),c.alpha=m,s.scale.set(a+3-3*u),m<1)m=Math.min(1,m+.125*t.delta);else{if(f<=0&&h.emit("next"),f>=40)return s.task.clear(y),void v();f+=t.delta}})))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),ft=function(t){function e(e){var i=this;t.call(this);var n=e.resources.spritesheets.effects,a=this,o=this.addChild(new Pixim.Container),r=Math.PI/180,s=[],h=o.addChild(new PIXI.Sprite(n.et6));h.anchor.set(.5);var c=o.addChild(new PIXI.Sprite(n.et10));c.anchor.set(.5),c.x=84*Math.cos(36*-r),c.y=84*Math.sin(36*-r);var d=o.addChild(new PIXI.Sprite(n.et11));d.anchor.set(.5),d.x=70*Math.cos(36*r),d.y=70*Math.sin(36*r);var l=o.addChild(new PIXI.Sprite(n.et12));l.anchor.set(.5),l.x=64*Math.cos(140*r),l.y=64*Math.sin(140*r);var p=o.addChild(new PIXI.Sprite(n.et13));p.anchor.set(.5),p.x=120*Math.cos(140*r),p.y=120*Math.sin(140*r),c.visible=d.visible=l.visible=p.visible=!1,s.push(c),s.push(d),s.push(l),s.push(p);var u=function(){var t=0,e=0;a.task.on("main",(function(i){if(t>=0){if(s[e].visible=!0,++e>=s.length)return void a.task.clear();t=0}else t+=i.delta}))};this.once("begin",(function(){var t,e;i.visible=!0,e=0,a.task.on("main",(function(i){if(t=3.4*e*(1-e)+e*e,h.scale.set(t),!(e<1))return a.task.clear(),void u();e=Math.min(1,e+.25*i.delta)}))})),this.once("end",(function(){var t;i.visible=!0,t=0,a.task.on("main",(function(e){if(o.alpha=1-t,!(t<1))return i.visible=!1,a.task.clear(),void a.emit("destroy");t=Math.min(1,t+.16666666666666666*e.delta)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),yt=function(){};yt.parseTimeData=function(t){return{sec:parseInt(t/60)%60,min:parseInt(t/3600)%60,hour:parseInt(t/216e3)}},yt.parseFrameData=function(t,e,i){return 216e3*t+3600*e+60*i},yt.parse24BitColorCode=function(t,e,i){return parseInt(i)+256*parseInt(e)+256*parseInt(t)*256},yt.GetHSVColor=function(t,e,i){var n=0,a=0,o=0;t>=0&&t<60?(n=255,a=t/60*255,o=0):t>=60&&t<120?(n=255*(1-(t-60)/60),a=255,o=0):t>=120&&t<180?(n=0,a=255,o=(t-120)/60*255):t>=180&&t<240?(n=0,a=255*(1-(t-180)/60),o=255):t>=240&&t<300?(n=(t-240)/60*255,a=0,o=255):t>=300&&t<360&&(n=255,a=0,o=255*(1-(t-300)/60));var r=1-e/255;n+=(255-n)*r,a+=(255-a)*r,o+=(255-o)*r;var s=i/255;return n*=s,a*=s,o*=s,yt.parse24BitColorCode(parseInt(n),parseInt(a),parseInt(o))},yt.bound=function(t){var e=.16*Math.abs(t.mscl-t.iscl)*(t.iscl>t.mscl?-1:1),i=yt.tween({target:t.target,name:t.name,time:3,main:function(i){t.main(yt.cubic(t.iscl,t.mscl+e,i))},finish:function(){n()}}),n=yt.tween({target:t.target,name:t.name,time:3,main:function(i){t.main(yt.cubic(t.mscl+e,t.mscl-.5*e,i))},finish:function(){a()}}),a=yt.tween({target:t.target,name:t.name,time:2,main:function(i){t.main(yt.cubic(t.mscl-.5*e,t.mscl+.25*e,i))},finish:function(){o()}}),o=yt.tween({target:t.target,name:t.name,time:2,main:function(i){t.main(yt.cubic(t.mscl+.25*e,t.mscl,i))},finish:function(){}});i()},yt.tween=function(t){return function(){var e=1/t.time,i=0;t.target.task.clear(t.name),t.target.task.on(t.name,(function(n){t.main(i),i<1?i=Math.min(1,i+e*n.delta):(t.target.task.clear(t.name),t.finish())}))}},yt.cubic=function(t,e,i){return(1-i)*t+i*e},yt.drawrect=function(t,e,i,n,a,o){var r=new PIXI.Graphics;return r.beginFill(a,o),r.drawRect(t,e,i,n),r.endFill(),r},yt.getProgressDay=function(t,e){var i=new Date(t),n=new Date(e).getTime()-i.getTime();return Math.max(0,Math.floor(n/864e5))},yt.getNowDayString=function(){var t=new Date;return t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()};var vt=function(t){function e(e,i,n,a,o,r,l,p,u,m,f){var y=this;t.call(this);var v=this;a.canPlay(i);var x=!1,w=this.addChild(new PIXI.Graphics);w.beginFill(13616283,1),w.drawRect(0,0,e.width,e.height),w.endFill(),w.interactive=!0,w.on("pointerdown",(function(t){x=!0;var e={x:t.data.global.x-72*st.mov.cos,y:t.data.global.y-72*st.mov.sin};v.task.clear("ctrlTask"),Mt.visible=!0,Mt.x=e.x,Mt.y=e.y,v.task.on("ctrlTask",(function(i){v.interactive||C();var n=Math.atan2(t.data.global.y-e.y,t.data.global.x-e.x),a={cos:Math.cos(n),sin:Math.sin(n)};Mt.emit("setrotate",a),v.emit("extap",a)}))}));var C=function(){x&&(Mt.visible=!1,v.task.clear("ctrlTask"),x=!1)};w.on("pointerupoutside",(function(){C()})),w.on("pointerup",(function(){C()}));var g=!1;this.once("enableInitItemPlay",(function(t){g=!0,f=t}));for(var _=this.addChild(new Pixim.Container),I=[],P=300,b=function(t,i,n,a){for(var o=0;o<t._tipDate.length;o++){var r=t._tipDate[o],s=null,h={x:i+r.localpos.x,y:n+r.localpos.y};r.texture?((s=_.addChild(new PIXI.Sprite(e.resources.spritesheets.mapchip[r.texture]))).z=r.localpos.z,s.rotation=r.rotation,r.isXTrun&&(s.scale.x=-1),r.isYTrun&&(s.scale.y=-1),s.x=h.x,s.y=h.y,I.push({sprite:s,scale:{x:s.scale.x,y:s.scale.y},size:{width:s.width,height:s.height},x:s.x,y:s.y,z:1+.05*r.localpos.z,isCollusion:!1})):((s=_.addChild(new PIXI.Container)).x=h.x,s.y=h.y,I.push({sprite:s,scale:{x:1,y:1},size:{width:r.collusionSize.width,height:r.collusionSize.height},x:s.x,y:s.y,z:1,isCollusion:a}))}},k=[{o:new s,size:{width:420,height:600,w:180}},{o:new h,size:{width:610,height:440,w:100}}],S=[],D=r?2:3,O=0,A=P,T=P,z=0;z<D;z++){O=0,T=P,S.push([]);for(var E=0;E<D;E++){var F=i?k[parseInt(Math.random()*k.length)]:k[0];b(F.o.getChipDate(),A,T,!0),S[z].push({x:A,y:T,size:{width:F.size.width,height:F.size.height}}),T+=F.size.height+258,O<F.size.width&&(O=F.size.width)}A+=O+258}for(var L=function(t,i,n,a,o){var r=[[t,i],[t+n.width,i],[t+n.width,i+n.height],[t,i+n.height]];if(1===a){for(var s=tt+e.width/2,h=it+e.height/2,c={x:[s-280,s+280],y:[h-450,h+450]},d=0;d<r.length;d++)if(c.x[0]<=r[d][0]&&r[d][0]<=c.x[1]&&c.y[0]<=r[d][1]&&r[d][1]<=c.y[1])return!1;return!0}for(var l=0;l<o;l++)for(var p=0;p<o;p++)for(var u=S[l][p],m=0;m<r.length;m++)if(u.x<=r[m][0]&&r[m][0]<=u.x+u.size.width&&u.y<=r[m][1]&&r[m][1]<=u.y+u.size.height)return!1;return!0},B=function(t){for(var e=[],i={x:t.fieldSize.width/(t.divCount.x-1),y:t.fieldSize.height/(t.divCount.y-1)},n=0;n<t.divCount.x;n++){e.push([]);for(var a=0;a<t.divCount.y;a++)e[n].push({ok:!0,x:i.x*n,y:i.y*a,size:{width:i.x,height:i.y}})}for(var o=[],r=0;r<t.divCount.x;r++)for(var s=0;s<t.divCount.y;s++){var h=e[r][s];h.ok=L(h.x,h.y,{width:i.x,height:i.y},0,t.mapNum)&&L(h.x,h.y,{width:i.x,height:i.y},1,t.mapNum),h.ok&&o.push({obj:h,canAsign:!0})}return{mapList:e,asignList:o,fieldSize:{width:t.fieldSize.width,height:t.fieldSize.height}}},W=_.width,Y=_.height,G=0;G<4;G++){var H=_.addChild(new PIXI.Graphics);H.beginFill(16711680,1),H.drawRect(-6,-6,12,12),H.endFill(),H.x=(W+600)*(G%2),H.y=(Y+600)*parseInt(G/2),H.alpha=0,I.push({sprite:H,scale:{x:1,y:1},size:{width:H.width,height:H.height},x:H.x,y:H.y,z:1,isCollusion:!1})}for(var N=[],U={width:_.width,height:_.height},V=0;V<I.length;V++){var $=I[V];$.isCollusion&&N.push($)}var K={normal:this.addChild(new Pixim.Container),timer:this.addChild(new Pixim.Container)};if(!i){var J=_.addChild(new PIXI.Sprite(e.resources.spritesheets.topresult.top_back));J.z=888,v.once("backinVisible",(function(){J.parent.removeChild(J)}))}var q=(i?_:v).addChild(new Pixim.Container),Z=null,Q=function(t){(Z=q.addChild(new c(e,a,K,n,t))).x=e.width/2,Z.y=i?e.height/2:e.height/2-90,Z.scale.set(.5),Z.z=999,r&&(Z.emit("allSkillPlay"),Z.emit("headLight"))};Q(o),this._playerData=Z,v.on("changePlayerSkin",(function(t){Z.task.clear(),Z.parent.removeChild(Z),Q(t.skinID),t.isRelease||Z.emit("unlockAnime")})),v.on("moveCar",(function(t){yt.tween({target:v,name:"carMoveTask",time:14,main:function(e){var i=(1-e)*Math.pow(e,2)+e*(1-Math.pow(1-e,2)),n=1-Math.pow(1-e,2);q.y=t?-180*i:-180*(1-n)},finish:function(){}})()})),v.on("moveCarEX",(function(t){var e=q.y;yt.tween({target:v,name:"carMoveTask",time:18,main:function(i){var n=(1-i)*Math.pow(i,2)+i*(1-Math.pow(1-i,2));q.y=(1-n)*e+n*t},finish:function(){}})()})),v.on("setCarY",(function(t){q.y=t})),Z.on("addTime",(function(t){v.emit("addTime",t)})),Z.on("machinShoot",(function(t){a.play({name:"se_machinegun",volume:.5});var i=pt.addObject("shoots",new d(e,rt,pt)),n=tt+at+48*Math.cos(rt),o=it+ot+48*Math.sin(rt),r=12*Math.random()-6;i.dx=n+(t.x/2+r)*Math.cos(rt+Math.PI/2),i.dy=o+(t.x/2+r)*Math.sin(rt+Math.PI/2),i.once("destroy",(function(){i.emit("spliceObject")}))}));var tt,it,nt=-Math.PI/2,at=Z.x,ot=Z.y,rt=nt,st={now:{cos:0,sin:-1},mov:{cos:0,sin:-1}};i?(tt=W/2+600,it=Y-150+360):(tt=650,it=1410);var ht={baseSpeed:r?4.2*1.3:4.2,rotateSpeed:1,coefficient:{hold:1,endure:1,penalties:1},speed:1},ct=function(){for(var t in ht.speed=ht.baseSpeed,ht.coefficient)ht.speed*=ht.coefficient[t];return ht.rotateSpeed=ht.coefficient.endure,ht.speed};ct();var dt={x:-Z.x,y:-Z.y},lt={x:_.width-Z.x,y:_.height-Z.y},pt=new M(_,{min:{x:0,y:0},max:{x:_.width,y:_.height}}),ft=v.addChild(new X(e));if(ft.visible=!1,pt.addNewTypeObjectList("traceeffects",1.001,!1),pt.addNewTypeObjectList("cardebris",1.002,!1),pt.addNewTypeObjectList("vanisheffects",1.003,!1),pt.addNewTypeObjectList("enemyshadow",1.004,!1),pt.addNewTypeObjectList("coinitems",1.005,!1),pt.addNewTypeObjectList("boxitems",1.201,!1),pt.addNewTypeObjectList("effects",1.007,!1),pt.addNewTypeObjectList("enemys",1.2,!1),pt.addNewTypeObjectList("items",1.202,!1),pt.addNewTypeObjectList("shoots",1.203,!0),i){for(var vt=0;vt<3;vt++)b(k[0].o.getChipDate(),1e3*vt,-900,!1);for(var xt=0;xt<3;xt++)b(k[0].o.getChipDate(),1e3*xt,U.height+200,!1);for(var wt=0;wt<3;wt++)b(k[0].o.getChipDate(),-600,900*wt,!1);for(var Ct=0;Ct<3;Ct++)b(k[0].o.getChipDate(),U.width+100,900*Ct,!1)}var gt=B({fieldSize:{width:U.width-120,height:U.height-120},divCount:{x:32,y:32},mapNum:D}),_t=B({fieldSize:{width:U.width-120,height:U.height-120},divCount:{x:32,y:32},mapNum:D}),It=function(t,e,i){var n=tt+Z.x,a=it+Z.y,o={x:0,y:0};if(e){var r=parseInt(gt.asignList.length*Math.random()),s=gt.asignList[r].obj;return o.x=s.x+s.size.width*Math.random(),o.y=s.y+s.size.height*Math.random(),o}var h=1+.4*Math.random(),c=void 0===i?2*Math.PI*Math.random():i,d=n+400*h*Math.cos(c),l=a+660*h*Math.sin(c),p=[-1,-1],u=gt.mapList.length-1;p[0]=Math.max(0,Math.min(u,parseInt(d/gt.fieldSize.width*(u+1)))),p[1]=Math.max(0,Math.min(u,parseInt(l/gt.fieldSize.height*(u+1))));var m=gt.mapList[p[0]][p[1]];if(o.x=m.x+m.size.width*Math.random(),o.y=m.y+m.size.height*Math.random(),p[0]>=u||p[1]>=u||p[0]<=0||p[1]<=0||!m.ok){if(t<148)return It(c-Math.PI,e,t+1);o.x=n<=U.width/2?U.width-32:32,o.y=a<=U.height/2?U.height-32:32}return o},Pt=function(t){t&&(t.canAsign=!0);for(var e=[],i=Z.x+tt,n=Z.y+it,a=0;a<_t.asignList.length;a++){var o=_t.asignList[a];(i-440>o.obj.x||i+440<o.obj.x||n-500>o.obj.y||n+500<o.obj.y)&&o.canAsign&&e.push(o)}if(e.length<=0)return{pos:{x:0,y:0},obj:null};var r=e[parseInt(e.length*Math.random())];return r.canAsign=!1,{pos:{x:r.obj.x,y:r.obj.y},obj:r}},bt=new et(e,pt,a);bt.on("stepOn",(function(){Z.emit("playStepon")})),bt.on("callItem",(function(t){Z.emit("playSkill",t)})),bt.on("vanishEnemy",(function(t){St.emit("vanishEnemy",t)})),bt.on("getKeyItem",(function(t){Z.emit("circleEffect"),v.emit("setKeystock",{x:t.x,y:t.y})}));var kt=this.addChild(new Pixim.Container),Mt=this.addChild(new j(e));Mt.visible=!1;var St=new R(e,pt,a,m);St.on("enemyHoldcountUpdate",(function(t){ht.coefficient.hold=Math.max(1-t/10,0),ct(),ft.emit("holdWarning",t),ft.visible=!0,t>=10&&v.emit("gameOver")})),St.on("enemyEndulecountUpdate",(function(t){ht.coefficient.endure=t,ct()}));var Xt={level:0,counter:0},Dt=0;St.on("upDateEnemyCount",(function(t){if(Xt.counter+=t.add,u[Xt.level].norma<=Xt.counter&&t.kill>0&&!r){Xt.counter=0,Dt+=u[Math.max(0,Xt.level-1)].norma,v.emit("addTime",5),a.play({name:"se_start"});for(var i=0;i<kt.children.length;i++)kt.children[i].emit("destroy");kt.removeChildren();var n=kt.addChild(new ut(e,Dt));n.scale.set(1),n.x=e.width/2,n.y=e.height/2+152,n.once("fanm",(function(){})),n.once("destroy",(function(){n.task.clear(),kt.removeChild(n),n=null}));var o={x:n.x,y:n.y-64},s=kt.addChild(new mt(e,5,{x:o.x,y:o.y},1.1,50,!1));s.once("next",(function(){var t=kt.addChild(new mt(e,5,{x:o.x,y:o.y},1.1,50,!0));t.once("destroy",(function(){kt.removeChild(t),t=null}))})),s.once("destroy",(function(){kt.removeChild(s),s=null,v.emit("timeAddEffect")}))}v.emit("vanishAdd",t.add)})),St.on("stepOn",(function(){Z.emit("playStepon")})),St.on("penaltySlow",(function(t){v.emit("playerPenaltySlow",t)})),St.on("getCoin",(function(t){var e=1;r?t.count*=5:1===m&&(e=10),v.emit("coinAdd",Math.floor(t.count*e)),bt.emit("setCoinItem",{count:t.count,x:t.x,y:t.y,type:t.type,price:e})}));var jt=!1,Ot=0;if(this.on("playerPenaltySlow",(function(t){jt?Ot=Math.min(240,Ot+t):(jt=!0,Ot=t,ht.coefficient.penalties=.3,ct(),v.task.on("playerPenaltySlowTask",(function(t){Z.emit("callPenaltyEffect"),Ot>0?Ot=Math.max(0,Ot-t.delta):(Ot=0,jt=!1,ht.coefficient.penalties=1,ct(),v.task.clear("playerPenaltySlowTask"))})))})),i&&(St.emit("createEnemy",{count:500,coordFunc:It,isInit:!0,isSetLoop:!0,enmType:null}),bt.emit("setSmallCarItem",{count:4,coordFunc:Pt}),bt.emit("setBigCarItem",{count:4,coordFunc:Pt}),r||(bt.emit("setBoxItem",{count:2,coordFunc:Pt,itemID:0}),bt.emit("setBoxItem",{count:3,coordFunc:Pt,itemID:1}),bt.emit("setBoxItem",{count:2,coordFunc:Pt,itemID:3}))),i)for(var At=e.resources.spritesheets.mapchip,Tt=[{yoko:!0,x:-300,y:-At.p10.height,len:800},{yoko:!1,x:U.width+At.p10.height,y:-300,len:800},{yoko:!0,x:-At.p10.height-300,y:U.height,len:800},{yoko:!1,x:0,y:-At.p10.height-300,len:800}],zt=0;zt<Tt.length;zt++)for(var Et=Tt[zt],Ft=Et.yoko?parseInt((U.width+.7*At.p10.height)/(.7*At.p10.width)):parseInt((U.height+.7*At.p10.height)/(.7*At.p10.width)),Rt=0,Lt=0;Lt<Ft+8;Lt++){var Bt=_.addChild(new PIXI.Sprite(At.p10));Bt.z=1;Et.yoko?(Bt.x=Rt+Et.x,Bt.y=Et.y,Rt+=.7*Bt.width):(Bt.rotation=Math.PI/2,Bt.x=Et.x,Bt.y=Rt+Et.y,Rt+=.7*Bt.width),I.push({sprite:Bt,scale:{x:1,y:1},size:{width:Bt.width,height:Bt.height},x:Bt.x,y:Bt.y,z:1,isCollusion:!1})}_.children.sort((function(t,e){return(void 0===t.z?1.1:t.z)-(void 0===e.z?1.1:e.z)}));var Wt=function(t,i){for(var n=0;n<t.children.length;n++){var a=t.children[n],o=a.x+Math.min((a.transform.localTransform.a+a.transform.localTransform.c)*Math.abs(a.width),0),r=a.y+Math.min((a.transform.localTransform.b+a.transform.localTransform.d)*Math.abs(a.height),0);o>=-(Math.abs(a.width)+228)&&o<=e.width+228&&r>=-(Math.abs(a.height)+228)&&r<=e.height+228?a.visible=!0:a.visible=!1,a.children.length>0&&a.isNest&&0==i&&Wt(a,i+1),!a.visible&&a._isClipping&&a.emit("spliceObject")}};r&&this.addChild(new PIXI.Sprite(e.resources.spritesheets.bonusstage.night_001));var Yt=!1,Gt=!1,Ht=0;this.on("gameStartSub",(function(t){t&&i&&(y.on("extap",(function(t){Yt&&(st.mov.cos=t.cos,st.mov.sin=t.sin)})),y.interactive=!0,r&&(Z.emit("playSkill",0),Z.emit("playSkill",1),Z.emit("playSkill",3))),!t&&i&&g&&(2===f&&(f=3),Z.emit("playSkill",f),a.play({name:"se_item"}));var n=7,o=rt;y.task.on("scroll",(function(s){n>=10&&i&&(a.play({name:"se_tank"}),n=0),n+=s.delta,Ht>=1800&&!Gt&&i&&!r&&(Math.random()<=.5&&(l||bt.emit("setKeyItem",{count:1,coordFunc:Pt})),Gt=!0),Ht+=s.delta;var h=tt,c=it;st.now.cos+=.42*(st.mov.cos-st.now.cos),st.now.sin+=.42*(st.mov.sin-st.now.sin),tt+=ht.speed*s.delta*st.now.cos,it+=ht.speed*s.delta*st.now.sin,rt=Math.atan2(it-c,tt-h),Z.emit("playRotation",{rotation:rt+Math.PI/2,isRight:rt-o>=0}),o=rt;for(var d=!1,p=0;p<I.length;p++){var u=I[p],m=1-u.z,f=u.sprite.y;if(u.sprite.x=m*at+u.z*(u.x-tt),u.sprite.y=m*ot+u.z*(u.y-it),u.isCollusion||(u.sprite.scale.x=(1+1.4*(u.z-1))*u.scale.x,u.sprite.scale.y=(1+1.4*(u.z-1))*u.scale.y),u.sprite.visible&&u.isCollusion){var v={begin:{x:at+32,y:ot+32},end:{x:at-32-u.size.width,y:ot-32-u.size.height}};u.sprite.x<=v.begin.x&&u.sprite.x>=v.end.x&&u.sprite.y<=v.begin.y&&u.sprite.y>=v.end.y&&(f<=v.begin.y&&f>=v.end.y?tt=h:it=c,d=!0)}}if(i?((tt<dt.x||tt>lt.x)&&(tt=h,d=!0),(it<dt.y||it>lt.y)&&(it=c,d=!0)):it<-800&&(it=U.height+e.height-700),d)for(var x=0;x<I.length;x++){var w=I[x];if(w.sprite.visible){var C=1-w.z;w.sprite.x=C*at+w.z*(w.x-tt),w.sprite.y=C*ot+w.z*(w.y-it)}}pt.upDateObjects({moveX:tt,moveY:it,viewCenterX:at,viewCenterY:ot,rotate:rt,fieldMapping:N,stageSize:U,delta:s.delta,player:Z}),Wt(_,0),t&&y.task.clear("scroll")}))})),i?(this.emit("gameStartSub",!0),this.once("gameStart",(function(){Yt=!0,y.emit("gameStartSub",!1),Z.emit("canEnable")}))):this.emit("gameStartSub",!1)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),xt=function(t){function e(e,i){var n=this;t.call(this),this._vanishCount=0,this._coinCount=0;var a=this,o=e.resources.spritesheets.topresult,r=this.addChild(new wt(70,0)),s=this.addChild(new wt(70,0)),h=this.addChild(new PIXI.Sprite(e.resources.spritesheets.gameui.kills));h.scale.set(.8);var c=this.addChild(new PIXI.Container);c.addChild(new PIXI.Sprite(o.res_coin)).anchor.set(.5),c.scale.set(h.height/c.height*1.2),c.x=h.width-c.width+c.width/2,c.y=h.height+6+c.height/2;var d=c.scale.x,l=this.addChild(new PIXI.Container),p=l.addChild(new PIXI.Sprite(e.resources.spritesheets.gra.g_circle));p.anchor.set(.5),p.scale.set(c.width/2/p.width),l.x=c.x,l.y=c.y,l.visible=!1;var u=this.addChild(new pt(0,{sheet:e.resources.spritesheets.nm,prefix:"n",anchor:0}));u.scale.set(.42),u.x=h.width+8,u.y=-2;var m=this.addChild(new pt(0,{sheet:e.resources.spritesheets.nm,prefix:"n",anchor:0}));m.scale.set(.42),m.x=u.x,m.y=c.y-m.height/2,i&&(u.alpha=h.alpha=0,c.x=20,m.x=42,c.y=20,m.y=c.y-m.height/2,l.x=c.x,l.y=c.y),r.on("changed",(function(t){u.text(t)})),s.on("changed",(function(t){m.text(t)})),s.on("finish",(function(){a.emit("coinAnim")})),this.on("coinAnim",(function(){var t,e=0,i="coinAnim";n.task.clear(i),l.visible=!0,l.alpha=0,n.task.on(i,(function(a){t=1-Math.pow(1-e,2),c.scale.set(d-.2*(1-t)),l.scale.set(1+.6*t),l.alpha=1-e,e<1?e=Math.min(1,e+.08333333333333333*a.delta):(l.visible=!1,n.task.clear(i))}))})),this.on("addVanishCount",(function(t){n._vanishCount+=t,r.emit("setValue",n._vanishCount)})),this.on("addCoinCount",(function(t){n._coinCount+=t,s.emit("setValue",n._coinCount)}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getVanishCount=function(){return this._vanishCount},e.prototype.getCoinCount=function(){return this._coinCount},e}(Pixim.Container),wt=function(t){function e(e,i){var n=this;t.call(this);var a=i,o=i;this.on("setValue",(function(t){var i="easeMover";n.task.clear(i);var r=0;o=t;var s=1/Math.max(Math.min(e,Math.abs(a-o)),1),h=a,c=a;n.task.on(i,(function(t){(a=parseInt((1-r)*h+r*o))!=c&&n.emit("changed",a),c=a,r<1?r=Math.min(r+s*t.delta,1):(a=o,n.emit("finish"),n.task.clear(i))}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Ct=function(t){function e(e,i,n){var a=this;t.call(this),this._maxtime=n+i,this._time=this._maxtime,this._progTime=0,this.on("startTimer",(function(){a.task.on("timerMain",(function(t){var e=.016666666666666666*t.delta;a._time-=e,a._progTime+=e,a._time<=0&&(a._time=0,a.task.clear("startTimer"),a.emit("timeOver"))}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setTimer=function(t){this._time=t},e.prototype.getTimer=function(){return this._time},e.prototype.getAliveTime=function(){return parseInt(this._progTime)},e}(Pixim.Container),gt=function(t){function e(e,i,n){var a=this;t.call(this);var o=this,r=this.addChild(new PIXI.Container),s=r.addChild(new PIXI.Container),h=s.addChild(new pt(0,{sheet:e.resources.spritesheets.nm,prefix:"n",anchor:0}));h.scale.set(.8),h.text(99);var c=s.addChild(new PIXI.Sprite(e.resources.spritesheets.nm["n."]));c.scale.set(.8),c.x=h.width-16,c.y=4;var d=s.addChild(new pt(0,{sheet:e.resources.spritesheets.nm,prefix:"n",anchor:0}));if(d.scale.set(.6),d.text(99),d.x=h.width+7,d.y=h.height-d.height-2,s.x=-s.width/2,"normal"===n){var l=10;this.task.on("draw",(function(t){var e=parseInt(i.getTimer()),n=parseInt(100*i.getTimer())%100;if(h.text((e<10?"0":"")+e),d.text((n<10?"0":"")+n),e<10){if(e!=l){a.emit("countDown",e);var s=e>5?16733525:16711680;h.style({color:s}),d.style({color:s}),c.tint=s,function(t,e){var i,n="countDownAnim",a=0;o.task.clear(n),o.task.on(n,(function(r){i=(1-Math.cos(Math.PI*a*2))/2,t.scale.set(1+e*i),a<1?a=Math.min(1,a+.16666666666666666*r.delta):o.task.clear(n)}))}(r,e>5?.08:.165)}}else h.style({color:16777215}),d.style({color:16777215}),c.tint=16777215;l=e}))}else{var p=parseInt(i.getTimer()),u=parseInt(100*i.getTimer())%100;h.text((p<10?"0":"")+p),d.text((u<10?"0":"")+u);var m,f=0;this.task.on("main",(function(t){m=1-Math.pow(1-f,2),r.scale.set(1+.3*m),r.alpha=1-f,f<1?f=Math.min(1,f+.1*t.delta):(a.task.clear("main"),a.emit("destroy"))}))}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),_t=function(t){function e(e){var i=this;t.call(this);var n=e.resources.spritesheets.gameui;this.addChild(new Pixim.Container).addChild(new PIXI.Sprite(n.pause)),this.on("pointertap",(function(){i.emit("push")})),this.interactive=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),It=function(t){function e(e,i,n){t.call(this);var a=this,o=e.resources.spritesheets.gameui,r=this.addChild(new Pixim.Container).addChild(new PIXI.Sprite(0===i?o.resume:o.top));r.alpha=0;var s=0,h=1/n;this.task.on("main",(function(t){s<1?s=Math.min(1,s+h*t.delta):(c(),a.task.clear("main"))}));var c=function(){var t,e=0;a.task.on("enter",(function(n){t=2.4*e*(1-e)+e*e,r.x=i%2==0?340*t-340:240-240*t,r.alpha=Math.min(1,2*e),e<1?e=Math.min(1,e+.1*n.delta):a.task.clear("enter")}))};this.once("exit",(function(){var t,e=1;a.task.on("exit",(function(n){t=2.4*e*(1-e)+e*e,r.x=i%2==0?340*t-340:240-240*t,r.alpha=e,e>0?e=Math.max(0,e-.1*n.delta):(a.task.clear(),a.destroy())}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Pt=function(t){function e(e){var i=this;t.call(this);var n=this,a=e.resources.spritesheets.gameui,o=this.addChild(new Pixim.Container),r=o.addChild(new PIXI.Graphics);r.beginFill(0,1),r.drawRect(0,0,e.width,e.height),r.endFill(),r.alpha=0;var s=o.addChild(new PIXI.Sprite(a.pause));s.scale.set(2),s.alpha=0,s.x=e.width/2-s.width/2,s.visible=!1;var h=o.addChild(new It(e,0,2));h.x=e.width/2-h.width/2,h.y=e.height/2+110-h.height/2;var c=o.addChild(new It(e,1,4));c.x=e.width/2-c.width/2,c.y=e.height/2-110-c.height/2,this.once("exit",(function(t){h.emit("exit"),c.emit("exit"),i.interactivechildren=!1;var e,n=1;i.task.on("enter",(function(a){e=1-Math.pow(1-n,2),s.y=140+40*e,r.alpha=.6*n,s.alpha=n,n>0?n=Math.max(0,n-.1*a.delta):(i.task.clear(),i.emit(t))}))}));var d,l=0;this.task.on("enter",(function(t){d=1-Math.pow(1-l,2),s.y=140+40*d,r.alpha=.6*l,s.alpha=l,l<1?l=Math.min(1,l+.16666666666666666*t.delta):(i.task.clear("enter"),function(){var t=0;n.task.on("main",(function(e){t>=30&&(h.once("pointertap",(function(){n.emit("exit","pauseFinish")})),c.once("pointertap",(function(){n.emit("exit","gotoTitle")})),h.interactive=c.interactive=!0,n.task.clear("main")),t+=e.delta}))}())}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),bt=function(t){function e(e){var i=this;t.call(this);var n=this.addChild(new Pixim.Container),a=this,o=n.addChild(new PIXI.Sprite(e.resources.spritesheets.gra.g_rect));o.tint=0,o.alpha=.8,o.scale.set(2),o.x=o.y=-64,this.once("begin",(function(){var t=0;i.task.on("begin",(function(o){if(t>=30){var r=n.addChild(new kt(e));r.x=e.width/2,r.y=e.height/2-200,r.on("cdown",(function(t){a.emit("countDown",t)})),r.once("finish",(function(){a.emit("start")})),r.once("destroy",(function(){n.removeChild(r),a.emit("destroy")})),i.task.clear("begin")}t+=o.delta}))})),this.once("start",(function(){var t=0;i.task.on("start",(function(e){o.alpha=.8*(1-t),t<1?t=Math.min(1,t+.035*e.delta):i.task.clear()}))})),this.emit("begin")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),kt=function(t){function e(e){var i=this;t.call(this);var n=this.addChild(new Pixim.Container),a=this;this.once("countdown",(function(){var t=50,o=5;i.task.on("countdown",(function(r){var s;t>=50?(i.emit("cdown",o),o>0?(s=n.addChild(new Mt(e,o))).once("destroy",(function(){n.removeChild(s)})):(i.emit("finish"),(s=n.addChild(new St(e))).once("destroy",(function(){a.emit("destroy"),n.removeChild(s)}))),t=0,--o<0&&i.task.clear()):t+=r.delta}))})),this.emit("countdown")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Mt=function(t){function e(e,i){var n=this;t.call(this);var a=e.resources.spritesheets.nm,o=this.addChild(new Pixim.Container).addChild(new PIXI.Sprite(a["n"+i]));o.anchor.set(.5);var r=1.5;this.once("begin",(function(){var t,e=0;n.task.on("begin",(function(i){t=1-Math.pow(1-e,2),r=2-1*t,o.alpha=e,e<1?e=Math.min(1,e+.16666666666666666*i.delta):n.task.clear("begin")}))})),this.once("end",(function(){var t,e=0;n.task.on("end",(function(i){t=Math.pow(e,2),r=1-1*t,o.alpha=1-e,e<1?e=Math.min(1,e+.16666666666666666*i.delta):(n.task.clear(),n.emit("destroy"))}))})),this.once("main",(function(){var t=1.1,e=0,i=!1;n.task.on("main",(function(a){o.scale.set(r*t),t-=.004*a.delta,e+=a.delta,i||e>=50&&(n.emit("end"),i=!0)}))})),this.emit("main"),this.emit("begin")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),St=function(t){function e(e){var i=this;t.call(this);var n=e.resources.spritesheets.topresult,a=this.addChild(new Pixim.Container),o=a.addChild(new PIXI.Sprite(n.top_startlogo));o.anchor.set(.5);for(var r=1.5,s=a.addChild(new PIXI.Graphics),h=[],c=o.height/32,d=0;d<32;d++){var l=d%2==0?-1:1,p=1-(Math.cos(2*Math.PI*(d/32))+1)/2;h.push({x:o.width/2*l,y:c*d-o.height/2,height:c,width:o.width,way:l,xx:1,dtime:parseInt(6*p),counter:0})}this.on("closeline",(function(t){var e=0,n=!1;i.task.on("closeline",(function(t){s.clear();for(var c=0;c<h.length;c++){var d=h[c],l=(1-d.xx)*Math.pow(d.xx,2)+d.xx*(1-Math.pow(1-d.xx,2));d.xx>0&&(d.counter+=t.delta)>=d.dtime&&(d.xx=Math.max(0,d.xx-.0625*t.delta)),s.beginFill(16711680,d.xx),s.drawRect(d.x,d.y,d.width*l*(-1*d.way),d.height),s.endFill()}n||(a.mask=s,n=!0),r=1-.4*Math.pow(e,2),o.alpha=1-e,(e=Math.min(1,e+.06))>=1&&(i.task.clear(),i.emit("destroy"),s.destroy())}))})),this.once("shake",(function(){var t,e=0;i.task.on("shake",(function(n){t=(1-(Math.cos(2*Math.PI*e)+1)/2)*(1-e),r=1+.14*t,e<1?e=Math.min(1,e+.125*n.delta):i.task.clear("shake")}))})),this.once("begin",(function(){var t,e=0;i.task.on("begin",(function(n){t=1-Math.pow(1-e,2),r=2.5-1.5*t,o.alpha=e,e<1?e=Math.min(1,e+.125*n.delta):(i.task.clear("begin"),i.emit("shake"))}))})),this.once("main",(function(){var t=0,e=!1;i.task.on("main",(function(n){o.scale.set(r),.004*n.delta,t+=n.delta,e||t>=30&&(i.emit("closeline"),e=!0)}))})),this.emit("main"),this.emit("begin")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Xt=function(t){function e(e){var i=this;t.call(this);var n=e.resources.spritesheets.gameui,a=this.addChild(new Pixim.Container),o=a.addChild(new PIXI.Graphics);o.beginFill(0,1),o.drawRect(0,0,e.width,e.height),o.endFill(),o.alpha=0;var r=a.addChild(new PIXI.Sprite(n.timeup));r.x=e.width/2-r.width/2,this.on("begin",(function(){var t,e=0;i.task.on("begin",(function(n){t=e,r.alpha=e,r.y=400*t,o.alpha=.7*e,e<1?e=Math.min(1,e+.25*n.delta):(i.task.clear("begin"),i.emit("begin2"))}))})),this.on("begin2",(function(){var t,e=0;i.task.on("begin2",(function(n){t=Math.sin(Math.PI*(1+1*e)*e)*(1-e),r.y=400+32*t,e<1?e=Math.min(1,e+.125*n.delta):i.task.clear("begin2")}))})),this.emit("begin")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Dt=function(t){function e(e){var i=this;t.call(this);var n=e.resources.spritesheets.gameui,a=this.addChild(new Pixim.Container),o=a.addChild(new Pixim.Container),r=o.addChild(new PIXI.Sprite(n.youdead)),s=o.addChild(new PIXI.Sprite(n.youdead)),h=o.addChild(new PIXI.Sprite(n.youdead));a.x=e.width/2,a.y=e.height/2,s.alpha=r.alpha=.4,h.anchor.set(.5),s.anchor.set(.5),r.anchor.set(.5);var c=0;this.once("shake",(function(){var t,e,n=0;i.task.on("shake",(function(a){t=2*Math.PI*Math.random(),e=24*(1-n),o.x=e*Math.cos(t),o.y=e*Math.sin(t),n<1?n=Math.min(1,n+.07142857142857142*a.delta):i.task.clear("shake")}))})),this.on("main",(function(){var t,e,n=0,o=0;i.task.on("main",(function(d){c=4-3*o,t=2*Math.PI*Math.random(),h.x=.8*Math.cos(t),h.y=.8*Math.sin(t),t=2*Math.PI*Math.random(),s.x=6.2*Math.cos(t),s.y=6.2*Math.sin(t),t=2*Math.PI*Math.random(),r.x=6.2*Math.cos(t),r.y=6.2*Math.sin(t),e=1-Math.pow(1-n,2),a.scale.set((.8+.2*e)*c),a.alpha=1,n<1&&(i.emit("shake"),n=Math.min(1,n+.007142857142857143*d.delta)),o<1&&(o=Math.min(1,o+.25*d.delta))}))})),this.emit("main")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),jt=function(t){function e(e,i){t.call(this);var n=this,a=e.resources.spritesheets.bonusstage;n.addChild(new Pixim.Container);var o=n.addChild(new Pixim.Container),r=n.addChild(new Pixim.Container),s=function(t){var e=new PIXI.Sprite(t?a.key:a.key_02);return e.anchor.set(.5),e.scale.set(.7),e},h=[],c=i;this.getKeyStockNum=function(){return c};for(var d=0;d<3;d++){var l=o.addChild(s(!1)),p=r.addChild(s(!0));l.x=p.x=10+parseInt(l.width/2)+(l.width+6)*d,l.y=p.y=126,l.alpha=.7,p.alpha=i>d?1:.01,h.push(p)}this.on("setKeystock",(function(t){if(!(c>=h.length)){var e=h[c],i=e.x,a=e.y,r=c,d=yt.tween({target:n,name:"stockAnime"+r,time:32,main:function(n){e.alpha=1;var r=n;e.x=(1-r)*t.x+r*i,e.y=(1-r)*t.y+r*a;var h=.7*(1+4*Math.sin(Math.PI*r));e.scale.x=h*((Math.cos(Math.PI*r*8)+1)/2),e.scale.y=h;var c=o.addChild(function(t,e,i,n){var a=new Pixim.Container;a.addChild(s(!0)),a.x=t,a.y=e,a.blendMode=PIXI.BLEND_MODES.ADD;var o=yt.tween({target:a,name:"afterAnime",time:16,main:function(t){a.alpha=.7*(1-t),a.scale.set(i,n)},finish:function(){a.removeChildren(),a.task.clear(),a.emit("pop")}});return o(),a}(e.x,e.y,e.scale.x,e.scale.y));c.once("pop",(function(){c.task.clear(),c.parent.removeChild(c)}))},finish:function(){for(var t=0;t<3;t++)u(e.x,e.y,.3+.22*t);l()}}),l=yt.tween({target:n,name:"stockAnime"+r,time:8,main:function(t){e.scale.set(.7*(1-Math.sin(Math.PI*t*2)*(1-t)*.4))},finish:function(){c>=3?n.emit("stockMax"):n.emit("maxAnimEnd")}});d(),c++}}));var u=function(t,e,i){var n=r.addChild(new Pixim.Container);n.x=t,n.y=e;var a=n.addChild(s(!0));a.blendMode=PIXI.BLEND_MODES.ADD;var o=yt.tween({target:n,name:"getAffAnime",time:34,main:function(t){var e=1-Math.pow(1-t,2);a.scale.set(.7+i*e),a.alpha=.5*(1-t)},finish:function(){}});o()},m=0,f=function(){var t=yt.tween({target:n,name:"getFlashTask",time:6,main:function(t){},finish:function(){for(var t=h[m],i=0;i<2;i++)u(t.x,t.y,.3+.22*i);++m<h.length?f():(m=0,n.emit("logoChange"),e())}}),e=yt.tween({target:n,name:"getFlashTask",time:36,main:function(t){},finish:function(){for(var t=0;t<h.length;t++)for(var e=0;e<3;e++)u(h[t].x,h[t].y,.3+.22*e);n.emit("maxAnimEnd")}});t()};n.once("stockMaxAnim",(function(){f()}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Ot=function(t){function e(e){t.call(this);var i=this,n=e.resources.spritesheets.bonusstage,a=i.addChild(new Pixim.Container),o=a.addChild(new Pixim.Container),r=o.addChild(new PIXI.Sprite(e.resources.spritesheets.shc.popupback));r.scale.y=.92;var s=o.addChild(new PIXI.Sprite(n.bonus_title));s.x=parseInt(r.width/2-s.width/2),s.y=56;var h=o.addChild(new PIXI.Sprite(n.bonus_text_1)),c=o.addChild(new PIXI.Sprite(n.bonus_text_2));h.x=parseInt(r.width/2-h.width/2),c.x=parseInt(r.width/2-c.width/2),h.y=264,c.y=h.y+h.height+40;for(var d=o.addChild(new Pixim.Container),l=[],p=0;p<3;p++){var u=d.addChild(new PIXI.Sprite(n.key_02)),m=d.addChild(new PIXI.Sprite(n.key));u.x=m.x=u.width/2+(u.width+24)*p,u.anchor.set(.5),m.anchor.set(.5),m.alpha=0,l.push(m)}d.x=r.width/2-d.width/2,d.y=194,o.x=-parseInt(o.width/2),o.y=-parseInt(o.height/2),a.x=parseInt(a.width/2),a.y=parseInt(a.height/2),a.alpha=0;var f,y,v=0,x=function(){var t=l[v],e=yt.tween({target:i,name:"keyPushAnime",time:10,main:function(e){var i=Math.pow(e,2);t.scale.set(4-3*i),t.alpha=e},finish:function(){for(var e=0;e<4;e++)w(.2+.22*e,t.x,t.y);n()}}),n=yt.tween({target:i,name:"keyPushAnime",time:10,main:function(t){},finish:function(){++v<l.length?x():(v=0,C())}});e()},w=function(t,e,i){var a=d.addChild(new Pixim.Container),o=a.addChild(new PIXI.Sprite(n.key));o.anchor.set(.5),o.alpha=.5,o.x=e,o.y=i;var r=yt.tween({target:a,name:"keyPushAnime",time:32,main:function(e){var i=1-Math.pow(1-e,2);o.alpha=.5*(1-e),o.scale.set(1+t*i)},finish:function(){}});r()},C=function(){var t=o.addChild(new PIXI.Sprite(e.resources.spritesheets.topresult.okbutton));t.alpha=0,t.anchor.set(.5),t.x=r.width/2,t.y=r.height-t.height/2-60,yt.tween({target:i,name:"okButtonAnime",time:14,main:function(e){var i=3.4*e*(1-e)+e*e;t.scale.set(i),t.alpha=e},finish:function(){t.interactive=!0,t.once("pointertap",(function(){yt.tween({target:i,name:"endAnime",time:16,main:function(t){var e=(1-t)*(1+3.2*t);a.scale.set(.5+.5*e),a.alpha=1-t},finish:function(){i.emit("pop")}})()}))}})()};f=yt.tween({target:i,name:"beginAnime",time:40,main:function(t){},finish:function(){y()}}),y=yt.tween({target:i,name:"beginAnime",time:16,main:function(t){var e=3.4*t*(1-t)+t*t;a.scale.set(.5+.5*e),a.alpha=t},finish:function(){x()}}),f()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),At=function(t){function e(e){t.call(this);var i=this,n=e.resources.spritesheets.bonusstage,a=this.addChild(new Pixim.Container).addChild(new PIXI.Sprite(n.bonusstartlogo));a.anchor.set(.5),a.alpha=0;var o=!1,r=function(){var t=Math.random()*Math.PI*2;a.x=.8*Math.cos(t),a.y=.8*Math.sin(t),o?(a.tint=16777164,o=!1):(a.tint=16777215,o=!0),yt.tween({target:i,name:"shaketask",time:2,main:function(t){},finish:function(){r()}})()};yt.tween({target:i,name:"chLogo",time:14,main:function(t){a.alpha=t},finish:function(){r()}})()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Tt=function(t){function e(e,i){var n=this;t.call(this);var a=Math.floor(3*Math.random()),o=this.addChild(new Pixim.Container).addChild(new Pixim.Container);o.alpha=0;var r=o.addChild(new PIXI.Sprite(e.resources.spritesheets.shc.popupback));r.scale.y=.5,r.x=-Math.floor(r.width/2),r.y=-Math.floor(r.height/2),r.alpha=.001;var s=o.addChild(new PIXI.Sprite(e.resources.images["ui_StartWithThisItem.png"]));s.x=-Math.floor(s.width/2),s.y=r.y+32;var h=o.addChild(new PIXI.Sprite(e.resources.spritesheets.items[["box0","box1","box3"][a]]));h.x=-Math.floor(h.width/2),h.y=s.y+88-h.height/2;var c=o.addChild(new PIXI.Container),d=c.addChild(new PIXI.Container),l=d.addChild(new PIXI.Sprite(e.resources.spritesheets.topresult.res_playlogo)),p=d.addChild(new PIXI.Sprite(e.resources.images["ui_useButton.png"]));p.x=l.width+8,l.y=.5*-l.height,p.y=.5*-p.height,d.x=.5*-d.width,c.y=r.y+204,c.interactive=!0,c.on("pointertap",(function(){n.emit("fin",{id:a})}));var u=function(){yt.tween({target:n,name:"loopAnimeA",time:90,main:function(t){var e=1-.5*(Math.cos(2*Math.PI*t)+1);c.scale.set(1-.1*e)},finish:function(){u()}})()};u();this.once("endAnim",(function(){c.interactive=!1,yt.tween({target:n,name:"endAnime",time:16,main:function(t){o.alpha=1-t},finish:function(){n.emit("pop")}})()})),yt.tween({target:n,name:"beginAnime",time:16,main:function(t){o.alpha=Math.min(1,3*t)},finish:function(){c.interactive=!0}})()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),zt=function(t){function e(e,i,n,a,o,r,s,h,c,d,l,p){var u=this;t.call(this);var m=this,f=0,y=!1,v=this.addChild(new Pixim.Container),x=function(t,i){var n=0,a=1/t,o=m.addChild(new PIXI.Graphics);o.beginFill(0,1),o.drawRect(0,0,e.width,e.height),o.endFill(),o.alpha=0,m.task.on("blackOut",(function(t){o.alpha=n,n<1?n=Math.min(1,n+a*t.delta):(m.removeChild(o),m.task.clear("blackOut"),i())}))},w=v.addChild(new vt(e,!0,i,a,o.skinID,s,h,c,d,l,f));w.scale.set(2.5);var C=this.addChild(new jt(e,r));w.on("setKeystock",(function(t){C.emit("setKeystock",{x:t.x,y:t.y})})),s&&(C.visible=!1);var g=v.addChild(new xt(e,s));g.x=g.y=8;var _=v.addChild(new Ct(e,s?0:o.value[0],s?30:60)),I=v.addChild(new gt(e,_,"normal"));I.x=e.width/2,I.on("countDown",(function(t){a.play({name:"se_countdown"})}));var P=v.addChild(new _t(e));P.x=e.width-P.width-8,P.y=e.height-P.height-8,P.interactive=!1,P.on("push",(function(){var t=m.addChild(new Pt(e));v.taskEnabledChildren=!1,v.interactiveChildren=!1,t.once("pauseFinish",(function(){v.taskEnabledChildren=!0,v.interactiveChildren=!0,t.task.clear(),t.destroy()})),t.once("gotoTitle",(function(){t.task.clear(),t.destroy(),a.fadeStop({name:"bgm_game",time:5}),x(10,(function(){m.emit("gotoTitle")}))}))})),w.on("addTime",(function(t){_.setTimer(Math.min(99,_.getTimer()+t))})),w.on("vanishAdd",(function(t){g.emit("addVanishCount",t)})),w.on("coinAdd",(function(t){g.emit("addCoinCount",t)})),w.on("gameOver",(function(t){y||(y=!0,m.emit("gameoverScene"))})),w.on("timeAddEffect",(function(t){var i=v.addChild(new gt(e,_,"effect"));i.x=e.width/2,i.once("destroy",(function(){v.removeChild(i)}))})),_.on("timeOver",(function(){y||(y=!0,m.emit("timeoverScene"))})),this.once("gameoverScene",(function(){_.task.clear(),P.interactive=!1,w.task.clear("scroll");var t=w.addChild(new PIXI.Graphics);t.beginFill(16711680,1),t.drawRect(0,0,e.width,e.height),t.endFill(),t.blendMode=PIXI.BLEND_MODES.MULTIPLY,t.alpha=0;var i,n=0,o=0;a.fadeStop({name:"bgm_game",time:10}),a.play({name:"se_gameover"}),u.task.on("gameoverScene",(function(r){w.interactiveChildren=w.interactive=!1,i=.6*((1-n)*Math.pow(n,2)+n*(1-Math.pow(1-n,2))),w.scale.set(1+2.5*i),w.x=-560*i,w.y=-890*i,n>.6&&(t.alpha=(n-.6)/.4*.6),n<1?n=Math.min(1,n+.015625*r.delta):(u.addChild(new Dt(e)),a.play({name:"se_start"}),a.play({name:"se_shootenep"}),u.task.clear("gameoverScene"),m.task.on("gotoResult",(function(t){o>=220&&(x(30,(function(){w.emit("allSoundStop"),m.emit("gameOver",{keyCount:C.getKeyStockNum(),alivetime:_.getAliveTime(),istimeover:!1,score:g.getVanishCount(),coin:g.getCoinCount()})})),m.task.clear("gotoResult")),o+=t.delta})))}))})),this.once("timeoverScene",(function(){w.interactiveChildren=w.interactive=!1,a.play({name:"se_start"}),w.task.clear("scroll"),u.addChild(new Xt(e)),P.interactive=!1;var t=0;m.task.on("gotoResult",(function(e){t>=120&&(a.fadeStop({name:"bgm_game",time:30}),x(30,(function(){a.emit("allSoundStop"),m.emit("gameOver",{keyCount:C.getKeyStockNum(),alivetime:_.getAliveTime(),istimeover:!0,score:g.getVanishCount(),coin:g.getCoinCount()})})),m.task.clear("gotoResult")),t+=e.delta}))})),w.interactiveChildren=w.interactive=!1;var b=this.addChild(new bt(e));b.y=s?12:-48;var k=null;s||((k=this.addChild(new Tt(e,f))).x=e.width/2,k.y=410,k.once("pop",(function(){k.task.clear(),k.removeChildren(),u.removeChild(k)})),k.on("fin",(function(t){b.taskEnabledChildren=b.interactiveChildren=!1,k.interactive=k.interactiveChildren=!1,u.emit("playRewordAds",{loadfin:function(){k.emit("pop")},clb:function(e){b.taskEnabledChildren=b.interactiveChildren=!0,e?(k.emit("pop"),f=t.id,u.emit("setPosCoin",-5e3),w.emit("enableInitItemPlay",f)):k.interactive=k.interactiveChildren=!0}})})));var M=null;s&&((M=this.addChild(new At(e))).x=e.width/2,M.y=140),b.on("countDown",(function(t){a.play({name:"se_countdown",volume:.3+.7*(1-t/8)})})),b.once("destroy",(function(){w.interactiveChildren=w.interactive=!0,b.parent.removeChild(b),w.emit("gameStart",!1),_.emit("startTimer"),a.play({name:"bgm_game",isLoop:!0,volume:1}),a.play({name:"se_tankstart"}),P.interactive=!0})),b.once("start",(function(){k&&k.emit("endAnim"),a.play({name:"se_start"}),X.emit("end"),M&&(M.task.clear(),M.parent.removeChild(M))}));var X=this.addChild(new S(e));X.y=148,X.once("destroy",(function(){X.parent.removeChild(X),X=null}));var D=this.addChild(new PIXI.Graphics);D.beginFill(0,1),D.drawRect(0,0,e.width,e.height),D.endFill();var j,O=0;this.task.on("begin",(function(t){j=(1-O)*Math.pow(O,2)+O*(1-Math.pow(1-O,2)),w.scale.set(3.5-2.5*j),w.x=-560*(1-j),w.y=-890*(1-j),D.alpha=Math.max(0,1-4*O),O<1?O=Math.min(1,O+.00909090909090909*t.delta):(D.parent.removeChild(D),u.task.clear("begin"))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Et=function(t){function e(e,i,n,a,o,r,s){var h=this;t.call(this);var c=e.resources.spritesheets.topresult;e.resources.spritesheets.mis;var d=e.resources.spritesheets.skin,l=this.addChild(new Pixim.Container),p=l.addChild(new Pixim.Container),u=l.addChild(new Pixim.Container),m=this.addChild(new Pixim.Container),f=this;this._root=m,this.on("upDateDetailData",(function(t){O.text(t.best),A.text(t.coin);for(var e=0;e<3;e++)B[e].emit("setData",{canLevelup:t.traning[e].need>t.coin,traning:t.traning[e]})}));var y=p.addChild(new vt(e,!1,[{ratio:1},{ratio:1},{ratio:1}],i,0,n,!0,null,null,0));f.on("changePlayerSkin",(function(t){y.emit("changePlayerSkin",t)}));var v=p.addChild(new PIXI.Sprite(c.top_back));v.visible=!1;var x=l.addChild(new PIXI.Graphics);x.beginFill(16777215,1),x.drawRect(0,0,e.width,e.height),x.endFill(),x.visible=!1;var w=function(){x.visible=!0;var t=0;x.alpha=.8,f.task.clear("flash"),f.task.on("flash",(function(e){x.alpha=.8*(1-t),t<1?t=Math.min(1,t+.05*e.delta):(x.visible=!1,f.task.clear("flash"))}))},C=this.addChild(new PIXI.Text("version:"+e.vars.env.version,{fill:16777215,fontSize:14}));C.x=e.width-C.width;var g=u.addChild(new Pixim.Container),_=g.addChild(new PIXI.Sprite(d.btn_mission));_.x=8,_.y=180,_.interactive=!0,_.on("pointertap",(function(){f.emit("missionConf")}));var I=u.addChild(new Pixim.Container),P=I.addChild(new PIXI.Sprite(d.btn_share));P.x=8,P.y=120,P.interactive=!0,P.on("pointertap",(function(){f.emit("callShareDiag")})),I.visible=!1;var b=u.addChild(new Pixim.Container),k=b.addChild(new PIXI.Sprite(d.btn_carselect));k.x=8,k.y=240,k.interactive=!0,k.on("pointertap",(function(){f.emit("callSkinSelect")}));var M=m.addChild(new jt(e,o?Math.max(a-1,0):a));M.once("logoChange",(function(){E.emit("changeLogo"),E.interactive=E.interactiveChildren=!1})),this.once("keyStockAnim",(function(){M.emit("setKeystock",{x:e.width/2,y:e.height/2-80})})),M.once("stockMax",(function(){i.play({name:"se_keylight"}),M.emit("stockMaxAnim")})),M.once("maxAnimEnd",(function(){f.emit("maxAnimEnd")})),this.shortcutIcon=null,this.on("iconVisible",(function(t){t||(l.interactive=l.interactiveChildren=!1),y.emit("moveCar",!t);var e=yt.tween({target:f,name:"iconInvisibleTask",time:10,main:function(e){if(t){var i=1-Math.pow(1-e,2);I.x=-220*(1-i),g.x=-220*(1-i),b.x=-220*(1-i),R.y=260*(1-i),h.shortcutIcon&&(h.shortcutIcon.x=220*(1-i)),E.alpha=e,T&&(T.alpha=e)}else{var n=Math.pow(e,2);I.x=-220*n,g.x=-220*n,b.x=-220*n,R.y=260*n,h.shortcutIcon&&(h.shortcutIcon.x=220*n),E.alpha=1-e,T&&(T.alpha=1-e)}},finish:function(){t&&(l.interactive=l.interactiveChildren=!0)}});e()}));var S=l.addChild(new Pixim.Container);S.x=e.width/2,S.y=146,S.visible=!1;var X=S.addChild(new PIXI.Sprite(c.top_leaderlogo));X.x=-X.width/2,X.on("pointertap",(function(){f.emit("gotoLeaderBoard")})),X.interactive=!0;var D=m.addChild(new PIXI.Sprite(c.res_bestlogo));D.scale.set(.8),D.x=8,D.y=8;var j=m.addChild(new PIXI.Sprite(c.res_coin));j.scale.set(D.height/j.height*1.2),j.x=D.x+D.width/2-j.width/2,j.y=D.y+D.height+8;var O=m.addChild(new pt(8888888,{sheet:e.resources.spritesheets.nm,prefix:"n",anchor:0})),A=m.addChild(new pt(9999999,{sheet:e.resources.spritesheets.nm,prefix:"n",anchor:0}));O.scale.set(D.height/A.height),A.scale.set(O.scale.x),O.x=D.x+D.width+6,O.y=D.y,A.x=O.x,A.y=j.y+2,this.on("coinFlash",(function(){var t=l.addChild(new PIXI.Sprite(e.resources.spritesheets.day["dayly_008.png"]));t.anchor.set(.5),t.x=A.x+A.width/2,t.y=A.y+16;var i=yt.tween({target:f,name:"endanmA",time:10,main:function(e){var i=Math.pow(e,2);t.scale.x=1.5+2.2*i,t.scale.y=1.5*(1-i),t.alpha=1-i},finish:function(){}});i()}));var T=null,z=function(t){var n=u.addChild(new Yt(e,t));T=n,n.x=parseInt(e.width/2),n.y=490,n.once("flash",(function(){i.play({name:"se_start"}),w()})),n.once("clickf",(function(){f.interactiveChildren=!1})),n.once("click",(function(){f.emit("gotoNextPhase"),i.fadeStop({name:"bgm_top",time:42}),i.play({name:"se_start"})}))},E=u.addChild(new Rt(e));E.x=e.width/2,E.y=490,this.once("hardmode",(function(){E.emit("hardmode")})),!o&&n?(z(!1),E.visible=!1):(E.once("clickf",(function(){f.interactiveChildren=!1})),E.once("click",(function(){f.emit("gotoNextPhase"),i.fadeStop({name:"bgm_top",time:42}),i.play({name:"se_start"})})),E.once("callAnotherLogo",(function(){E.interactive=E.interactiveChildren=!1,z(!0)})));var F=null;this.on("traningeffect",(function(){var t=0,i=0;w(),null!==F&&F.emit("destroy");for(var n=function(t){var i=l.addChild(new Wt(e,2+.5*t));i.x=e.width/2,i.y=e.height/2-90+10,i.once("destroy",(function(){i.parent.removeChild(i),i=null})),i.scale.set(.15)},a=0;a<1;a++)n(a);var o=l.addChild(new Bt(e));o.x=e.width/2,o.y=e.height/2-90-64,o.once("destroy",(function(){o.parent.removeChild(o),o=null})),F=o,h.task.clear("traningeffect"),h.task.on("traningeffect",(function(n){if(parseInt(t)%1==0){var a=l.addChild(new Lt(e,{scale:.6+2*Math.random()}));a.x=e.width/2-42+84*Math.random(),a.y=e.height/2-90+64,a.once("destroy",(function(){a.parent.removeChild(a),a=null})),++i>=12&&h.task.clear("traningeffect")}t+=n.delta}))}));for(var R=u.addChild(new Pixim.Container),L=R.addChild(new Pixim.Container),B=[],W=0;W<3;W++){var Y=L.addChild(new Ft(e,W));Y.x=150*W,B.push(Y),Y.emit("upDate"),Y.on("clickDetail",(function(t){i.play({name:"se_item"}),f.emit("traningeffect"),f.emit("upDateTraningDatas",t)}))}L.x=L.children[0].width/2-2,L.y=660,this.once("begin",(function(){var t=0,i=h.addChild(new PIXI.Graphics);i.beginFill(0,1),i.drawRect(0,0,e.width,e.height),i.endFill(),i.alpha=1,h.task.on("begin",(function(e){i.alpha=1-t,t<1?t=Math.min(1,t+.1*e.delta):(i.parent.removeChild(i),h.task.clear("begin"))}))})),this.emit("begin"),this.once("gotoNextPhase",(function(){v.visible=!0,y.emit("backinVisible");var t,n=0,a=f.addChild(new PIXI.Graphics);a.beginFill(0,1),a.drawRect(0,0,e.width,e.height),a.endFill(),a.alpha=0,h.task.on("fadeout",(function(e){t=Math.pow(n,2),y.scale.set(1+.85*t),y.rotation=-.6*t,y.x=-500*t,y.y=80*t,a.alpha=t,n<1?n=Math.min(1,n+.02*e.delta):(h.task.clear(),h.emit("gotoGameScene"),i.allStop())}))})),y.emit("setCarY",120),u.alpha=m.alpha=0,u.visible=m.visible=!1;var G=this.addChild(new Pixim.Container),H=G.addChild((new PIXI.Graphics).beginFill(16711680,.001).drawRect(0,0,e.width,e.height).endFill()),N=G.addChild(new PIXI.Sprite(e.resources.images.toptoscreentext));N.anchor.set(.5),N.scale.set(.64),N.x=.5*e.width,N.y=740;var U=G.addChild(new PIXI.Sprite(e.resources.images.toplogo));U.anchor.set(.5),U.scale.set(.72),U.x=.5*e.width,U.y=136;var V=G.addChild((new PIXI.Graphics).beginFill(0,1).drawRect(0,0,e.width,e.height).endFill());V.alpha=1;var $=0;this.task.on("intoTopSceneAnime2",(function(t){U.rotation=.02*Math.cos(.08*$);var e=.98+.02*Math.sin(.08*$);U.scale.set(.72*e),$+=.5*t.delta}));var K=yt.tween({target:this,name:"intoTopSceneAnime",time:90,main:function(t){var e=.5*(1-Math.cos(t*Math.PI*4));N.alpha=.4+.6*e},finish:function(){K()}});K(),yt.tween({target:this,name:"screenFadeinAnime",time:30,main:function(t){V.alpha=1-t},finish:function(){V.destroy(),H.interactive=!0}})(),H.once("pointertap",(function(){var t=function(){h.task.clear("intoTopSceneAnime"),u.visible=m.visible=!0,y.emit("moveCarEX",0),i.play({name:"bgm_top",isLoop:!0,volume:1,isStop:!0}),yt.tween({target:h,name:"gotoTopAnime",time:14,main:function(t){G.alpha=1-t,N.scale.x=.64*(1+3*t),N.scale.y=.64*(1-t),u.alpha=m.alpha=t},finish:function(){G.destroy(),h.emit("callNotices")}})()};s?e.vars.api.callAsync("startGame").then((function(){t()})):t()}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Ft=function(t){function e(e,i){var n=this;t.call(this);var a=e.resources.spritesheets.topresult,o=e.resources.spritesheets.items,r=this.addChild(new Pixim.Container),s=this,h=[{icon:o.name3,logo:a.top_timelogo,color:16516357,unit:a.top_sec,sicon:o.box3,wicn:o.bw3,ys:0},{icon:o.name0,logo:a.top_sizelogo,color:16549637,unit:a.top_m,sicon:o.box0,wicn:o.bw0,ys:0},{icon:o.name1,logo:a.top_fireratelogo,color:16645378,unit:a.top_sec,sicon:o.box1,wicn:o.bw1,ys:14}],c=r.addChild(new PIXI.Container),d=c.addChild(new PIXI.Sprite(a.top_arw));d.y=138,d.visible=!1;var l=c.addChild(new PIXI.Sprite(a.top_traningback));l.tint=h[i].color;var p=c.addChild(new PIXI.Sprite(a.top_traningback));p.tint=h[i].color,p.scale.y=-.6,p.y=280,p.visible=!1,d.x=l.width/2-d.width/2,c.x=-c.width/2,c.y=-c.height/2+20,c.alpha=.6;var u=r.addChild(new PIXI.Sprite(h[i].sicon));u.anchor.set(.5),u.x=28+h[i].ys,u.y=-42;var m=r.addChild(new PIXI.Sprite(h[i].wicn));m.anchor.set(.5),m.x=u.x,m.y=u.y,m.alpha=0;var f=r.addChild(new PIXI.Sprite(a.top_leveluplogo));f.x=-f.width/2,f.y=62;var y=r.addChild(new Pixim.Container);y.scale.set(.4);var v=y.addChild(new PIXI.Sprite(a.res_coin));v.y=-v.height/2;var x=y.addChild(new pt(999,{sheet:e.resources.spritesheets.nm,prefix:"n",anchor:0}));x.scale.set(.8),x.x=v.width+8,x.y=-x.height/2,y.x=-y.width/2,y.y=v.height+4+46;var w=r.addChild(new PIXI.Sprite(h[i].logo));w.x=-w.width/2,w.y=-14;var C=r.addChild(new PIXI.Container),g=function(t){C.removeChildren();var n=C.addChild(new pt(t.toFixed(1)+(2===i?"a":""),{sheet:e.resources.spritesheets.nm,prefix:"n",anchor:0})),a=C.addChild(new PIXI.Sprite(h[i].unit));n.scale.set(a.height/n.height*1.52),a.x=n.width,a.y=-a.height/2+1+2,n.y=-n.height/2,C.x=-C.width/2,C.y=30};g(99);var _=r.addChild(new PIXI.Container),I=function(t){_.removeChildren();var n=_.addChild(new pt(t.toFixed(1)+(2===i?"a":""),{sheet:e.resources.spritesheets.nm,prefix:"n",anchor:0})),a=_.addChild(new PIXI.Sprite(h[i].unit));n.scale.set(a.height/n.height*1.2),a.x=n.width,a.y=-a.height/2+1,n.y=-n.height/2,_.scale.set(1.4),_.x=-_.width/2,_.y=118};I(99),_.visible=!1;var P=r.addChild(new Pixim.Container),b=P.addChild(new PIXI.Sprite(h[i].icon));b.tint=0,b.alpha=.3,b.scale.set(.6),b.x=l.width/2-b.width/2,b.y=-b.height/2,b.visible=!1;var k=P.addChild(new PIXI.Sprite(a.top_levellogo));k.x=6,k.y=38;var M=P.addChild(new pt(99,{sheet:e.resources.spritesheets.nm,prefix:"n",anchor:0}));M.scale.set(.32),M.x=k.x+k.width+3,M.y=k.y-Math.abs(M.height-k.height)/2,P.x=-c.width/2,P.y=-c.height/2+40-52;var S,X=0,D=!1,j=!1,O=1,A=0,T=3,z=0;this.task.on("main",(function(t){j||(S=Math.abs(Math.sin(Math.PI*(2+O*O*1)*O))*(1-O*O),f.y=62-10*S*z,O<1&&(O=Math.min(1,O+.03*t.delta)),T>=80?T=O=0:T+=t.delta,c.alpha=(.4+(Math.cos(.1*A)+1)/2*.35)*z,A+=t.delta,f.alpha=1-.5*(1-z),0===X?z=Math.min(1,z+.1*t.delta):1===X&&(c.alpha=.24,D?(f.y=62,f.alpha=1,y.visible=!1,f.texture=a.top_levelmax,f.scale.set(.8),f.x=-f.width/2,f.y=52,_.removeChildren()):(f.alpha=.5,f.y=62,f.scale.set(.7),f.x=-f.width/2),j=!0,X=2))})),this.on("clickAnime",(function(){var t,e=0,i="clickAnime";n.task.clear(i),n.task.on(i,(function(a){t=1-(Math.cos(2*Math.PI*e)+1)/2,r.y=24*t,m.alpha=1-e,e<1?e=Math.min(1,e+.1*a.delta):n.task.clear(i)}))}));var E=r.addChild(new PIXI.Graphics);E.beginFill(16777215,.008),E.drawRect(0,0,r.width,r.height),E.endFill(),E.x=-E.width/2,E.y=-E.height/2,E.interactive=!0,E.on("pointertap",(function(){0===X&&(s.emit("clickAnime"),s.emit("clickDetail",i))})),this.on("setData",(function(t){D||(x.text(t.traning.need),M.text(t.traning.level+1),g(t.traning.value),I(t.traning.afvalue),t.canLevelup?X=1:(j=!1,X=0,f.scale.set(1),f.x=-f.width/2),t.traning.isMax&&(X=1,D=!0))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Rt=function(t){function e(e){var i=this;t.call(this);var n=this,a=e.resources.spritesheets.topresult,o=this.addChild(new Pixim.Container),r=o.addChild(new PIXI.Sprite(e.resources.images["subhardmode.png"]));r.anchor.set(.5),r.y=-64,r.visible=!1;var s=o.addChild(new PIXI.Sprite(a.top_startlogo));s.anchor.set(.5);var h=1,c=0;this.once("pointertap",(function(){var t,e=0;i.emit("clickf"),i.task.on("exit",(function(n){h=t=(1-e)*(1+e*e*4)+e*(1-e),c=.4*(1-t),o.alpha=Math.min(1,t),e>.12&&i.emit("click"),e<1?e=Math.min(1,e+.03333333333333333*n.delta):i.task.clear()}))})),this.interactive=!0;var d=0;this.task.on("main",(function(t){r.rotation=s.rotation=.02*Math.cos(.08*d)+c;var e=(.98+.02*Math.sin(.08*d))*h;s.scale.set(e),r.scale.set(.5*e),d+=t.delta})),this.once("hardmode",(function(){r.visible=!0})),this.once("changeLogo",(function(){var t=yt.tween({target:n,name:"chLogo",time:22,main:function(t){o.alpha=1-t},finish:function(){n.emit("callAnotherLogo")}});t()}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Lt=function(t){function e(e,i){var n=this;t.call(this);var a=e.resources.spritesheets.effects,o=this.addChild(new Pixim.Container).addChild(new PIXI.Sprite(a.et7));o.anchor.set(.5),o.scale.set(i.scale),o.rotation=2*Math.PI*Math.random(),o.tint=16777101;var r,s=0,h=-24*i.scale,c=-24-50*i.scale;this.task.on("main",(function(t){r=1-Math.pow(1-s,2),o.y=h+c*r,o.scale.set(i.scale*(.7*(1-s))*.1),o.alpha=1-s,s<1?s=Math.min(1,s+.07142857142857142*t.delta):(n.task.clear(),n.emit("destroy"))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Bt=function(t){function e(e){var i=this;t.call(this);var n=e.resources.spritesheets.topresult,a=this.addChild(new Pixim.Container),o=a.addChild(new PIXI.Sprite(n.top_leveluplogo));o.anchor.set(.5),o.alpha=0,this.task.on("main",(function(t){a.y-=.18*t.delta})),this.once("begin",(function(){var t,e=0,n=0;i.task.on("begin",(function(a){t=1-Math.pow(1-e,2),o.y=32*(1-t),o.alpha=e,e<1&&(e=Math.min(1,e+.1*a.delta)),n>=28&&(i.task.clear("begin"),i.emit("end")),n+=a.delta}))})),this.once("end",(function(){var t,e=0,n=o.y,a=o.alpha;i.task.on("end",(function(r){t=Math.pow(e,2),o.y=n-32*t,o.alpha=a*(1-e),e<1?e=Math.min(1,e+.1*r.delta):(i.task.clear(),i.emit("destroy"))}))})),this.emit("begin")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Wt=function(t){function e(e,i){var n=this;t.call(this);var a=e.resources.spritesheets.effects,o=this.addChild(new Pixim.Container).addChild(new PIXI.Sprite(a.et2));o.anchor.set(.5),o.alpha=0;var r,s=0;this.task.on("begin",(function(t){r=1-Math.pow(1-s,2),o.scale.set(2+i*r),o.alpha=.88*(1-s),s<1?s=Math.min(1,s+.08333333333333333*t.delta):(n.task.clear(),n.emit("destroy"))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Yt=function(t){function e(e,i){var n=this;t.call(this);var a=this,o=e.resources.spritesheets.bonusstage,r=this.addChild(new Pixim.Container).addChild(new PIXI.Sprite(o.bonusstartlogo));r.anchor.set(.5),r.alpha=0;var s,h,c=function(t){var e=a.addChild(new Pixim.Container),i=e.addChild(new PIXI.Sprite(o.bonusstartlogo));i.anchor.set(.5),l(),yt.tween({target:e,name:"aftertask",time:32,main:function(e){var n=1-Math.pow(1-e,2);i.scale.set(1+t*n),i.alpha=.5*(1-e)},finish:function(){}})()},d=!1,l=function(){var t=Math.random()*Math.PI*2;r.x=.8*Math.cos(t),r.y=.8*Math.sin(t),d?(r.tint=16777164,d=!1):(r.tint=16777215,d=!0),yt.tween({target:a,name:"shaketask",time:2,main:function(t){},finish:function(){l()}})()};this.once("pointertap",(function(){var t,e=0,i=!0;n.emit("clickf"),n.task.on("exit",(function(a){t=(1-e)*(1+e*e*4)+e*(1-e),r.scale.set(t),r.alpha=Math.min(1,t),e>.12&&(i&&n.emit("click"),i=!1),e<1?e=Math.min(1,e+.03333333333333333*a.delta):n.task.clear()}))})),this.interactive=!0,i?(s=yt.tween({target:a,name:"chLogo",time:14,main:function(t){var e=Math.pow(t,2);r.scale.set(3-2*e),r.alpha=t},finish:function(){a.emit("flash");for(var t=0;t<2;t++)c(.2+.2*t);h()}}),h=yt.tween({target:a,name:"chLogo",time:14,main:function(t){r.scale.set(1-Math.sin(Math.PI*t*2)*(1-t)*.44)},finish:function(){}}),s()):(r.alpha=1,l())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Gt=function(t){function e(e){var i=this;t.call(this),e.resources.spritesheets.topresult;var n=this.addChild(new Pixim.Container);this.visible=!1,n.addChild(new PIXI.Sprite(e.resources.spritesheets.skin.btn_share)),this.once("beginAnim",(function(){var t,e="beginAnim",a=0;n.x=-n.width/2,n.y=-n.height/2,i.task.on(e,(function(n){t=2.8*a*(1-a)+a*a,i.scale.set(2-1*t),i.alpha=a,a<1?a=Math.min(1,a+.07142857142857142*n.delta):(i.emit("finish"),i.task.clear(e))}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Ht=function(t){function e(e,i,n){var a=this;t.call(this);var o=e.resources.spritesheets.topresult,r=i.coin,s=this,h=this.addChild(new Pixim.Container),c=this.addChild(new Pixim.Container),d=this.addChild(new Pixim.Container),l=this.addChild(new Pixim.Container);n.play({name:"bgm_result",isLoop:!0,volume:.58});var p=function(){l.removeChildren();var t=l.addChild(new PIXI.Graphics);t.beginFill(16777215,1),t.drawRect(0,0,e.width,e.height),t.endFill(),t.alpha=0;var i=0;s.task.on("flashAnim",(function(e){if(t.alpha=1-i,!(i<1))return l.removeChildren(),void s.task.clear("flashAnim");i=Math.min(1,i+.05*e.delta)}))},u=h.addChild(new PIXI.Graphics);u.beginFill(5786683),u.drawRect(0,0,e.width,e.height),u.endFill();var m=h.addChild(new PIXI.Sprite(o.res_back));m.anchor.set(.5,1),m.x=e.width/2,m.y=e.height-78,m.alpha=.3,h.addChild(new PIXI.Sprite(o.top_back)).alpha=.8;var f=d.addChild(new Ut(e,{isBonusStage:i.isBonusStage,score:i.score,best:i.best,coin:i.coin}));f.once("waitPhase",(function(){s.emit("waitPhase")})),s.once("gotoRouretPhase",(function(){f.emit("gotoRouretPhase")})),f.on("shakeBack",(function(){var t=0,e=m.x,i=m.y;n.play({name:"se_start"}),s.task.clear("shakeBack"),s.task.on("shakeBack",(function(n){var a=2*Math.PI*Math.random(),o=12*(1-t);m.x=e+o*Math.cos(a),m.y=i+o*Math.sin(a),t<1?t=Math.min(1,t+.1*n.delta):s.task.clear("shakeBack")}))})),f.once("flash",(function(){p()})),this.once("begin",(function(){var t=0,i=a.addChild(new PIXI.Graphics);i.beginFill(0,1),i.drawRect(0,0,e.width,e.height),i.endFill(),i.alpha=1,a.task.on("begin",(function(e){i.alpha=1-t,t<1?t=Math.min(1,t+.1*e.delta):(i.parent.removeChild(i),a.task.clear("begin"))}))})),this.emit("begin"),f.once("callBonusStageProcess",(function(){var t=c.addChild(new Kt(e,{nmcoin:0,spcoin:0,isBonusStage:i.isBonusStage,isContinue:i.isContinue}));t.on("playAds",(function(t){c.interactive=c.interactiveChildren=!1,n.allStop(),t.adsPlayReject=function(){c.interactive=c.interactiveChildren=!0},s.emit("playAds",t)})),t.once("callShareButton",(function(t){var n=s.addChild(new Gt(e));n.x=e.width/2,n.y=i.isContinue?310:400,n.alpha=0,n.interactive=!1,n.emit("beginAnim"),n.once("finish",(function(){n.interactive=!0,n.on("pointertap",(function(){s.emit("callShareDiag")}))}))}))})),f.once("callRouret",(function(){var t=1,a=c.addChild(new Jt(e));a.x=e.width/2,a.y=750,a.once("destroy",(function(){c.removeChild(a),a=null}));var o=c.addChild(new Nt(e));o.x=e.width,o.y=454,o.once("adsViewCall",(function(){!function(){var a=Math.floor(i.coin*t);r=a;var o=c.addChild(new Kt(e,{isBonusStage:i.isBonusStage,isContinue:i.isContinue,nmcoin:i.coin,spcoin:a}));o.on("playAds",(function(t){c.interactive=c.interactiveChildren=!1,n.allStop(),t.gotCoinNum=a,t.adsPlayReject=function(){c.interactive=c.interactiveChildren=!0},s.emit("playAds",t)})),o.once("callShareButton",(function(t){var i=c.addChild(new Gt(e));i.x=e.width/2,i.y=310,i.alpha=0,i.interactive=!1,i.emit("beginAnim"),i.once("finish",(function(){i.interactive=!0,i.on("pointertap",(function(){s.emit("callShareDiag")}))}))}))}()})),o.once("finishMove",(function(){f.emit("finishAnimation")})),o.once("sendGetValue",(function(e){a.emit("end"),p(),t=e,n.play({name:"se_start"})})),s.on("pointertap",(function(){o.emit("stoprouret")})),s.interactive=!0})),this.emit("main1"),this.once("AdRewardGetNotice",(function(t){t.isGotReward||(r=i.coin),c.interactive=c.interactiveChildren=!1;var n=a.addChild(new Pixim.Container),h=n.addChild(new PIXI.Sprite(o.res_coin));h.scale.set(.68);var d=n.addChild(new pt(r,{sheet:e.resources.spritesheets.nm,prefix:"n",anchor:0})),l=n.addChild(new PIXI.Sprite(o.res_getlogo));l.scale.set(.8),d.scale.x=d.scale.y=.56,d.x=h.width+2,h.y=(d.height-h.height)/2,l.x=d.x+d.width+4,l.y=d.height-l.height-4,n.x=(e.width-n.width)/2,n.y=434;var p=a.addChild(new Pixim.Container),u=p.addChild((new PIXI.Graphics).beginFill(16711680,.001).drawRect(0,0,e.width,e.height).endFill()),m=p.addChild(new PIXI.Sprite(e.resources.images.toptoscreentext));m.anchor.set(.5),m.scale.set(.64),m.x=.5*e.width,m.y=740,p.alpha=0;var f=c.y,y=n.y,v=y-48;n.alpha=0,yt.tween({target:s,name:"AdRewardGetNoticeAnime",time:20,main:function(t){var e=t*t*(3-2*t);c.alpha=1-e,n.alpha=e,c.y=f+48*e,n.y=(1-e)*v+e*y,p.alpha=t},finish:function(){a.emit("AdRewardGetNoticeFinish"),u.interactive=!0,u.once("pointertap",(function(){t.endclb()}));var e=yt.tween({target:a,name:"taptoScreenAnime",time:90,main:function(t){var e=.5*(1-Math.cos(t*Math.PI*4));m.alpha=1-.4*e},finish:function(){e()}});e()}})()}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Nt=function(t){function e(e){var i=this;t.call(this);var n=e.resources.spritesheets.topresult,a=this.addChild(new Pixim.Container),o=[{ratio:2},{ratio:3},{ratio:2},{ratio:5},{ratio:2},{ratio:3},{ratio:2},{ratio:5},{ratio:2},{ratio:3},{ratio:2},{ratio:5}],r=a.addChild(new Pixim.Container);r.scale.set(1.2);for(var s=[],h=0;h<o.length;h++){var c=2*Math.PI*(h/o.length),d=r.addChild(new Pixim.Container),l=d.addChild(new PIXI.Sprite(n.res_rouretback));l.anchor.set(.5,1),l.scale.set(.9),d.rotation=c,l.alpha=h%2==0?.8:.12;var p=d.addChild(new Pixim.Container),u=p.addChild(new Pixim.Container),m=u.addChild(new PIXI.Sprite(n.res_x));m.scale.set(.5),m.y=-m.height/2;var f=u.addChild(new pt(o[h].ratio,{sheet:e.resources.spritesheets.nm,prefix:"n",anchor:0}));f.scale.set(.4),f.x=m.width+2,f.y=-f.height/2,u.x=-u.width/2,p.y=-180,p.rotation=Math.PI/2,p.scale.set(1.4),p.alpha=.7,s.push({num:p,cont:l,alpha:[l.alpha,p.alpha]})}r.alpha=.001,this.once("begin",(function(){var t,e=0;i.task.on("begin",(function(n){t=1-Math.pow(1-e,2),r.x=240*(1-t),r.alpha=1,e<1?e=Math.min(1,e+.041666666666666664*n.delta):(i.task.clear("begin"),i.once("stoprouret",(function(){i.task.clear("rotation"),i.emit("stop")})))}))})),this.once("rotation",(function(){i.task.on("rotation",(function(t){r.rotation-=.22*t.delta}))})),this.once("stop",(function(){var t,e=0,n=parseInt(o.length*Math.random()),a=-Math.PI/2-2*Math.PI*(n/o.length);i.emit("sendGetValue",o[n].ratio),i.task.on("stop",(function(o){t=Math.cos(4.5*Math.PI*e)*(1-(1-Math.pow(1-e,2))),r.rotation=a-Math.min(.2+1.1*e,.7)*t,e<1?e=Math.min(1,e+.01*o.delta):(i.task.clear("stop"),i.emit("selectMoveA",n))}))})),this.once("selectMoveA",(function(t){var e=0,n=0,a=s[Math.min(s.length-1,t)].num,o=a.alpha;i.task.on("selectMoveA",(function(r){a.alpha=(1-e)*o+e;for(var h=0;h<s.length;h++)h!==t&&(s[h].num.alpha=s[h].alpha[1]*(1-e)),s[h].cont.alpha=s[h].alpha[0]*(1-e);e<1?e=Math.min(1,e+.125*r.delta):(n+=r.delta)>=20&&(i.task.clear("selectMoveA"),i.emit("selectMoveB",a))}))})),this.once("selectMoveB",(function(t){var e,n,a=0,o=t.y,r=t.scale.x;i.emit("finishMove"),i.task.on("selectMoveB",(function(s){if(e=a*a*-160*(1-a)+a*a*a,n=1-Math.pow(1-a,2),t.y=o-4*e,t.scale.set(r+.5*n),!(a<1))return i.task.clear("selectMoveB"),i.emit("adsViewCall"),void(t.visible=!1);a=Math.min(1,a+.041666666666666664*s.delta)}))})),this.emit("rotation"),this.emit("begin")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Ut=function(t){function e(e,i){t.call(this);var n=e.resources.spritesheets.topresult,a=this,o=this.addChild(new Pixim.Container),r=this.addChild(new Pixim.Container),s=r.addChild(new Pixim.Container);s.alpha=0;var h=s.addChild(new PIXI.Sprite(n.res_wback));h.y=-40;var c=s.addChild(new Pixim.Container),d=c.addChild(new PIXI.Sprite(i.isBonusStage?n.res_coin:n.res_kills)),l=c.addChild(new pt(i.score,{sheet:e.resources.spritesheets.nm,prefix:"n",anchor:0}));d.scale.set(.6),l.scale.set(.56),l.y=d.height+2,l.x=-l.width/2,d.x=-d.width/2,c.visible=!1;var p=s.addChild(new Vt(e,i.isBonusStage?i.coin:i.score,!i.isBonusStage&&i.score>i.best,i.isBonusStage));p.y=80,p.scale.set(1.5),p.once("finish",(function(){for(var t=[[-160,-76,0,o,1],[-128,-240,3,r,1.2],[210,-64,2,o,1],[190,-240,1,r,1.1]],i=0;i<t.length;i++){var n=t[i][3].addChild(new $t(e,t[i][2],t[i][0],t[i][1],t[i][4]));n.x=e.width/2,n.y=e.height/2}})),p.on("finish",(function(){a.emit("flash")})),p.on("shake",(function(){a.emit("shakeBack")})),p.on("nextphase",(function(){k()})),p.emit("begin");var u=s.addChild(new Pixim.Container),m=u.addChild(new PIXI.Sprite(n.res_bestlogo)),f=u.addChild(new pt(i.best,{sheet:e.resources.spritesheets.nm,prefix:"n",anchor:0}));m.scale.set(.6),f.scale.set(.74),f.y=m.height+2,f.x=-f.width/2,m.x=-m.width/2,c.y=h.y+10,h.x=-h.width/2,c.x=0,s.x=e.width/2,s.y=e.height/2-s.height/2,u.alpha=0,u.y=-128;var y=s.addChild(new PIXI.Sprite(n.res_new));y.anchor.set(.5),y.y=72,y.visible=!1;var v=r.addChild(new Pixim.Container),x=v.addChild(new PIXI.Sprite(n.res_coin));x.scale.set(.68);var w=v.addChild(new pt(i.coin,{sheet:e.resources.spritesheets.nm,prefix:"n",anchor:0}));w.scale.x=w.scale.y=.56,w.x=x.width+2,x.y=(w.height-x.height)/2,v.y=434,v.x=(e.width-v.width)/2,v.alpha=0,i.isBonusStage&&(v.visible=!1),h.scale.y=2,i.isBonusStage||this.once("gotoRouretPhase",(function(){D()})),this.once("finishAnimation",(function(){var t,i=0,n=v.x,o=e.width/2-v.width/2;a.task.on("task",(function(e){if(t=i*i*-3*(1-i)+i*i*i,v.x=(1-t)*n+t*o,!(i<1))return v.visible=!1,void a.task.clear("task");i=Math.min(1,i+.041666666666666664*e.delta)}))}));var C,g,_,I,P,b=function(){var t,e=0,n=0,o=.7,r=c.x,s=c.y,h=c.scale.x;a.task.on("task",(function(d){if(e<o)t=Math.pow(e/o,2),c.y=(1-t)*(s-120)+t*s,c.scale.set(4.5*(1-t)+t*h);else{var l=2*Math.PI*Math.random(),p=12*(1-(e-o)/(1-o));c.x=r+p*Math.cos(l),c.y=s+p*Math.sin(l)}c.alpha=e,e<1?e=Math.min(1,e+.0625*d.delta):(n+=d.delta)>=40&&(a.task.clear("task"),i.isBonusStage?j():M())}))},k=function(){var t,e=0,n=0;s.y;var o=v.y;a.task.on("task",(function(r){t=1-Math.pow(1-e,2),v.y=o+48*(1-t),v.alpha=e,e<1?e=Math.min(1,e+.05*r.delta):(n+=r.delta)>=30&&(a.task.clear("task"),i.score>i.best?S():X())}))},M=function(){var t=0;a.task.on("task",(function(e){t<1?t=Math.min(1,t+.0125*e.delta):(a.task.clear("task"),p.emit("next"))}))},S=function(){var t,e=0,i=0;y.visible=!0,y.x=-p.mwidth/2-30,A(),a.task.on("task",(function(n){t=3*e*(1-e)+e*e,y.scale.set(2-1*t),e<1?e=Math.min(1,e+.16666666666666666*n.delta):(i+=n.delta)>=40&&(a.task.clear("task"),X())}))},X=function(){var t,e=0,i=0,n=u.y;a.task.on("task",(function(o){t=1-Math.pow(1-e,2),u.y=n-48*(1-t),u.alpha=e,e<1?e=Math.min(1,e+.05*o.delta):(i+=o.delta)>=40&&(a.task.clear("task"),a.emit("waitPhase"))}))},D=function(){var t,e=0,i=0,n=s.y;p.emit("next"),a.task.on("task",(function(o){t=(1-e)*Math.pow(e,2)+e*(1-Math.pow(1-e,2)),s.y=n-176*t,h.scale.y=2-1*t,p.y=80-54*t,y.y=72-52*t,e<1?e=Math.min(1,e+.05*o.delta):(i+=o.delta)>=2&&(a.task.clear("task"),O())}))},j=function(){var t=0;a.task.on("task",(function(e){t<1?t=Math.min(1,t+.014285714285714285*e.delta):(a.task.clear("task"),D())}))},O=function(){var t,n=0,o=v.x,r=e.width/2-v.width-40;i.isBonusStage?a.emit("callBonusStageProcess"):a.emit("callRouret"),a.task.on("task",(function(e){t=(1-n)*Math.pow(n,2)+n*(1-Math.pow(1-n,2)),v.x=(1-t)*o+t*r,n<1?n=Math.min(1,n+.07142857142857142*e.delta):a.task.clear("task")}))},A=function(){var t=0,e=0,n=c.x,o=c.y;a.task.on("shakeTask",(function(a){if(t>=2){var r=2*Math.PI*Math.random();c.x=n+.7*Math.cos(r),c.y=o+.7*Math.sin(r),d.tint=e%2==0?16777130:16777215,l.style({color:d.tint}),l.text(i.score),e++,t=0}else t+=a.delta}))};g=0,_=0,I=s.y,P=v.y,a.task.on("task",(function(t){C=1-Math.pow(1-g,2),s.alpha=g,s.y=I+48*(1-C),v.y=P+48*(1-C),g<1?g=Math.min(1,g+.05*t.delta):(_+=t.delta)>=30&&(a.task.clear("task"),b())}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Vt=function(t){function e(e,i,n,a){var o=this;t.call(this);for(var r=e.resources.spritesheets.nm,s=e.resources.spritesheets.effects,h=e.resources.spritesheets.topresult,c=this.addChild(new Pixim.Container),d=c.addChild(new Pixim.Container),l=c.addChild(new Pixim.Container),p=this,u=(i+="").length,m=[],f=[],y=0;y<4;y++)m.push(l.addChild(new PIXI.Container));for(var v={maxWidth:0,maxHeight:0,posList:[]},x=0;x<u;x++){var w=r["n"+i[x]];v.posList.push({x:v.maxWidth,tex:w}),v.maxWidth+=w.width+2,v.maxHeight<w.height&&(v.maxHeight=w.height)}this.mwidth=v.maxWidth;for(var C=function(t,e){var i=new PIXI.Graphics;return i.beginFill(16711680,1),i.drawRect(0,0,1,e),i.endFill(),i.x=t,i.alpha=0,i},g=function(){var t=new PIXI.Container;return t.addChild(C(0,v.maxHeight)),t.addChild(C(v.maxWidth,v.maxHeight)),t.x=-t.width/2,t.y=-t.height/2,t},_=[],I=l.addChild(new PIXI.Container),P=[l.addChild(new Pixim.Container),l.addChild(new Pixim.Container)],b=v.posList,k=0;k<P.length;k++){_.push([]);for(var M=0;M<b.length;M++){var S=P[k].addChild(new Pixim.Container),X=S.addChild(g());S.alpha=0;for(var D=0;D<b.length;D++)if(M===D){var j=X.addChild(new PIXI.Sprite(b[D].tex));j.x=b[D].x,_[k].push({obj:S,spr:j,id:M})}}}for(var O=0;O<b.length;O++){var A=I.addChild(g()).addChild(new Pixim.Container),T=A.addChild(new PIXI.Sprite(s.et6)),z=b[O];T.anchor.set(.5),T.rotation=2*Math.PI*Math.random(),A.x=z.x+b[O].tex.width/2,A.y=z.tex.height/2+24*Math.cos(3.5*O),A.visible=!1,f.push(A)}var E=function(t){var i=_[0][t].obj,a=20*(_[0].length-1-t),o=0;i.task.on("wait",(function(r){if(o>=a){var s,h=0;i.task.on("main",(function(a){if(s=Math.pow(h,2),i.scale.set(3*(1-s)+s),i.alpha=Math.min(1.5*h,1),h<1)h=Math.min(1,h+.125*a.delta);else{if(i.task.clear("main"),t>0)F(t);else{for(var o=0;o<_[1].length;o++)L(o),n&&B(o);d.addChild(new qt(e)).emit("begin"),p.emit("finish")}W(t),R(t),p.emit("shake")}})),i.task.clear("wait")}else o+=r.delta}))},F=function(t){var e,i=_[1][t].obj,n=0;i.task.on("main",(function(t){e=1-Math.pow(1-n,2),i.scale.set(1+.5*e),i.alpha=1-n,n<1?n=Math.min(1,n+.08333333333333333*t.delta):i.task.clear("main")}))},R=function(t){var e,i=f[t],n=0;i.visible=!0,i.scale.set(0),i.task.on("beff",(function(t){e=3*n*(1-n)+n*n,i.scale.set(.8*e),n<1?n=Math.min(1,n+.125*t.delta):i.task.clear("beff")}))},L=function(t){var e,i=_[1][t].obj,n=0;i.task.on("faff",(function(t){e=1-Math.pow(1-n,2),i.scale.set(1+.5*e),i.alpha=1-n,n<1?n=Math.min(1,n+.05555555555555555*t.delta):i.task.clear("faff")}))},B=function(t){var e=_[0][t].obj,i=_[0][t].spr,n=0,a=0;e.task.on("faff",(function(t){if(parseInt(n)%2==0?i.tint=16777164:i.tint=16777215,n+=.4*t.delta,a>=5){var e=2*Math.PI*Math.random();P[0].x=.8*Math.cos(e),P[0].y=.8*Math.sin(e)}else a+=t.delta}))},W=function(t){var e=_[0][t].obj,i=0;e.task.on("fshake",(function(t){var n=4*(1-i),a=2*Math.PI*Math.random();e.x=n*Math.cos(a),e.y=n*Math.sin(a),i<1?i=Math.min(1,i+.08333333333333333*t.delta):e.task.clear("fshake")}))},Y=l.addChild(new PIXI.Sprite(a?h.res_coin:h.res_kills));Y.anchor.set(.5),Y.scale.set(a?.6:.8),Y.alpha=0,this.once("begin",(function(){var t,e=0;o.task.on("beginTask",(function(i){if(t=1-Math.pow(1-e,2),Y.y=48*(1-t)-58,Y.alpha=e,e<1)e=Math.min(1,e+.041666666666666664*i.delta);else{for(var n=0;n<_[0].length;n++)E(n);o.task.clear("beginTask")}}))})),this.once("next",(function(){var t,e=0;o.task.on("waitTask",(function(i){o.task.on("nextTask",(function(i){t=(1-e)*Math.pow(e,2)+e*(1-Math.pow(1-e,2)),c.scale.set(1-.5*t),d.alpha=I.alpha=1-e,e<1?e=Math.min(1,e+.05*i.delta):(d.visible=I.visible=!1,o.task.clear("nextTask"),o.emit("nextphase"))})),o.task.clear("waitTask")}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),$t=function(t){function e(e,i,n,a,o){t.call(this);var r=e.resources.spritesheets.topresult,s=this.addChild(new Pixim.Container).addChild(new PIXI.Sprite(r["res_z"+i]));s.anchor.set(.5);var h,c,d,l,p,u=this;c="wait",d=0,l=1/60*(1-Math.abs(a)/340)*2.5*1.2*o,p=1-Math.abs(n)/400,u.task.on(c,(function(t){h=(1-d)*d*4,s.x=n*d,s.y=a*h,s.scale.set(1.5*(1+n*d/n)*p),s.rotation=-d*Math.PI*.2,d<3?d=Math.min(3,d+l*t.delta):u.task.clear(c)}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Kt=function(t){function e(e,i){t.call(this);var n=e.resources.spritesheets.topresult,a=this,o=this.addChild(new Pixim.Container);o.x=e.width/2,o.y=e.height/2+58;var r=o.addChild(new PIXI.Sprite(n.res_btback));r.alpha=.4,r.x=-r.width/2,r.y=-r.height/2-40,r.scale.y=1.5,r.alpha=.001;var s=o.addChild(new Pixim.Container);if(!i.isBonusStage){var h=s.addChild(new PIXI.Sprite(n.res_coin));h.scale.set(.8);var c=s.addChild(new pt(i.spcoin,{sheet:e.resources.spritesheets.nm,prefix:"n",anchor:0}));c.scale.set(h.height/c.height*.86),c.x=h.width+2,c.y=-c.height/2-2,h.y=-h.height/2}s.x=-s.width/2;var d=o.addChild(new PIXI.Sprite(n.res_btback));d.alpha=1,d.x=r.x,d.y=r.y,d.visible=!1;var l=s.addChild(new Pixim.Container);if(i.isBonusStage){var p=l.addChild(new Pixim.Container);if(i.isContinue)p.addChild(new Zt(e)).y=-15}else{var u=l.addChild(new PIXI.Sprite(n.res_getlogo)),m=l.addChild(new PIXI.Sprite(n.res_playlogo));m.x=u.width+4,u.y=-u.height/2,m.y=-m.height/2,l.x=-l.width}l.alpha=0;var f=o.addChild(new Pixim.Container),y=f.addChild(new PIXI.Sprite(n.res_btback));y.anchor.set(.5),y.scale.set(.8),y.alpha=.001;var v=f.addChild(new Pixim.Container);if(!i.isBonusStage){var x=v.addChild(new PIXI.Sprite(n.res_coin));x.scale.set(.6),x.anchor.set(0,.5),x.x=4;var w=v.addChild(new pt(i.nmcoin,{sheet:e.resources.spritesheets.nm,prefix:"n",anchor:0}));w.scale.set(x.height/w.height*.86),w.x=x.x+x.width,w.y=-w.height/2}v.x=-v.width/2;var C=f.addChild(new PIXI.Sprite(i.isBonusStage&&!i.isContinue?e.resources.spritesheets.bonusstage.OK_w:n.res_nothanks));C.x=-C.width/2,C.y=-50,f.y=170,f.visible=!1,f.alpha=0;var g=function(){var t,e=0,n=i.isBonusStage?0:s.x,o=i.isBonusStage?0:s.x+64;a.task.on("task",(function(h){t=(1-e)*Math.pow(e,2)+e*(1-Math.pow(1-e,2)),l.alpha=e,s.x=(1-t)*n+t*o,e<1?e=Math.min(1,e+.1*h.delta):(a.task.clear("task"),r.on("pointertap",(function(){a.emit("playAds",{isPlay:!0,getCoin:i.spcoin})})),r.interactive=!0,_())}))},_=function(){var t=0;a.task.on("task",(function(e){t<1?t=Math.min(1,t+.03333333333333333*e.delta):(a.task.clear("task"),a.emit("callShareButton"),I())}))},I=function(){var t=0;a.task.on("task",(function(e){t<1?t=Math.min(1,t+.016666666666666666*e.delta):(a.task.clear("task"),P())}))},P=function(){var t,e=0,n=f.y+64,o=f.y;f.visible=!0,a.task.on("task",(function(s){if(t=1-Math.pow(1-e,2),f.alpha=e,f.y=(1-t)*n+t*o,!(e<1))return f.once("pointertap",(function(){a.emit("playAds",{isPlay:!1,getCoin:i.nmcoin}),r.interactive=f.interactive=!1})),f.interactive=!0,a.task.clear(),void a.emit("callShareButton");e=Math.min(1,e+.025*s.delta)}))};!function(){if(!i.isBonusStage||i.isContinue){var t,e=0,n=0;a.task.on("task",(function(i){t=1-Math.pow(1-e,2),d.alpha=1-t,o.scale.set(1.2-.2*t),e<1?e=Math.min(1,e+.07142857142857142*i.delta):(n+=i.delta)>=6&&(d.visible=!1,a.task.clear("task"),g())}))}else!function(){var t=0;a.task.on("task",(function(e){t<1?t=Math.min(1,t+.1*e.delta):(a.task.clear("task"),a.emit("callShareButton"),P())}))}()}()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Jt=function(t){function e(e){t.call(this);var i=e.resources.spritesheets.topresult,n=this,a=this.addChild(new Pixim.Container),o=a.addChild(new PIXI.Sprite(i.res_taptostoplogo));o.anchor.set(.5),n.once("end",(function(){h()})),a.alpha=.001;var r,s,h=function(){var t,e=0;n.task.on("end",(function(i){if(t=1-Math.pow(1-e,2),a.scale.set(1+.4*t),a.alpha=1-e,!(e<1))return n.task.clear(),void n.emit("destroy");e=Math.min(1,e+.08333333333333333*i.delta)}))};s=0,n.task.on("main",(function(t){r=(1-Math.cos(s))/2,o.scale.set(.9+.1*r),s+=.18*t.delta})),function(){var t,e=0;n.task.on("begin",(function(i){if(t=1-Math.pow(1-e,2),a.alpha=e,a.scale.set(t),!(e<1))return n.task.clear("begin"),void n.emit("enableClick");e=Math.min(1,e+.08333333333333333*i.delta)}))}()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),qt=function(t){function e(e){var i=this;t.call(this);var n=e.resources.spritesheets.effects,a=this,o=this.addChild(new Pixim.Container),r=Math.PI/180,s=[],h=o.addChild(new PIXI.Sprite(n.et6));h.anchor.set(.5);var c=o.addChild(new PIXI.Sprite(n.et10));c.anchor.set(.5),c.x=84*Math.cos(36*-r),c.y=84*Math.sin(36*-r);var d=o.addChild(new PIXI.Sprite(n.et11));d.anchor.set(.5),d.x=70*Math.cos(36*r),d.y=70*Math.sin(36*r);var l=o.addChild(new PIXI.Sprite(n.et12));l.anchor.set(.5),l.x=64*Math.cos(140*r),l.y=64*Math.sin(140*r);var p=o.addChild(new PIXI.Sprite(n.et13));p.anchor.set(.5),p.x=120*Math.cos(140*r),p.y=120*Math.sin(140*r),c.visible=d.visible=l.visible=p.visible=!1,s.push(c),s.push(d),s.push(l),s.push(p);var u=function(){var t=0,e=0;a.task.on("main",(function(i){if(t>=0){if(s[e].visible=!0,++e>=s.length)return void a.task.clear();t=0}else t+=i.delta}))};this.once("begin",(function(){var t,e;i.visible=!0,e=0,a.task.on("main",(function(i){if(t=3.4*e*(1-e)+e*e,h.scale.set(t),!(e<1))return a.task.clear(),void u();e=Math.min(1,e+.25*i.delta)}))})),this.once("end",(function(){var t;i.visible=!0,t=0,a.task.on("main",(function(e){if(o.alpha=1-t,!(t<1))return i.visible=!1,void a.task.clear();t=Math.min(1,t+.041666666666666664*e.delta)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container);Pixim.Container;var Zt=function(t){function e(e){t.call(this);var i=this,n=e.resources.spritesheets.bonusstage,a=this.addChild(new Pixim.Container),o=a.addChild(new Pixim.Container),r=o.addChild(new PIXI.Sprite(n.bonusstartlogo));r.alpha=0;var s=o.addChild(new Pixim.Container),h=s.addChild(new PIXI.Sprite(e.resources.spritesheets.topresult.res_playlogo)),c=s.addChild(new PIXI.Sprite(e.resources.spritesheets.bonusstage.playagain));h.x=c.width+4,c.y=parseInt((h.height-c.height)/2),s.x=parseInt((r.width-s.width)/2),s.y=r.height+4,o.x=-parseInt(o.width/2),o.y=-parseInt(o.height/2);var d=!1,l=function(){var t=Math.random()*Math.PI*2;a.x=.8*Math.cos(t),a.y=.8*Math.sin(t),d?(r.tint=h.tint=c.tint=16777164,d=!1):(r.tint=h.tint=c.tint=16777215,d=!0),yt.tween({target:i,name:"shaketask",time:2,main:function(t){},finish:function(){l()}})()};yt.tween({target:i,name:"chLogo",time:14,main:function(t){r.alpha=t},finish:function(){l()}})()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Qt=function(t){function e(e,i){var n=this;t.call(this);var a=e.resources.spritesheets.leaderboard,o=e.resources.spritesheets.gameui,r=this.addChild(new Pixim.Container),s=this;s.interactiveChildren=!1;var h=r.addChild(new PIXI.Graphics);h.beginFill(0,1),h.drawRect(0,0,e.width,e.height),h.endFill(),h.alpha=.85;var c=r.addChild(new Pixim.Container);this.once("allDataLoaded",(function(){var t=r.addChild(new PIXI.Sprite(a.LEADER_001));t.x=e.width/2-t.width/2,t.y=6;var h=r.addChild(new ee(e,{}));h.y=94;var d=r.addChild(new PIXI.Sprite(o.top));d.x=e.width/2-d.width/2,d.y=e.height-d.height-4,d.interactive=!0,d.once("pointerdown",(function(){s.emit("returnTop",!1)}));var l=r.addChild(new te(e,{rank:i.player.rank,score:i.player.score}));l.y=h.y+h.height+18,n.interactiveChildren=!0,h.on("tabChanged",(function(t){c.removeChildren(),c.addChild(new ie(e,i[t?"world":"friend"]))})),h.emit("tabChanged",!0),c.x=(e.width-c.width)/2,c.y=l.y+l.height+18})),this.emit("allDataLoaded")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),te=function(t){function e(e,i){t.call(this);var n=e.resources.spritesheets.leaderboard,a=this.addChild(new Pixim.Container),o=a.addChild(new PIXI.Sprite(n.LEADER_005)),r=a.addChild(new PIXI.Sprite(n.LEADER_006));r.x=16;var s=a.addChild(new pt(i.rank,{color:0,sheet:e.resources.spritesheets.nm,prefix:"n",anchor:0}));s.x=r.x+r.width+16,s.scale.set(.7*o.height/s.height),a.addChild(new PIXI.Sprite(n.LEADER_007)).x=s.x+s.width;var h=a.addChild(new pt(i.score,{color:0,sheet:e.resources.spritesheets.nm,prefix:"n",anchor:0}));h.scale.set(.7*o.height/h.height),h.x=o.width-h.width-16;for(var c=a.height,d=0;d<a.children.length;d++)a.children[d].y=parseInt((c-a.children[d].height)/2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),ee=function(t){function e(e,i){t.call(this);var n=e.resources.spritesheets.leaderboard,a=this.addChild(new Pixim.Container),o=this,r=a.addChild(new PIXI.Sprite(n.LEADER_002)),s=a.addChild(new PIXI.Sprite(n.LEADER_003));r.x=e.width/2-r.width-10,s.x=e.width/2+10,r.interactive=s.interactive=!0,r.on("pointerdown",(function(){d(!0)})),s.on("pointerdown",(function(){d(!1)}));var h=new PIXI.Graphics;h.beginFill(16777215,1),h.drawRect(0,a.height,e.width,6),h.endFill(),a.addChild(h);var c={select:16777215,unselect:5592405},d=function(t){r.tint=c[t?"select":"unselect"],s.tint=c[t?"unselect":"select"],o.emit("tabChanged",t)};d(!0)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),ie=function(t){function e(e,i){t.call(this);for(var n=e.resources.spritesheets.leaderboard,a=this.addChild(new Pixim.Container),o=[],r=a.addChild(new Pixim.Container),s=function(t){var a=new Pixim.Container,r=a.addChild(new PIXI.Graphics),s=a.addChild(new Pixim.Container),h=s.addChild(new PIXI.Sprite(n.LEADER_008)),c=s.addChild(new ne(e,i[t].iconsrc,60)),d=s.addChild(new PIXI.Text(i[t].name,{fontSize:22,fill:16777215,fontWeight:"bold"})),l=s.addChild(new pt(i[t].id,{sheet:e.resources.spritesheets.nm,prefix:"n",anchor:0})),p=s.addChild(new pt(i[t].score,{sheet:e.resources.spritesheets.nm,prefix:"n",anchor:0}));d.height=Math.min(28,d.height),d.width=Math.min(274,d.width),l.scale.set(.75*h.height/l.height),p.scale.set(.42*h.height/p.height),l.x=8,c.x=70,d.x=c.x+c.width+8,p.x=s.width-p.width-6;var u=s.height;c.y=(u-c.height)/2,d.y=4,l.y=(u-l.height)/2,p.y=u-p.height-6,r.beginFill(16711680,1),r.drawRect(0,0,h.width,1.2*h.height),r.endFill(),r.alpha=0,s.y=(r.height-s.height)/2,o.push(a),a.on("myclick",(function(){})),a.on("changeAlpha",(function(t){h.alpha=t}))},h=0;h<i.length;h++)s(h);r.addChild(new ae(e,{list:o,height:480}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),ne=function(t){function e(e,i,n){var a=this;t.call(this),e.resources.spritesheets.leaderboard;var o=this.addChild(new Pixim.Container),r=o.addChild(new PIXI.Graphics);r.beginFill(16777215,1),r.drawCircle(0,0,n/2),r.endFill(),o.x=o.y=r.width/2,n*=.9;var s=new PIXI.Sprite.from(i);this.task.on("loader",(function(){if(s.height>1||s.width>1){var t=o.addChild(new PIXI.Graphics);t.beginFill(0,1),t.drawCircle(0,0,n/2),t.endFill(),s.anchor.set(.5),s.scale.set(n/s.height),s.mask=t,o.addChild(s),a.task.clear("loader")}}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),ae=function(t){function e(e,i){t.call(this),e.resources.spritesheets.top;var n=this.addChild(new Pixim.Container);n.addChild(new PIXI.Graphics);for(var a=n.addChild(new Pixim.Container),o=0,r=null,s={x:0,y:0},h={x:0,y:0},c=0,d=function(t){var e=a.addChild(i.list[t]);e.y=o,e.interactive=!0,e.on("pointerdown",(function(t){s.x=h.x=t.data.global.x,s.y=h.y=t.data.global.y,r=e})),e.on("pointerup",(function(t){null!=r&&u(t)})),e.on("pointerupoutside",(function(t){null!=r&&u(t)})),e.on("pointermove",(function(t){null!=r&&m(t)})),o+=e.height},l=0;l<i.list.length;l++)d(l);var p=a.height-i.height,u=function(t){Math.abs(s.y-t.data.global.y)<5&&r.emit("myclick"),r=null},m=function(t){if(!(p<=0)){var e=t.data.global.y-h.y;c=Math.max(Math.min(0,c+e),-p),h.y=t.data.global.y}},f=n.addChild(new PIXI.Graphics);f.beginFill(16711680,1),f.drawRect(0,0,a.width,i.height),f.endFill(),a.mask=f;var y=100;this.task.on("main",(function(t){if(a.y+=(c-a.y)*(.14*t.delta),Math.abs(y-a.y)>.1)for(var e=0;e<i.list.length;e++){var n=a.y+i.list[e].y;n<260?i.list[e].emit("changeAlpha",1):i.list[e].emit("changeAlpha",Math.max(1-(n-260)/280,0))}y=a.y}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),oe=function(t){function e(e){t.call(this);var i={name:"NoName",icon:PIXI.Texture.EMPTY};this._FB_PLAYERDATA=i,this.addChild(new Pixim.Container),this.on("callPlayerListDialog",(function(t){t.resolve()})),this.on("postPlayerData",(function(t){t.resolve()})),this.on("saveSaveData",(function(t){t.saveFinish()})),this.on("loadingSaveData",(function(t){var i=Object.keys(e.vars.data).length<=0,n={};n=i?JSON.parse(JSON.stringify(t.saveData)):JSON.parse(JSON.stringify(e.vars.data.savedata));var a=new PIXI.Loader;for(var o in t.levelJsonList){var r=e.vars.env.basepath+"assets/level/"+t.levelJsonList[o]+".json?_fv="+e.vars.env.version;a.add(t.levelJsonList[o],r)}a.load((function(e,a){var o={};for(var r in a)o[r]=a[r].data;t.loadFinish({loadData:n,isFirstPlay:i,levelDatas:o})}))})),this.on("saveLeaderBoard",(function(t){t.resolveRegister()})),this.on("loadLeaderBoard",(function(t){t.resolveFinish(data)})),this.on("playInterstitialAd",(function(t){t.finishAdPlay()})),this.on("playRewordAd",(function(t){e.vars.api.viewRewardAdAsync().then((function(){t.loadFinish(),t.showFinish()})).catch((function(){t.rejectFinish()}))})),this.on("canShortCutDiag",(function(t){t.ng()})),this.on("createShortCut",(function(t){t.ng()})),this.on("setDataAndFlushData",(function(t){e.vars.api.setDataAsync("savedata",t.data,"always").then((function(){return e.vars.api.flushDataAsync()})).then((function(){t.end()})).catch((function(){t.end()}))})),this.on("SCGviewAdAsync",(function(t){e.vars.api.viewAdAsync().then((function(){t()})).catch((function(){t()}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPlayerIcon=function(){return this._FB_PLAYERDATA.icon},e.prototype.getPlayerName=function(){return this._FB_PLAYERDATA.name},e}(Pixim.Container);Pixim.Container,Pixim.Container;var re=function(t){function e(e){t.call(this);var i=this,n=this.addChild(new Pixim.Container),a=n.addChild(new Pixim.Container),o=n.addChild(new Pixim.Container),r=a.addChild(new PIXI.Graphics);r.beginFill(0,.7),r.drawRect(0,0,e.width,e.height),r.endFill(),r.alpha=0,this.once("begin",(function(t){if(t){var n=o.addChild(new he(e,e.resources.spritesheets.shc.sh_detailA));n.x=parseInt(e.width/2),n.y=parseInt(e.height/2),n.once("mytap",(function(){n.task.clear(),n.parent.removeChild(n),i.emit("callShortDiag")}))}else i.emit("callShortDiag");yt.tween({target:i,name:"beginanmA",time:14,main:function(t){r.alpha=t},finish:function(){}})()})),this.once("result",(function(t){if(t){var n=o.addChild(new he(e,e.resources.spritesheets.shc.sh_detailB));n.x=parseInt(e.width/2),n.y=parseInt(e.height/2),n.once("mytap",(function(){n.task.clear(),n.parent.removeChild(n),i.emit("pop")}))}else i.emit("pop")}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),se=function(t){function e(e,i){t.call(this);var n=this;e.resources.spritesheets.shc;var a=this.addChild(new Pixim.Container),o=a.addChild(new PIXI.Sprite(e.resources.spritesheets.skin.btn_short01));o.x=parseInt(-o.width/2),o.y=parseInt(-o.height/2),a.interactive=!1;!function(){a.alpha=0;var t=yt.tween({target:n,name:"beginanmA",time:40,main:function(t){},finish:function(){e()}}),e=yt.tween({target:n,name:"beginanmA",time:10,main:function(t){var e=3.4*t*(1-t)+t*t;a.scale.set(.1+.9*e),a.alpha=t},finish:function(){a.interactive=!0,a.once("pointertap",(function(){n.emit("mytap")}))}});t()}()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),he=function(t){function e(e,i){t.call(this);var n=this,a=this.addChild(new Pixim.Container),o=e.resources.spritesheets.shc,r=e.resources.spritesheets.topresult,s=new PIXI.Container,h=s.addChild(new PIXI.Sprite(i)),c=s.addChild(new PIXI.Sprite(r.okbutton));c.x=h.width/2-c.width/2,c.y=h.height+20;var d=new PIXI.Sprite(o.popupback);d.height=s.height+64,s.x=parseInt(-s.width/2),s.y=parseInt(-s.height/2),d.x=parseInt(-d.width/2),d.y=parseInt(-d.height/2),a.addChild(d),a.addChild(s),c.interactive=!1;a.alpha=0,yt.tween({target:n,name:"beginanmA",time:14,main:function(t){var e=2.7*t*(1-t)+t*t;a.scale.set(.1+.9*e),a.alpha=t},finish:function(){c.interactive=!0,c.once("pointertap",(function(){n.emit("mytap")}))}})()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),ce=function(t){function e(e,i,n,a,o,r){var s=this;t.call(this);for(var h=e.resources.spritesheets.day,d=e.resources.spritesheets.shc,l=e.resources.spritesheets.topresult,p=this,u=this.addChild(new PIXI.Container),m=u.addChild(new PIXI.Container),f=u.addChild(new PIXI.Container),y=null,v=null,x=f.addChild(new PIXI.Container),w=x.addChild(new PIXI.Container),C=0,g=0;g<a.length;g++){var _=w.addChild(new PIXI.Container);_.addChild(new PIXI.Sprite(h.effect00)).visible=a[g].mark;var I=_.addChild(new PIXI.Sprite(h.coinpool));I.x=240,I.visible=a[g].mark;var P=_.addChild(new PIXI.Container);P.x=24,P.y=26;var b=P.addChild(new PIXI.Sprite(h.daylogo)),k=P.addChild(new PIXI.Sprite(h["a"+(g+1)]));if(k.scale.set(.52),k.x=54,k.y=-4,null===a[g].skinID){for(var M=P.addChild(new PIXI.Container),S=a[g].coin+"",X=0,D=S.length-1;D>=0;D--){var j=M.addChild(new PIXI.Sprite(h["a"+S[D]]));j.scale.set(.52),j.x=X,X-=j.width-4}M.x=b.width-26,M.y=-4;var O=P.addChild(new PIXI.Sprite(h.coin));O.scale.set(M.height/O.height),O.x=M.x-M.width-O.width+25,O.y=-4}else{var A=P.addChild(new c(e,null,{normal:new Pixim.Container,timer:new Pixim.Container},{cutter:0,roller:0,machin:0},r.list[a[g].skinID].skinID));A.scale.set(.34),A.x=b.width-26-parseInt(A.width/2),A.y=10,A.task.clear("dustEffectMain")}if(g<n){var T=_.addChild(new PIXI.Sprite(h.checkmark));T.anchor.set(.5),T.x=T.width/2+30,T.y=T.height/2+14,g===i-1&&(T.alpha=0,v=function(){yt.tween({target:p,name:"ckeckAnime",time:14,main:function(t){T.alpha=Math.min(1,2*t),T.scale.set(3-t*t*2)},finish:function(){o.play({name:"se_start"}),p.emit("addCoin"),y()}})()})}_.y=C,C+=b.height+24}w.x=-parseInt(w.width/2),w.y=-parseInt(w.height/2),x.x=parseInt(x.width/2),x.y=parseInt(x.height/2),y=function(){yt.tween({target:p,name:"beginanmB",time:9,main:function(t){x.scale.set(1-.08*Math.sin(Math.PI*t))},finish:function(){}})()};var z=m.addChild(new PIXI.Sprite(d.popupback)),E=m.addChild(new PIXI.Sprite(h.daymainlogo));E.x=parseInt(m.width/2)-parseInt(E.width/2),f.x=parseInt(m.width/2)-parseInt(f.width/2),f.y=E.y+E.height+z.y+24;var F=m.addChild(new PIXI.Sprite(l.okbutton));F.x=parseInt(m.width/2)-parseInt(F.width/2),F.y=f.y+f.height+16,z.height=2,z.height=u.height+16,u.x=-parseInt(u.width/2),u.y=-parseInt(u.height/2);!function(){s.alpha=.001;var t=yt.tween({target:p,name:"beginanmA",time:20,main:function(t){var e=3*t*(1-t)+t*t;s.scale.set(.1+.9*e),s.alpha=Math.min(1,2*t)},finish:function(){e()}}),e=yt.tween({target:p,name:"beginanmA",time:28,main:function(t){},finish:function(){v&&v(),i()}}),i=yt.tween({target:p,name:"beginanmA",time:12,main:function(t){},finish:function(){F.interactive=!0}});t()}();F.interactive=!1,F.once("pointertap",(function(){yt.tween({target:p,name:"endanmA",time:14,main:function(t){var e=(1-t)*(1+2*t);s.scale.set(.1+.9*e),s.alpha=Math.max(0,1-t)},finish:function(){p.emit("pop")}})()})),this.x=parseInt(e.width/2),this.y=parseInt(e.height/2)+24}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),de=function(t){function e(e){t.call(this);var i=this.addChild(new Pixim.Container);this.on("add",(function(t){var e=new PIXI.Text(t,{fill:16711680,fontSize:16});e.x=-e.width,e.y=i.height,i.addChild(e)}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),le=function(){this._MISSIONDATA_DEFINE={dayliy:{mis$0:{mem:["playCount"],dat:[[1,500]],update:function(t){return{msg:["Play once."]}}},mis$1:{mem:["vanishCount"],dat:[[1e3,500]],update:function(t){return{msg:["Kill a total of "+t+" zombies."]}}}},total:{mis$0:{mem:["loginCount"],dat:[[10,1e4],[30,1e4],[50,1e4],[100,1e4],[200,1e4],[300,1e4],[400,1e4],[500,1e4],[600,1e4],[700,1e4],[800,1e4],[900,1e4],[1e3,1e4]],update:function(t){return{msg:["Login for "+t+" days."]}}},mis$1:{mem:["conloginCount"],dat:[[7,1e4],[14,5e3],[21,5e3],[28,5e3],[35,5e3],[42,5e3],[49,1e4],[56,5e3],[63,5e3],[70,5e3],[77,5e3],[84,5e3],[91,1e4],[98,5e3],[105,5e3],[112,5e3],[119,5e3],[126,5e3],[133,1e4],[140,5e3]],update:function(t){return{msg:["Login for "+t+" consecutive days."]}}},mis$2:{mem:["aliveTime"],dat:[[60,1e3],[120,2e3],[180,3e3],[240,4e3],[300,5e3],[360,6e3],[420,7e3],[480,8e3],[540,9e3],[600,1e4],[660,11e3],[720,12e3],[780,13e3],[840,14e3],[900,15e3],[960,16e3],[1020,17e3],[1080,18e3],[1140,19e3],[1200,2e4]],update:function(t){return{msg:["Survive for "+t+" seconds."]}}},mis$3:{mem:["playCount"],dat:[[5,500],[10,500],[30,500],[50,500],[100,500],[200,500],[300,500],[400,500],[500,500],[600,500],[700,500],[800,500],[900,500],[1e3,500]],update:function(t){return{msg:["Play "+t+" times."]}}},mis$4:{mem:["vanishCount"],dat:[[5e3,500],[1e4,500],[15e3,500],[2e4,500],[25e3,500],[3e4,500],[35e3,500],[4e4,500],[45e3,500],[5e4,500],[65e3,500],[7e4,500],[75e3,500],[8e4,500],[85e3,500],[9e4,500],[95e3,500],[1e5,500],[2e5,1e3],[3e5,1e3],[4e5,1e3],[5e5,1e3],[6e5,1e3],[7e5,1e3],[8e5,1e3],[9e5,1e3],[1e6,1e3],[2e6,1e4],[3e6,1e4],[4e6,1e4],[5e6,1e4],[6e6,1e4],[7e6,1e4],[8e6,1e4],[9e6,1e4],[1e7,1e4]],update:function(t){return{msg:["Kill a total of "+t+" zombies."]}}},mis$5:{mem:["loginCount"],dat:[[10,0,3]],update:function(t){return{msg:["Login for "+t+" days.",""]}}},mis$6:{mem:["loginCount"],dat:[[20,0,4]],update:function(t){return{msg:["Login for "+t+" days.",""]}}},mis$7:{mem:["loginCount"],dat:[[30,0,5]],update:function(t){return{msg:["Login for "+t+" days.",""]}}},mis$8:{mem:["playCount"],dat:[[10,0,6]],update:function(t){return{msg:["Play "+t+" times.",""]}}},mis$9:{mem:["playCount"],dat:[[50,0,7]],update:function(t){return{msg:["Play "+t+" times.",""]}}},mis$10:{mem:["vanishCount"],dat:[[5e3,0,8]],update:function(t){return{msg:["Kill a total of "+t+" zombies.",""]}}},mis$11:{mem:["vanishCount"],dat:[[1e4,0,9]],update:function(t){return{msg:["Kill a total of "+t+" zombies.",""]}}},mis$12:{mem:["aliveTime"],dat:[[180,0,10]],update:function(t){return{msg:["Survive for "+t+" seconds.",""]}}},mis$13:{mem:["aliveTime"],dat:[[300,0,11]],update:function(t){return{msg:["Survive for "+t+" seconds.",""]}}}}}};le.prototype.getMissionData=function(){return this._MISSIONDATA_DEFINE};var pe=function(t){function e(e,i,n){var a=this;t.call(this);var o=this,r=new le,s={};this.missionSendData=i.sends;var h=!1;this.setDayliyMission=function(){s={id0:!0,id1:!0,id2:!0},h=null===i.dayliyID,i.dayliyID=s},this.setDayliyMission();this.missionsSetup=function(){var t=0,e=r.getMissionData(),n=[];for(var a in e)for(var s in e[a]){var h="mis_"+a+"_"+s,c=i.process[h],d=e[a][s],l=null,p=0;for(p=0;p<d.dat.length;p++){if(d.dat[p][0]>o.missionSendData[d.mem[0]][a]){l=p;break}d.previd<=p&&!c.clear&&(t+=d.dat[p][1],d.dat[p][1]<=0&&n.push(d.dat[p][2]))}var u=d.previd;null!==l?d.previd<l&&(d.ischeck=!0,d.previd=l):d.invalid||(c.clear||(d.ischeck=!0),d.invalid=!0,d.previd=d.dat.length-1,c.clear=!0),c.prog=d.previd;var m=d.dat[Math.max(0,u)];d.progress=o.missionSendData[d.mem[0]][a]+"s"+m[0],d.progressMax=o.missionSendData[d.mem[0]][a]}return{getCoin:t,getSkinList:n}},this.missionsUpdate=function(){var t=r.getMissionData();for(var e in t)for(var i in t[e]){var n=t[e][i],a=n.previd;if(n.ischeck){n.bonus=n.dat[a][1];var o=n.update(n.dat[a][0]);n.msg=o.msg,n.ischeck=!1}var s=Math.max(0,a);n.progress=Math.min(n.dat[s][0],n.progressMax)+"s"+n.dat[s][0]}},this.getMissionData=function(){var t={},e=r.getMissionData();for(var i in e)for(var a in t[i]=[],e[i]){var o=e[i][a];t[i].push({skinID:void 0===o.dat[0][2]?null:n[o.dat[0][2]].skinID,msg:o.msg,bonus:o.bonus,progress:o.progress,ismax:o.invalid})}return t},this.getClearMissionData=function(){var t=[],e=r.getMissionData();for(var i in e)for(var a in e[i]){var o=e[i][a];o.ischeck&&t.push({skinID:void 0===o.dat[0][2]?null:n[o.dat[0][2]].skinID,msg:o.msg,bonus:o.bonus,progress:o.progress,ismax:o.invalid})}return t},this.getSendData=function(){return a.missionSendData},function(){void 0===i.process&&(i.process={});var t=r.getMissionData();for(var e in t)for(var n in t[e]){var a="mis_"+e+"_"+n;void 0===i.process[a]&&(i.process[a]={prog:0,clear:!1});var s=i.process[a];h&&"dayliy"==e&&(s.prog=0,s.clear=!1);var c=t[e][n];void 0===o.missionSendData[c.mem]&&(o.missionSendData[c.mem]={dayliy:0,total:0}),c.ischeck=!1,c.previd=s.prog,c.bonus=c.dat[0][1],c.progress=o.missionSendData[c.mem][e]+"s"+c.dat[0][0],c.progressMax=999;var d=c.update(c.dat[c.previd][0]);c.msg=d.msg}}()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),ue=function(t){function e(e,i,n){t.call(this);var a=this,o=this.addChild(new Pixim.Container),r=this.addChild(new Pixim.Container);e.resources.spritesheets.day;var s=e.resources.spritesheets.shc,h=e.resources.spritesheets.mis,c=e.resources.spritesheets.topresult,d=r.addChild(new Pixim.Container),l=d.addChild(new Pixim.Container).addChild(new Pixim.Container).addChild(new PIXI.Sprite(s.popupback)),p=d.addChild(new Pixim.Container);l.height=670;var u=o.addChild(new PIXI.Graphics);u.beginFill(0,.6),u.drawRect(0,0,e.width,e.height),u.endFill(),u.visible=!1;var m=d.addChild(new PIXI.Sprite(h.titlelogo1));m.x=parseInt(l.width/2-m.width/2),m.y=8;var f=function(t){for(var n in p.children)p.children[n].task.clear();p.removeChildren();var a=p.addChild(new ve(e,{width:396,height:430})),o=i[t?"dayliy":"total"],r=new PIXI.Graphics;for(var s in r.beginFill(0,.01),r.drawRect(0,0,e.width,8),r.endFill(),a.emit("addContent",{content:r,heightSpace:8}),o){var h=o[s],c=new ye(e,{width:396,height:100},h.ismax,{skinID:h.skinID,bonus:h.bonus,mission:h.msg,value:h.progress});a.emit("addContent",{content:c,heightSpace:8})}a.x=l.width/2-a.width/2,a.y=170};f(!0);var y=0,v=d.addChild(new fe(e,!0,{width:l.width/2-2,height:78}));v.on("mytap",(function(){0!==y&&(v.emit("activeAnim"),x.emit("unactiveAnim"),f(!0),y=0)})),v.y=94;var x=d.addChild(new fe(e,!1,{width:l.width/2-2,height:78}));x.x=l.width-x.width,x.on("mytap",(function(){1!==y&&(v.emit("unactiveAnim"),x.emit("activeAnim"),f(!1),y=1)})),x.y=v.y,v.emit("activeAnim"),d.x=parseInt(-d.width/2),d.y=parseInt(-d.height/2),r.x=parseInt(e.width/2),r.y=parseInt(e.height/2)+20;var w=d.addChild(new PIXI.Sprite(c.okbutton));w.x=parseInt(l.width/2)-parseInt(w.width/2),w.y=l.height-w.height-6,w.interactive=!1,w.once("pointertap",(function(){C()}));var C=function(){yt.tween({target:a,name:"endanmA",time:20,main:function(t){var e=(1-t)*(1+2*t);r.scale.set(.1+.9*e),a.alpha=1-Math.min(1,t)},finish:function(){a.emit("pop")}})()};a.alpha=0,yt.tween({target:a,name:"beginanmA",time:20,main:function(t){var e=3*t*(1-t)+t*t;r.scale.set(.1+.9*e),a.alpha=Math.min(1,2*t)},finish:function(){w.interactive=!0}})()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),me=function(t){function e(e,i){t.call(this);var n=this,a=this.addChild(new Pixim.Container),o=this.addChild(new Pixim.Container);e.resources.spritesheets.day;var r=e.resources.spritesheets.shc,s=e.resources.spritesheets.mis,h=e.resources.spritesheets.topresult,c=o.addChild(new Pixim.Container),d=c.addChild(new Pixim.Container).addChild(new Pixim.Container).addChild(new PIXI.Sprite(r.popupback)),l=c.addChild(new Pixim.Container);d.height=670;var p=a.addChild(new PIXI.Graphics);p.beginFill(0,.6),p.drawRect(0,0,e.width,e.height),p.endFill(),p.visible=!1;var u=c.addChild(new PIXI.Sprite(s.titlelogo2));u.x=parseInt(d.width/2-u.width/2),u.y=8;!function(){for(var t in l.children)l.children[t].task.clear();l.removeChildren();var n=l.addChild(new ve(e,{width:396,height:520})),a=i,o=new PIXI.Graphics;for(var r in o.beginFill(0,.01),o.drawRect(0,0,e.width,16),o.endFill(),n.emit("addContent",{content:o,heightSpace:8}),a){var s=a[r],h=new ye(e,{width:396,height:100},!0,{skinID:s.skinID,bonus:s.bonus,mission:s.msg,value:s.progress});n.emit("addContent",{content:h,heightSpace:8})}n.x=d.width/2-n.width/2,n.y=96}(),c.x=parseInt(-c.width/2),c.y=parseInt(-c.height/2),o.x=parseInt(e.width/2),o.y=parseInt(e.height/2)+20;var m=c.addChild(new PIXI.Sprite(h.okbutton));m.x=parseInt(d.width/2)-parseInt(m.width/2),m.y=d.height-m.height-6,m.interactive=!1,m.once("pointertap",(function(){f()})),n.alpha=0;var f=function(){yt.tween({target:n,name:"endanmA",time:20,main:function(t){var e=(1-t)*(1+2*t);o.scale.set(.1+.9*e),n.alpha=1-Math.min(1,t)},finish:function(){n.emit("pop")}})()};yt.tween({target:n,name:"beginanmA",time:20,main:function(t){var e=3*t*(1-t)+t*t;o.scale.set(.1+.9*e),n.alpha=Math.min(1,2*t)},finish:function(){m.interactive=!0}})()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),fe=function(t){function e(e,i,n){t.call(this);var a=this,o=this.addChild(new Pixim.Container);e.resources.spritesheets.day,e.resources.spritesheets.shc;var r=e.resources.spritesheets.mis,s=o.addChild(new PIXI.Sprite(r[i?"logo_daily":"logo_total"])),h=o.addChild(new PIXI.Sprite(r.et_underline));h.anchor.y=.5,h.alpha=0,h.x=parseInt(s.width/2-h.width/2),h.y=s.height-12,a.interactive=!0,a.on("pointertap",(function(){a.emit("mytap")})),a.on("activeAnim",(function(){yt.tween({target:a,name:"beginanmA",time:4,main:function(t){var e=1-Math.pow(1-t,2);h.scale.x=.1+.9*e,h.alpha=Math.min(1,t)},finish:function(){}})()})),a.on("unactiveAnim",(function(){yt.tween({target:a,name:"beginanmA",time:2,main:function(t){h.alpha=1-t},finish:function(){}})()}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),ye=function(t){function e(e,i,n,a){t.call(this);var o=this.addChild(new Pixim.Container),r=e.resources.spritesheets.day,s=e.resources.spritesheets.mis;e.resources.spritesheets.shc;var h=o.addChild(new PIXI.Graphics);h.alpha=.01;var d=o.addChild(new PIXI.Container),l=o.addChild(new PIXI.Container);!function(){d.removeChildren(),l.removeChildren();for(var t=0,p=0;p<a.mission.length;p++){var u=o.addChild(new PIXI.Text(a.mission[p],{stroke:0,strokeThickness:1,fill:0,fontSize:24,fontWeight:"bold"}));u.x=12,u.y=t,t+=u.height+2}var m=o.height+10;if(null===a.skinID)for(var f=a.bonus+"",y=0,v=f.length-1;v>=0;v--){var x=d.addChild(new PIXI.Sprite(r["a"+f[v]]));x.scale.set(.38),y-=x.width-4,x.x=y}else{var w=d.addChild(new c(e,null,{normal:new Pixim.Container,timer:new Pixim.Container},{cutter:0,roller:0,machin:0},a.skinID));w.scale.set(.38),w.x=parseInt(w.width/2)-42,w.y=8,w.task.clear("dustEffectMain")}d.x=i.width-20,d.y=m;for(var C=a.value+"",g=0,_=C.length-1;_>=0;_--){var I=l.addChild(new PIXI.Sprite(r["a"+C[_]]));I.scale.set(.38),g-=I.width-4,I.x=g}if(l.x=d.x-d.width-32,l.y=m,null===a.skinID){var P=o.addChild(new PIXI.Sprite(r.coin));P.scale.set(.52),P.x=d.x-d.width-P.width+5,P.y=parseInt(m-4)}var b=o.addChild(new PIXI.Sprite(s.et_underline2));if(b.x=parseInt(i.width/2-b.width/2),b.y=parseInt(o.height+11),n){var k=o.addChild(new PIXI.Sprite(r.checkmark));k.x=parseInt(i.width/2-k.width/2),k.y=parseInt(o.height/2-k.height/2),k.alpha=1}h.beginFill(16777215,1),h.drawRect(0,0,i.width,o.height),h.endFill()}()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),ve=function(t){function e(e,i){t.call(this);var n=this,a=this.addChild(new Pixim.Container),o=function(t,e,i,n){t.clear(),t.beginFill(e,i),t.drawRect(0,0,n.width,n.height),t.endFill()},r=a.addChild(new Pixim.Container),s=a.addChild(new Pixim.Container),h=[],c=0;this.on("addContent",(function(t){t.content.y=r.height+(r.children.length>0?t.heightSpace:0),r.addChild(t.content),t.content.interactive=!0,t.content.on("pointerdown",(function(){t.content})),h.push(t.content),c=r.height}));var d=s.addChild(new PIXI.Graphics);o(d,0,1,{width:i.width,height:i.height}),r.mask=d;!function(){var t=s.addChild(new PIXI.Graphics);o(t,16711680,.01,{width:i.width,height:i.height}),t.interactive=!0;var e,a="sclollTask",d=0,l=!1,p=function(){for(var t in h){var e=r.y+h[t].y;h[t].visible=!(e>728||e<-128)}},u=function(t){if(l){n.task.clear(a),l=!1;var o,s,h=Math.max(0,c-i.height),u=[e<-h,e>0],m=4*d,f=e,y=u[0]||u[1]?0:1,v=!1,x=0,w=0;Math.abs(d)<=0&&1===y||n.task.on(a,(function(t){0===y?(u[0]||u[1])&&(o=1-Math.pow(1-x,2),u[0]?e=(1-o)*f+o*-h:u[1]&&(e=(1-o)*f),x<1?x=Math.min(1,x+1/18*t.delta):n.task.clear(a)):1===y&&(o=1-Math.pow(1-x,2),e>-h&&e<0?e=f-m*o:(s=1-Math.pow(1-w,2),e=m>0?(1-s)*(f-m*o)+s*-h:(1-s)*(f-m*o),w<1?w=Math.min(1,w+1/14*t.delta):n.task.clear(a),v=!0),x<1?x=Math.min(1,x+.05*t.delta):v||n.task.clear(a)),r.y=e,p()}))}};t.on("pointerdown",(function(t){n.task.clear(a);t.data.global.x;var o=t.data.global.y,s=(r.x,r.y),h={x:t.data.global.x,y:t.data.global.y};l=!0,n.task.on(a,(function(n){var a=t.data.global.y;e=s-(o-a),function(){var t=Math.max(0,c-i.height),n=!1;if(e<-t){var a=Math.abs(t-Math.abs(e)),o=Math.min(1,a/600),r=1-Math.pow(1-o,2);e=-t-120*r,n=!0}else if(e>0){var s=Math.min(1,e/600),h=1-Math.pow(1-s,2);e=120*h,n=!0}}(),r.y=e,d=h.y-a,h.y=a,p()}))})),t.on("pointerup",u),t.on("pointerupoutside",u)}()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),xe=function(t){function e(e,i,n,a){t.call(this);var o=this,r=e.resources.spritesheets.skin,s=o.addChild(new Pixim.Container),h=s.addChild(new Pixim.Container),c=h.addChild(new Pixim.Container),d=h.addChild(new Pixim.Container);for(var l in this.getValue=function(){return n.list[_].value},i.list){var p=i.list[l];n.list[l].isUsed=p.isUsed,n.list[l].isRelease=p.isRelease,p.isUsed&&(n.list[l].isSelect=!0)}this.emit("init",n.list);var u=0;for(var m in n.list)n.list[m].isRelease&&u++;var f=s.addChild(new ge(e,a));f.x=e.width-f.width-20,f.y=54;var y=s.addChild(new Ce(e,u,n.list.length));y.x=parseInt(e.width/2-y.width/2),y.y=194;var v=s.addChild(new we(e));v.x=parseInt(e.width/2-v.width/2),v.y=710,v.on("pointertap",(function(){for(var t in n.list)n.list[t].isUsed=!1;n.list[_].isUsed=!0,w.emit("allUpdate"),o.emit("useSkinSelect",n.list[_]),v.emit("changeSelect",n.list[_].isRelease&&!n.list[_].isUsed)}));var x=s.addChild(new PIXI.Sprite(r.btn_back));x.x=22,x.y=710,x.interactive=!0,x.on("pointertap",(function(){A(),o.emit("back",n.list)}));for(var w=null,C=0,g=0,_=0,I=!1,P=[],b=0;b<n.list.length;b++)P.push({id:b,pri:n.list[b].pri});P.sort((function(t,e){return t.pri>e.pri?1:-1}));var k=function(){var t=d.addChild(new _e(e,n.list,9*C,P));return t.x=parseInt(e.width/2-t.width/2),t.y=240,t.once("pop",(function(){t.task.clear(),t.parent.removeChild(t)})),t.on("currentChange",(function(t){g=t,I=!0})),t};(w=k()).emit("bgnPhase",{isBegin:!0,isNext:!0});var M=c.addChild(new PIXI.Graphics);M.beginFill(16711680,.01),M.drawRect(w.x,w.y,w.width,w.height),M.endFill();for(var S=s.addChild(new Pixim.Container),X=0;X<parseInt(n.list.length/9+1);X++){var D=S.addChild(new PIXI.Sprite(r.pager_dot));D.x=(D.width+24)*X}S.x=parseInt(e.width/2-S.width/2),S.y=670;var j=function(){for(var t=0;t<S.children.length;t++){S.children[t].alpha=C===t?1:.4}};for(var O in j(),n.list)n.list[O].isSelect=i.list[O].isUsed,i.list[O].isUsed&&(_=O);f.emit("upDate",n.list[_]),f.visible=!n.list[_].isRelease,w.emit("allUpdate"),v.emit("changeSelect",n.list[_].isRelease&&!n.list[_].isUsed);!function(){var t=0,e=!1;h.interactive=!0,h.on("pointerdown",(function(i){e||(e=!0,t=i.data.global.x)}));var i=function(i){if(e){e=!1;var a=t-i.data.global.x,r=a>0;if(!(C<=0&&!r)&&(!(9*(C+1)>=n.list.length&&r)&&Math.abs(a)>3)){if(r){if(9*(C+1)>=n.list.length)return}else if(C<=0)return;C+=r?1:-1,j(),w.emit("endPhase",r),(w=k()).emit("bgnPhase",{isBegin:!1,isNext:r})}else if(I){for(var s in _=g,n.list)n.list[s].isSelect=!1;n.list[_].isSelect=!0,f.emit("upDate",n.list[_]),f.visible=!n.list[_].isRelease,w.emit("allUpdate"),v.emit("changeSelect",n.list[_].isRelease&&!n.list[_].isUsed),o.emit("changePlayerSkin",n.list[_])}I=!1}};h.on("pointerup",(function(t){i(t)})),h.on("pointerupoutside",(function(t){i(t)}))}();var A=function(){s.alpha=1,yt.tween({target:o,name:"endAnime",time:10,main:function(t){var e=Math.pow(t,2);s.y=740*e,s.alpha=1-t},finish:function(){o.emit("pop")}})()};s.alpha=0,yt.tween({target:o,name:"beginAnime",time:18,main:function(t){var e=1-Math.pow(1-t,2);s.y=740*(1-e),s.alpha=t},finish:function(){}})()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),we=function(t){function e(e){t.call(this);var i=this,n=e.resources.spritesheets.skin,a=i.addChild(new Pixim.Container).addChild(new PIXI.Sprite(n.btn_use));i.on("changeSelect",(function(t){a.alpha=t?1:.4,i.interactive=t}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Ce=function(t){function e(e,i,n){t.call(this);var a=e.resources.spritesheets.skin,o=this.addChild(new Pixim.Container).addChild(new PIXI.Sprite(a.carselect_title_line)),r=o.addChild(new pt(i+"a"+n,{sheet:e.resources.spritesheets.nm,prefix:"n",anchor:0,interval:.7}));r.scale.set(o.height/r.height*.8),r.x=o.width-r.width}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),ge=function(t){function e(e,i){t.call(this);var n=e.resources.spritesheets.skin,a=this.addChild(new Pixim.Container),o=a.addChild(new PIXI.Sprite(n.carselect_textbox));o.alpha=.5;for(var r=[],s=0;s<5;s++){var h=a.addChild(new PIXI.Text("",{fill:16777215,fontSize:15,fontWeight:"bold"}));h.y=10+22*s,r.push(h)}var c=a.addChild(new PIXI.Text("",{fill:16777215,fontSize:18,fontWeight:"bold"}));c.x=c.y=0,this.on("upDate",(function(t){for(var e=0;e<t.msg.length;e++)r[e].text=t.msg[e],r[e].x=o.width-10-r[e].width;t.prog.now&&(c.text=i[t.prog.now].total+"/"+t.prog.max,c.x=o.width-c.width-10,c.y=o.height-c.height-10)}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),_e=function(t){function e(e,i,n,a){t.call(this);for(var o=this,r=e.resources.spritesheets.skin,s=o.addChild(new Pixim.Container),h=n,d=[],l=function(t){var n=h<i.length,l=n?a[h].id:0,p=s.addChild(new Pixim.Container),u=p.addChild(new PIXI.Sprite(r.carselect_frame));u.alpha=.85;var m=p.addChild(new PIXI.Sprite(r.carselect_select)),f=p.addChild(new PIXI.Sprite(r.carselect_choice));f.x=parseInt(u.width/2-f.width/2),f.y=parseInt(u.height/2-f.height/2),m.alpha=.01,f.alpha=.01,p.x=t%3*(u.width+10),p.y=parseInt(t/3)*(u.height+10);var y=p.addChild(new c(e,null,{normal:new Pixim.Container,timer:new Pixim.Container},{cutter:0,roller:0,machin:0},n?i[l].skinID:0));y.scale.set(.6),y.x=parseInt(u.width/2),y.y=parseInt(u.height/2),y.task.clear("dustEffectMain");var v=p.addChild(new PIXI.Sprite(r.carselect_secret));v.x=parseInt(u.width/2-v.width/2),v.y=parseInt(u.height/2-v.height/2),v.alpha=.01;var x=p.addChild(new PIXI.Sprite(r.carselect_time)),w=x.addChild(new pt(n?"p"+i[l].value[0]:"",{sheet:e.resources.spritesheets.nm,prefix:"n",anchor:0,interval:.7}));if(w.scale.set(x.height/w.height*.8),w.x=34,w.y=1,x.x=x.y=4,n){p.interactive=!0;var C=l;p.on("pointertap",(function(){o.emit("currentChange",C)})),p.on("update",(function(){var t=i[C];m.alpha=t.isSelect?.8:.01,f.alpha=t.isUsed?.8:.01,t.isRelease||(v.alpha=1,y.emit("unlockAnime"))})),x.visible=!(i[C].value[0]<=0)}else p.alpha=.01;h++,d.push(p)},p=0;p<9;p++)l(p);var u=function(){for(var t in d){d[t].emit("update")}};u();o.once("endPhase",(function(t){!function(t){var e=(s.width+80)*(t?1:-1);yt.tween({target:o,name:"endAnime",time:10,main:function(t){s.x=-e*t,s.alpha=1-t},finish:function(){o.emit("pop")}})()}(t)})),o.once("bgnPhase",(function(t){!function(t,e){if(e)s.alpha=1;else{s.alpha=0;var i=(s.width+80)*(t?1:-1);s.x=i,yt.tween({target:o,name:"beginAnime",time:10,main:function(t){s.x=i*(1-t),s.alpha=t},finish:function(){}})()}}(t.isNext,t.isBegin)})),o.on("allUpdate",u)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Ie=function(t){function e(e,i){t.call(this);var n=this,a=e.resources.spritesheets.skin,o=n.addChild(new Pixim.Container),r=o.addChild(new PIXI.Sprite(a["gotcar_bg.png"])),s=o.addChild(new PIXI.Sprite(a["gotcar_concentratedline.png"])),h=o.addChild(new PIXI.Sprite(a["gotcar_gotthecar.png"])),d=o.addChild(new PIXI.Sprite(a["gotcar_gotthecar.png"])),l=o.addChild(new PIXI.Sprite(a.btn_share));l.x=-l.width/2,l.alpha=0,l.once("pointertap",(function(){n.emit("share")})),l.visible=!1;var p=o.addChild(new PIXI.Sprite(a["btn_gotcar_ok.png"]));p.x=-p.width/2,p.alpha=0,p.once("pointertap",(function(){x()})),r.anchor.set(.5),s.anchor.set(.5),h.anchor.set(.5),d.anchor.set(.5),h.y=d.y=-240;var u=o.addChild(new c(e,null,{normal:new Pixim.Container,timer:new Pixim.Container},{cutter:0,roller:0,machin:0},i.skinID));if(u.scale.set(.6),u.task.clear("dustEffectMain"),parseInt(i.value[0])>0){var m=o.addChild(new PIXI.Sprite(a["gotcar_time.png"])),f=m.addChild(new pt("p"+i.value[0],{sheet:e.resources.spritesheets.nm,prefix:"n",anchor:0,interval:.7}));f.scale.set(m.height/f.height*.8),f.x=58,f.y=3,m.x=-parseInt(m.width/2),m.y=parseInt(-m.height/2-u.height/2-40)}var y=function(){h.alpha=0,d.alpha=0;var t=yt.tween({target:n,name:"logoTask00",time:16,main:function(t){var e=Math.pow(t,2);h.alpha=t,h.scale.set(2.2-1.2*e)},finish:function(){e()}}),e=yt.tween({target:n,name:"logoTask01",time:8,main:function(t){var e=1-Math.pow(1-t,2);d.alpha=1-t,d.scale.set(1+.12*e)},finish:function(){v()}});t()};y();var v=function(){var t=yt.tween({target:n,name:"buttonsTask00",time:50,main:function(t){},finish:function(){e()}}),e=yt.tween({target:n,name:"buttonsTask00",time:40,main:function(t){var e=1-Math.pow(1-t,2);l.y=100+40*(1-e),l.alpha=t},finish:function(){l.interactive=!0,i()}}),i=yt.tween({target:n,name:"buttonsTask00",time:18,main:function(t){},finish:function(){a()}}),a=yt.tween({target:n,name:"buttonsTask00",time:40,main:function(t){var e=1-Math.pow(1-t,2);p.y=290+40*(1-e),p.alpha=t},finish:function(){p.interactive=!0}});t()};y();u.alpha=s.alpha=r.alpha=0,yt.tween({target:n,name:"beginAnime",time:10,main:function(t){u.alpha=s.alpha=r.alpha=.9*t},finish:function(){}})();var x=function(){n.interactive=n.interactiveChildren=!1,yt.tween({target:n,name:"endAnime",time:8,main:function(t){o.alpha=.9*(1-t)},finish:function(){n.emit("pop")}})()};n.task.on("main",(function(t){s.rotation+=.008*t.delta})),this.x=e.width/2,this.y=e.height/2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Pe=function(t){function e(e){var i=this;t.call(this);var n=this.addChild(new Pixim.Container).addChild(new Pixim.Container);n.alpha=0;var a=n.addChild(new PIXI.Sprite(e.resources.spritesheets.shc.popupback));a.scale.y=.5,a.x=-Math.floor(a.width/2),a.y=-Math.floor(a.height/2);var o=n.addChild(new PIXI.Sprite(e.resources.images["popup_hardmode.png"]));o.scale.set(.94),o.x=-Math.floor(.5*o.width),o.y=a.y+8;var r=n.addChild(new PIXI.Sprite(e.resources.images["ui_button_yes.png"]));r.x=-Math.floor(r.width/2)-80,r.y=a.y+280,r.interactive=!0,r.once("pointertap",(function(){h(!0)}));var s=n.addChild(new PIXI.Sprite(e.resources.images["ui_button_no.png"]));s.x=80-Math.floor(s.width/2),s.y=r.y,s.interactive=!0,s.once("pointertap",(function(){h(!1)}));var h=function(t){r.interactive=s.interactive=!1,i.emit("con",t),yt.tween({target:i,name:"endAnime",time:26,main:function(t){var e=2.8*(1-t)*(1-(1-t))+(1-t)*(1-t);n.scale.set(e),n.alpha=1-t},finish:function(){i.emit("pop",t)}})()};yt.tween({target:i,name:"beginAnime",time:26,main:function(t){var e=2.8*t*(1-t)+t*t;n.scale.set(e),n.alpha=Math.min(1,3*t)},finish:function(){}})()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),be=function(t){function e(e){for(var i in t.call(this),this.$=e,this._snd=e.resources.sounds,this._canplay=!0,this._isMute=!1,this._sndDatas={},e.resources.sounds)this._sndDatas[i]={obj:e.resources.sounds[i],volume:[1,1]}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setMuteFlag=function(t){this.$.vars.api.muteSound(t)},e.prototype.getMuteFlag=function(){return this.$.vars.api.isMutedSound()},e.prototype.canPlay=function(t){},e.prototype.play=function(t){var e=void 0===t.isStop||t.isStop,i=void 0!==t.isLoop&&t.isLoop,n=void 0===t.volume?1:t.volume,a=this._sndDatas[t.name];e&&a.obj.stop(),a.volume[0]=n,a.obj.volume(a.volume[0]*a.volume[1]),a.obj.loop(i),a.obj.play();var o=t.name+"fadeTask";this.task.clear(o)},e.prototype.stop=function(t){this._sndDatas[t.name].obj.stop();var e=t.name+"fadeTask";this.task.clear(e)},e.prototype.fadeStop=function(t){var e=this,i=t.name+"fadeTask";this.task.clear(i);var n=this._sndDatas[t.name],a=1/t.time,o=n.volume[0],r=1;this.task.on(i,(function(t){n.volume[0]=o*r,n.obj.volume(n.volume[0]*n.volume[1]),r>0?r=Math.max(0,r-a*t.delta):(e.task.clear(i),n.obj.stop())}))},e.prototype.allStop=function(){this.task.clear(),this.$.vars.api.stopAllSounds()},e}(Pixim.Container),ke=function(t){function e(e,i){t.call(this);var n=this,a=e.resources.spritesheets.mis,o=i,r=this.addChild(new PIXI.Container),s=r.addChild(new PIXI.Sprite(o?a.bt_off:a.bt_on));s.x=-s.width/2,s.y=-s.height/2,r.x=r.width/2,r.y=r.height/2;var h=!1,c=function(){h&&(h=!1,o=!o,n.emit("mytap",o),s.texture=o?a.bt_off:a.bt_on,yt.tween({target:n,name:"pushAnime",time:3,main:function(t){var e=1-Math.pow(1-t,2);r.scale.set(.9+.1*e)},finish:function(){}})())};this.on("pointerdown",(function(){h||(h=!0,yt.tween({target:n,name:"pushAnime",time:3,main:function(t){var e=1-Math.pow(1-t,2);r.scale.set(1-.1*e)},finish:function(){}})())})),this.on("pointerup",c),this.on("pointerupoutside",c),this.interactive=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Me=function(t){function e(e){var i=this;t.call(this);var n=this,a=this.addChild(new Pixim.Container),r=this.addChild(new oe(e)),s=yt.getNowDayString(),h=0,c=!0,d=!0,l=0,p=this.addChild(new de(e));p.x=e.width,p.visible=!1;var u,m,f,y,v,x,w={bestScore:0,posCoin:0,Itemlevel:{cutter:0,roller:0,machin:0},isShortcut:!1,loginData:{from:s,continueCount:0,clearDays:0,isgetfirstbonus:!1},debug:{isInit:!1},mission:{sends:{playCount:{dayliy:0,total:0},vanishCount:{dayliy:0,total:0},coinCount:{dayliy:0,total:0},timeoverCount:{dayliy:0,total:0},getitemCount:{dayliy:0,total:0},traningCount:{dayliy:0,total:0},friendplayCount:{dayliy:0,total:0},shareCount:{dayliy:0,total:0},loginCount:{dayliy:0,total:0},conloginCount:{dayliy:0,total:0},aliveTime:{dayliy:0,total:0}},dayliyID:null},isMission:!1,keyCount:0,canContinueBonusStage:!1,skin:{list:[]}},C=function(t,e){w.mission.sends[t].dayliy+=e,w.mission.sends[t].total+=e},g=[{mark:!1,coin:500,skinID:null},{mark:!0,coin:0,skinID:1},{mark:!1,coin:500,skinID:null},{mark:!1,coin:500,skinID:null},{mark:!1,coin:500,skinID:null},{mark:!1,coin:500,skinID:null},{mark:!0,coin:0,skinID:2}],_=!1,I=!0,P=w.keyCount,b=n.addChild(new be(e)),k=!1;this.on("titleSceneStart",(function(t){d&&w.keyCount>=3&&(k=!0),d=!1,P=w.keyCount,l=0,a.removeChildren(),h<=0&&(p.emit("add",":"+w.loginData.from),p.emit("add",":"+s),p.emit("add","  :DAY"+(w.loginData.clearDays+1)+"")),h++;var o=w,f=u.length-1,y=a.addChild(new Et(e,b,k,w.keyCount,_,w.mission.sends.playCount.total<=1,I));I=!1,y.emit("changePlayerSkin",{skinID:x.skinID,isRelease:!0}),y.on("callSkinSelect",(function(){y.emit("changePlayerSkin",{skinID:x.skinID,isRelease:!0}),y.emit("iconVisible",!1);var t=a.addChild(new xe(e,w.skin,m,w.mission.sends));t.once("back",(function(t){r.emit("setDataAndFlushData",{data:w,end:function(){for(var e in y.emit("changePlayerSkin",{skinID:x.skinID,isRelease:!0}),t)w.skin.list[e].isUsed=t[e].isUsed;y.emit("iconVisible",!0)}})})),t.once("pop",(function(){t.task.clear(),t.parent.removeChild(t)})),t.on("changePlayerSkin",(function(t){y.emit("changePlayerSkin",{skinID:t.skinID,isRelease:t.isRelease})})),t.on("useSkinSelect",(function(t){x=t}))}));var M=y.addChild(new ke(e,b.getMuteFlag()));M.x=parseInt(e.width/2-M.width/2),M.y=16,M.on("mytap",(function(t){b.setMuteFlag(t)}));var S=[],X=function(i){var o=function(t,i){var a=n.addChild(new re(e));a.once("callShortDiag",(function(){r.emit("createShortCut",{ok:function(){t?(w.isShortcut=!0,w.posCoin+=1e4,y.emit("upDateDetailData",j()),r.emit("saveSaveData",{saveData:w,saveFinish:function(){a.emit("result",!0)}})):a.emit("result",!1)},ng:function(){a.emit("result",!1)}})})),a.once("pop",(function(){a.task.clear(),a.parent.removeChild(a),i()})),a.emit("begin",t)};t.isView?r.emit("canShortCutDiag",{ok:function(){var t,n,r;w.mission.sends.playCount.total<2?i():w.isShortcut?(t=!w.isShortcut,n=y._root.addChild(new Pixim.Container),(r=n.addChild(new se(e,t))).x=parseInt(e.width-r.width/2-8),r.y=parseInt(280+r.height/2),r.once("mytap",(function(){r.visible=!1,a.interactive=a.interactiveChildren=!1,o(t,(function(){a.interactive=a.interactiveChildren=!0}))})),y.shortcutIcon=n,i()):o(!w.isShortcut,(function(){i()}))},ng:function(){i()}}):i()},D=function(t){var i=v.missionsSetup();for(var a in i.getCoin>0&&(o.posCoin+=i.getCoin),i.getSkinList)w.skin.list[i.getSkinList[a]].isRelease=!0,S.push(m.list[i.getSkinList[a]]);r.emit("saveSaveData",{saveData:w,saveFinish:function(){!function(){var a=v.getClearMissionData();if(a.length>0){y.emit("upDateDetailData",j()),i.getCoin>0&&y.emit("coinFlash");var o=n.addChild(new me(e,a));o.once("pop",(function(){o.task.clear(),o.parent.removeChild(o),t()}))}else t();v.missionsUpdate()}()}})};y.once("callNotices",(function(){a.interactive=a.interactiveChildren=!1,X((function(){var t,d,p,u,f,v;t=function(){D((function(){var t,s;t=function(){var t;t=function(){!function(t){var n=!1;if(Math.random()<=.2&&o.posCoin>=1e4&&!k&&(n=!0),n){var a=i.addChild(new Pe(e));a.x=e.width/2,a.y=e.height/2,a.once("con",(function(t){t&&y.emit("hardmode")})),a.once("pop",(function(e){a.task.clear(),a.removeChildren(),i.removeChild(a),e?(l=1,t()):t()}))}else t()}((function(){r.emit("setDataAndFlushData",{data:w,end:function(){a.interactive=a.interactiveChildren=!0}})}))},_?(y.emit("keyStockAnim"),y.once("maxAnimEnd",(function(){t()})),_=!1):t()},s=function(i){if(S.length<=i)t();else{var a=n.addChild(new Ie(e,S[i]));a.once("pop",(function(){a.task.clear(),a.parent.removeChild(a),s(i+1)})),a.once("share",(function(){a.interactive=a.interactiveChildren=!1,r.emit("callPlayerListDialog",{resolve:function(){C("shareCount",1),D((function(){a.interactive=a.interactiveChildren=!0}))},reject:function(){C("shareCount",1),D((function(){a.interactive=a.interactiveChildren=!0}))}})}))}},S.length>0?s(0):t()}))},v=function(i){var a=w.loginData,o=n.addChild(new ce(e,a.clearDays,a.clearDays,g,b,m));o.once("addCoin",(function(){i.insentiveBonus-w.posCoin>0&&y.emit("coinFlash"),w.posCoin=i.insentiveBonus,y.emit("upDateDetailData",j())})),o.once("pop",(function(){o.task.clear(),o.parent.removeChild(o),t()}))},d=w.loginData,p=yt.getProgressDay(d.from,s),u=w.posCoin,f=!1,(c?2==h:p>0&&1==h||!d.isgetfirstbonus)&&d.clearDays<g.length&&(d.clearDays++,f=!0,w.posCoin+=g[Math.max(0,d.clearDays-1)].coin),d.clearDays>=2&&!w.skin.list[1].isRelease&&(w.skin.list[1].isRelease=!0,S.push(m.list[1])),d.clearDays>=7&&!w.skin.list[2].isRelease&&(w.skin.list[2].isRelease=!0,S.push(m.list[2])),d.from=s,d.isgetfirstbonus=!0,r.emit("saveSaveData",{saveData:w,saveFinish:function(){if(f){var e=w.posCoin;w.posCoin=u,v({insentiveBonus:e}),f=!1}else t()}})}))}));var j=function(){var t={cutter:o.Itemlevel.cutter,roller:o.Itemlevel.roller,machin:o.Itemlevel.machin},e=[{isMax:t.cutter>=f,level:t.cutter,need:u[t.cutter].cutter.need,value:u[t.cutter].cutter.val,afvalue:u[Math.min(t.cutter+1,u.length-1)].cutter.val},{isMax:t.roller>=f,level:t.roller,need:u[t.roller].roller.need,value:u[t.roller].roller.val,afvalue:u[Math.min(t.roller+1,u.length-1)].roller.val},{isMax:t.machin>=f,level:t.machin,need:u[t.machin].machin.need,value:u[t.machin].machin.val,afvalue:u[Math.min(t.machin+1,u.length-1)].machin.val}];return{best:o.bestScore,coin:o.posCoin,traning:e}};y.on("missionConf",(function(){a.interactive=a.interactiveChildren=!1;var t=n.addChild(new ue(e,v.getMissionData(),m.list));t.once("pop",(function(){t.task.clear(),t.parent.removeChild(t),a.interactive=a.interactiveChildren=!0}))})),y.emit("upDateDetailData",j()),y.on("upDateTraningDatas",(function(t){var e=["cutter","roller","machin"];o.posCoin=Math.max(o.posCoin-j().traning[t].need,0),o.Itemlevel[e[t]]=Math.min(o.Itemlevel[e[t]]+1,f),y.emit("upDateDetailData",j())})),y.on("gotoLeaderBoard",(function(){y.interactiveChildren=!1,r.emit("loadLeaderBoard",{resolveFinish:function(t){var i=a.addChild(new Qt(e,t));i.once("returnTop",(function(){i.task.clear(),a.removeChild(i),i=null,y.interactiveChildren=!0}))},rejectFinish:function(){y.interactiveChildren=!0}})})),y.on("callShareDiag",(function(){y.interactiveChildren=!1,r.emit("callPlayerListDialog",{resolve:function(){y.interactiveChildren=!0,C("shareCount",1),a.interactive=a.interactiveChildren=!1,D((function(){a.interactive=a.interactiveChildren=!0}))},reject:function(){y.interactiveChildren=!0,C("shareCount",1),a.interactive=a.interactiveChildren=!1,D((function(){a.interactive=a.interactiveChildren=!0}))}})})),y.once("gotoGameScene",(function(){y.task.clear(),a.removeChild(y),y=null,r.emit("setDataAndFlushData",{data:w,end:function(){e.vars.api.callAsync("playGame").then((function(){n.emit("gameSceneStart")}))}})}))})),this.on("gameSceneStart",(function(){var t=w,i=t.Itemlevel.cutter,s=t.Itemlevel.roller,h=t.Itemlevel.machin,c={cutter:u[i].cutter.val,roller:u[s].roller.val,machin:u[h].machin.val},d=a.addChild(new zt(e,c,w.bestScore,b,x,w.keyCount,k,0===w.mission.sends.playCount.total,f,y,l,t.posCoin)),p=a.addChild(new o(e));p.visible=!1;var m=function(){d.task.clear(),p.task.clear(),a.removeChild(d),a.removeChild(p),a.removeChildren(),d=p=null};d.once("setPosCoin",(function(e){t.posCoin=Math.max(0,t.posCoin+e)})),d.once("dataSave",(function(t){r.emit("saveSaveData",{saveData:w,saveFinish:function(){t()}})})),d.on("playRewordAds",(function(t){r.emit("playRewordAd",{loadFinish:function(){t.loadfin()},showFinish:function(){t.clb(!0)},rejectFinish:function(){t.clb(!1)}})})),d.once("gameOver",(function(e){m();var i,a,o,s=w.bestScore;r.emit("postPlayerData",{resolve:function(){},reject:function(){},sprite:M({score:e.score,icon:r.getPlayerIcon()}),title:"Thank You!!!",text:"Thank you For Playing !!!!"}),w.bestScore<e.score&&(w.bestScore=e.score),w.keyCount=e.keyCount,C("playCount",1),k||(C("vanishCount",e.score),C("coinCount",e.coin),C("timeoverCount",e.istimeover?1:0),i="aliveTime",a=e.alivetime,o=w.mission.sends[i],a>o.dayliy&&(o.dayliy=a),a>o.total&&(o.total=a)),1===l&&(t.posCoin=Math.max(0,t.posCoin-1e4)),r.emit("setDataAndFlushData",{data:w,end:function(){w.mission.sends.playCount.total>=3?r.emit("playInterstitialAd",{finishAdPlay:function(){n.emit("resultSceneStart",{keyCount:e.keyCount,istimeover:e.istimeover,best:s,score:e.score,coin:e.coin})}}):n.emit("resultSceneStart",{keyCount:e.keyCount,istimeover:e.istimeover,best:s,score:e.score,coin:e.coin})}})})),d.once("gotoTitle",(function(t){m(),e.vars.api.callAsync("quitGame").then((function(){r.emit("SCGviewAdAsync",(function(){n.emit("titleSceneStart",{isView:!0,isShotCutDiagView:!0})}))}))}))})),this.on("resultSceneStart",(function(t){var o=[];e.vars.api.stopAllSounds();var s=function(t){var i=v.missionsSetup();for(var a in i.getCoin>0&&(w.posCoin+=i.getCoin),i.getSkinList)w.skin.list[i.getSkinList[a]].isRelease=!0,o.push(m.list[i.getSkinList[a]]);r.emit("saveSaveData",{saveData:w,saveFinish:function(){!function(){var i=v.getClearMissionData();if(i.length>0){var a=n.addChild(new me(e,i));a.once("pop",(function(){a.task.clear(),a.parent.removeChild(a),t()}))}else t();v.missionsUpdate()}()}})},h=a.addChild(new Ht(e,{isBonusStageDetail:1===w.mission.sends.playCount.total,isContinue:w.canContinueBonusStage,score:t.score,best:t.best,coin:t.coin,isBonusStage:k},b)),c=function(t){e.vars.api.callAsync("finishPlay").then((function(){t()})).catch((function(){t()}))},d=function(){h.task.clear(),h.destroy()};h.on("waitPhase",(function(){a.interactive=a.interactiveChildren=!1,function(t){if(w.mission.sends.playCount.total>1)t();else{var i=n.addChild(new Ot(e));i.x=e.width/2-i.width/2,i.y=e.height/2-i.height/2,i.once("pop",(function(){i.task.clear(),i.parent.removeChild(i),t()}))}}((function(){s((function(){var t,i;t=function(){a.interactive=a.interactiveChildren=!0,h.emit("gotoRouretPhase")},i=function(a){if(o.length<=a)t();else{var h=n.addChild(new Ie(e,o[a]));h.once("pop",(function(){h.task.clear(),h.parent.removeChild(h),i(a+1)})),h.once("share",(function(){h.interactive=h.interactiveChildren=!1,r.emit("callPlayerListDialog",{resolve:function(){C("shareCount",1),s((function(){h.interactive=h.interactiveChildren=!0}))},reject:function(){C("shareCount",1),s((function(){h.interactive=h.interactiveChildren=!0}))}})}))}},o.length>0?i(0):t()}))}))})),h.on("callShareDiag",(function(){h.interactive=h.interactiveChildren=!1,r.emit("callPlayerListDialog",{resolve:function(){h.interactive=h.interactiveChildren=!0,C("shareCount",1),C("friendplayCount",1)},reject:function(){h.interactive=h.interactiveChildren=!0,C("shareCount",1)}})})),h.on("playAds",(function(n){var a=function(i,a){var o=k,r=k?t.coin:n.getCoin;w.posCoin+=r,k?w.canContinueBonusStage&&i?(w.canContinueBonusStage=!1,w.keyCount=3,k=!0):(w.keyCount=0,k=!1):(1===w.mission.sends.playCount.total||w.keyCount>=3)&&(w.canContinueBonusStage=!0,w.keyCount=3,k=!0),_=P<w.keyCount,function(i,n){e.vars.api.setDataAsync("savedata",w,"always").then((function(){return e.vars.api.sendScoreAsync(i?t.score:0)})).then((function(){n()})).catch((function(){n()}))}(!o,(function(){a()}))};n.isPlay?e.vars.api.viewRewardAdAsync().then((function(){i.interactive=i.interactiveChildren=!1,h.once("AdRewardGetNoticeFinish",(function(){a(!0,(function(){i.interactive=i.interactiveChildren=!0}))})),h.emit("AdRewardGetNotice",{isGotReward:!0,endclb:function(){c((function(){d(),i.emit("titleSceneStart",{isView:!0,isShotCutDiagView:!0})}))}})})).catch((function(){n.adsPlayReject()})):(i.interactive=i.interactiveChildren=!1,h.once("AdRewardGetNoticeFinish",(function(){a(!1,(function(){i.interactive=i.interactiveChildren=!0}))})),h.emit("AdRewardGetNotice",{isGotReward:!1,endclb:function(){c((function(){d(),i.emit("titleSceneStart",{isView:!0,isShotCutDiagView:!0})}))}}))}))})),r.emit("loadingSaveData",{levelJsonList:["level_itemtraning","level_skin","level_carspeed","level_timeup"],saveData:w,loadFinish:function(t){var i,a;u=t.levelDatas.level_itemtraning.traningDetail,m=t.levelDatas.level_skin.skinDataList,f=t.levelDatas.level_carspeed.carSpeedData,y=t.levelDatas.level_timeup.timeUp,x=m.list[0];var o,h,d=function(){for(var t in m.list){var e=w.skin.list;void 0===w.skin.list[t]&&(e[t]={},e[t].isUsed=m.list[t].isUsed,e[t].isRelease=m.list[t].isRelease)}for(var i in w.skin.list)if(w.skin.list[i].isUsed){x=m.list[i];break}};if(t.isFirstPlay||t.loadData.debug.isInit)d(),i=!1,a=!1,c=!0,v=n.addChild(new pe(e,w.mission,m.list)),C("conloginCount",1),C("loginCount",1),w.isMission=!0,v.missionsUpdate(),n.emit("titleSceneStart",{isFirstPlay:!0,isView:a,isShotCutDiagView:i});else{w=t.loadData,i=!w.isShortcut,a=!0,d(),c=!1;var l=yt.getProgressDay(w.loginData.from,s);if(l>0){for(var p in w.mission.dayliyID=null,w.mission.sends)w.mission.sends[p].dayliy=0;l<=1?C("conloginCount",1):(o="conloginCount",h=1,w.mission.sends[o].dayliy=h,w.mission.sends[o].total=h),C("loginCount",1)}r.emit("saveSaveData",{saveData:w,saveFinish:function(){v=n.addChild(new pe(e,w.mission,m.list)),t.loadData.isMission||(C("conloginCount",1),C("loginCount",1),t.loadData.isMission=!0,v.missionsUpdate()),n.emit("titleSceneStart",{isFirstPlay:!1,isView:a,isShotCutDiagView:i})}})}}});var M=function(t){var i=new PIXI.Container,n=i.addChild(new PIXI.Sprite(e.resources.images.bunner)),a=i.addChild(new PIXI.Container),o=a.addChild(new PIXI.Sprite(t.icon)),r=a.addChild(new PIXI.Graphics);r.beginFill(0,1),r.drawCircle(0,0,46),o.anchor.set(.5),o.scale.set(r.width/o.width),o.mask=r,a.x=n.width/2,a.y=114.5;var s=i.addChild(new pt(t.score,{color:0,sheet:e.resources.spritesheets.nm,prefix:"n",anchor:0}));return s.scale.set(Math.min(n.width/s.width,.7)),s.x=n.width/2-s.width/2,s.y=n.height-s.height-4,i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Se=function(t){function e(e){t.call(this),this.addChild(new Me(e))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container),Xe=function(t){function e(e){t.call(this);var i=[],n=this.addChild(new a.Graphics);this._circleGraphic=n;for(var o=0;o<6;o++)i.push({x:0,y:0});var r=function(t,e,i){return(1-i)*t+i*e},s={begin:0,end:3.4},h=0,c=0,d=0,l=s.begin;this.task.on("animetask",(function(t){n.clear();for(var e=1*t.delta,a=0;a<i.length;a++){var o=a/i.length,p=r(s.begin,s.end,o)+h;n.beginFill(16777215,1),n.drawCircle(26*Math.cos(p),26*Math.sin(p),6),n.endFill()}if(s.end+=.046*e,h+=.046*e,0===c){var u=d*d*(3-2*d);s.begin=r(l,s.end-3.4,u),d<1?d=Math.min(1,d+.016666666666666666*e):(l=s.begin,d=0,c=1)}else(d+=e)>32&&(d=0,c=0)}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroyObject=function(){this.task.clear(),this._circleGraphic.destroy(),this.destroy()},e}(n.Container),De=Pixim.Content.create("GameContent");De.setConfig({width:450,height:800}),De.defineImages({bunner:"assets/images/bunner.png?v=1","popup_hardmode.png":"assets/images/single/popup_hardmode.png","ui_button_no.png":"assets/images/single/ui_button_no.png","ui_button_yes.png":"assets/images/single/ui_button_yes.png","ui_StartWithThisItem.png":"assets/images/single/ui_StartWithThisItem.png","ui_useButton.png":"assets/images/single/ui_useButton.png","subhardmode.png":"assets/images/single/subhardmode.png",toptoscreentext:"assets/images/single/toptoscreentext.png",toplogo:"assets/images/single/toplogo.png"}),De.defineSpritesheets({nm:"assets/images/ascii.json",mapchip:"assets/images/mapchip.json",zombiex:"assets/images/zombiex.json",effects:"assets/images/effects.json",gameui:"assets/images/gameui.json",items:"assets/images/items.json",leaderboard:"assets/images/leaderboard.json",car:"assets/images/car.json",topresult:"assets/images/topresult.json",shc:"assets/images/shortcut.json",day:"assets/images/dayliybonus.json",mis:"assets/images/mission.json",skin:"assets/images/skin.json",bonusstage:"assets/images/bonusstage.json",gra:"assets/images/graphics.json"}),De.defineSounds({se_carenep:"assets/sound/se/se_carenep.mp3",se_deathroller:"assets/sound/se/se_deathroller.mp3",se_enemyenep:"assets/sound/se/se_enemyenep.mp3",se_enep:"assets/sound/se/se_enep.mp3",se_hold:"assets/sound/se/se_hold.mp3",se_item:"assets/sound/se/se_item.mp3",se_protect:"assets/sound/se/se_protect.mp3",se_protectstart:"assets/sound/se/se_protectstart.mp3",se_shoot:"assets/sound/se/se_shoot.mp3",se_shootenep:"assets/sound/se/se_shootenep.mp3",se_tank:"assets/sound/se/se_carengine.mp3",se_tankstart:"assets/sound/se/se_carstart.mp3",se_zombiewarn:"assets/sound/se/se_zombiewarn.mp3",se_gameover:"assets/sound/se/se_gameover.mp3",se_countdown:"assets/sound/se/se_countdown.mp3",se_coinget:"assets/sound/se/se_coinget.mp3",se_machinegun:"assets/sound/se/se_machinegun.mp3",se_start:"assets/sound/se/se_start.mp3",se_keylight:"assets/sound/se/se_keylight.mp3",bgm_top:"assets/sound/bgm/bgm_top.mp3",bgm_game:"assets/sound/bgm/bgm_game.mp3",bgm_result:"assets/sound/bgm/bgm_result.mp3"}),De.defineJsons({}),De.defineLibraries({root:Se});var je=De,Oe=Pixim.Content.create();Oe.defineImages({}),Oe.defineSpritesheets({});var Ae=function(t){function e(e){t.call(this);var i=this.addChild(new Xe);i.scale.set(.8),i.x=.5*e.width,i.y=.5*e.height;var n=this.addChild(new PIXI.Text("NowLoading...",{fill:16777215,fontSize:28,fontWeight:"bold"}));n.x=.5*e.width-.5*n.width,n.y=.5*e.height-.5*n.height+48;var a=this.addChild(new PIXI.Text("0%",{fill:16777215,fontSize:24,fontWeight:"bold"}));a.x=.5*e.width-.5*a.width,a.y=n.y+n.height+8,this.on("onLoaded",(function(t){t.total>0&&(a.text=Math.floor(t.current/t.total*100)+"%",a.x=.5*e.width-.5*a.width)}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pixim.Container);SCG.startAsync({Content:function(t,e,i,a,o,r){var s=t;return s.setConfig({width:a,height:o}),s.defineLibraries({root:function(t){function a(a){var o=this;t.call(this);var r=function(){var t=o.addChild(new i(a)),s=function(){t.task.clear(),t.destroy()};a.vars.api.prepareContentAsync({Content:e,onProgress:function(e,i){t.emit("onLoaded",{current:e,total:i})}},{isThrowError:!0}).then((function(t){return t()})).then((function(){s()})).catch((function(){s();var t=o.addChild(function(){for(var t=function(t,e,i,n,a,o,r){void 0===a&&(a=0),void 0===o&&(o=0),void 0===r&&(r=!1),r?(e.width>t.width?t.x=Math.floor(a+(e.width-t.width)*i):e.x=Math.floor(a+(t.width-e.width)*i),e.height>t.height?t.y=Math.floor(o+(e.height-t.height)*n):e.y=Math.floor(o+(t.height-e.height)*n)):(t.x=Math.floor(a+(e.width-t.width)*i),t.y=Math.floor(o+(e.height-t.height)*n))},e=new n.Container,i=["Failed to load","","Please try again in a location","nwith a good network environment."],o=180,r=0;r<i.length;r++){var s=e.addChild(new PIXI.Text(i[r],{fill:16777215,fontSize:18,fontWeight:"bold"}));t(s,a,.5,0,0,o),o+=s.height+20}var h=e.addChild(new PIXI.Graphics),c=h.addChild(new PIXI.Text("Retry",{fill:4473924,fontSize:38,fontWeight:"bold"}));return h.beginFill(16777215,1).drawRoundedRect(0,0,c.width+32,c.height+16,16).endFill(),t(c,h,.5,.5),t(h,a,.5,1,0,-100),h.interactive=!0,h.once("pointertap",(function(){e.emit("pop")})),e}());t.once("pop",(function(){t.task.clear(),t.destroy(),r()}))}))};r()}return t&&(a.__proto__=t),a.prototype=Object.create(t&&t.prototype),a.prototype.constructor=a,a}(n.Container)}),s}(Oe,je,Ae,450,800),width:450,height:800})}(Pixim,PIXI);
